# 虚拟机

> 说白了就是允许人们在同一台设备中使用多个不同的操作系统. 

**虚拟机软件**：`VMware Workstation`、`VirtualBox`、 Virtual PC.Citrix Xen Desktop,Parallels Desktop



**原理:**

​	虚拟机是借助虚拟机的软件来实现运行的, 但是虚拟机不是直接使用物理机的硬件资源, 它是通过**虚拟机监视器**调用**物理机操作系统的接口**来使用物理机的硬件. 



**应用场景:**

	1. 运行特定版本操作系统
 	2. 隔离物理机, 用来作测试
 	3. 提升硬件资源利用率



# `虚拟机技术`区别于`容器技术`

> 区别于容器化的技术,  容器技术最具代表性的就是Docker . 
>
> **Docker 作用:**
>
> 	1. 开箱即用
>  	2. 快速部署
>  	3. 可移植性强
>  	4. 环境隔离

> **Docker  原理:**
>
> 1.  `namespace`  实现  **系统环境的隔离**
> 2. `Cgroup` 实现  **资源限制**
> 3. `镜像管理文件系统操作` 实现  **根目录的隔离**



**区别: **

1. 虚拟机四依靠 **虚拟监视器** 在 **虚拟化的操作系统**中进行操作

   Docker则是依靠 **容器引擎** 来实现运行的,  并且Docker不需要 **虚拟机操作系统** , docker直接使用物理机. 

2. 虚拟机

   ​		启动需要几分钟

   ​		部署起来慢

   ​		占用硬盘一般为G 或者 几十G

   ​		性能弱于原生系统

   ​        一般一台机器之部署几十个虚拟机

   ​		隔离性强, 为系统隔离

   ​		安全性更强

3. Docker

   ​		启动为秒级

   ​		部署快

   ​		占用内存小, 一般为MB

   ​		性能损耗少

   ​		单机支持上千个容器

   ​		隔离性较弱, 为进程性隔离

   ​		安全性更弱



#  VMware安装

直接安装就行



# VMware 的连通

直接连接就行

**注意: **

1. Windows虚拟机安装完成后,  需要 **关闭许防火墙** , 不然可能没有办法使得 主机和物理机进行连接. 



# VMware 三种网络模式

1. 桥连接模式(Bridge)
2. NAT模式(Network Address Translation)
3. 仅主机模式(Host-Only)

## 前置知识

> **网卡: **
>
> ​	一般电脑都有两张网卡, 一张是有线网卡, 另一张是无线网卡

> **路由器** : 
>
>  	1. 扩展端口
>  	2. 发射无线信号, 起到WiFi功能
>  	3. 起到网关

> **交换机: **
>
> ​	扩展端口的作用, 使得各个房间设备都能上网. 



## 虚拟交换机

**虚拟交换机功能: ** 它可以使得处于 **相同模式的虚拟机**相互连接

| 虚拟交换机 | 用途       |
| ---------- | ---------- |
| VMnet0     | 桥连接模式 |
| VMnet1     | 仅主机模式 |
| VMnet8     | NAT模式    |





## 虚拟网卡

**虚拟网卡功能: ** 让 **主机** 和 **虚拟机** 相互连接. 

| 虚拟网卡                      | 用途       |
| ----------------------------- | ---------- |
| VMware Network Adapter VMnet1 | 仅主机模式 |
| VMware Network Adapter VMnet8 | NAT模式    |



桥接模式不需要虚拟网卡

一个虚拟机可以使用多张网卡



## 桥接模式

**特点: **

 	1. 物理机和虚拟机地位
 	2. 虚拟机占用一个独立的IP
 	3. 使用物理机的网卡访问互联网



**工作原理: **

 1. 通过  **vmnet0虚拟机**   将多台的虚拟机设置成相同的模式

 2.  **vmnet0虚拟机** 通过虚拟网桥直接占用一个局域网的 **真实IP** 

    并且直接连通 **物理的网卡来上网**

**`要求:    多台虚拟机的网段需要设置成和主机网段的IP一样`**



**连通后的情况: **

	1. 主机和虚拟机可以相互访问
 	2. 虚拟机和其他的主机之间可以相互访问
 	3. 虚拟机之间可以相互访问
 	4. 可以访问互联网



**使用场景: **

​	当人们需要创建一个虚拟服务器,  让局域网中的人都可以对其进行访问的时候, 就用桥接模式. 



## NAT模式

安装虚拟机的 **默认模式**

**特点:**

	1. 虚拟机在外部网络中没有自己的IP
 	2. **网络地址转换: **  虚拟NAT设备会把专用网络中的IP(虚拟机的IP) 地址转换为主机系统的IP地址
 	3. 主机可以联网, 虚拟机就可以联网



**工作原理: **

 1. 通过 **vmnet8虚拟交换机**来使得各个虚拟机能够相互访问

 2. 通过**vmnet8虚拟交换机**来连接 **虚拟网卡(VMware Network Adapter VMnet8)**来连接主机,

    这样虚拟机和物理机就可以实现连接, 能够相互访问了

3. 通过**vmnet8虚拟交换机** 连接 **虚拟路由器(NAT设备)** , 然后**虚拟路由器(NAT设备)** 连接**物理机的网卡**

   这样各台虚拟机就可以上网了. 



**连通后的情况: **

 1. 主机和虚拟机可以访问, 虚拟机也可以访问其他的主机, 但是 **其他主机无法访问虚拟机**

    可以通过 **共享网络,  端口映射**来解决该问题. 

 2. 虚拟机之间可以相互访问

 3. 可以访问互联网(一般配好虚拟机后就可以直接用)



**使用场景: **

​	绝大部分都可以



## 仅主机模式(HOst Only)

**特点:**

 	1. 虚拟机在外部网络中没有自己的IP
 	2. **不能上网**



**工作原理: **

 1. 通过 **vmnet1虚拟交换机**来使得各个虚拟机能够相互访问

 2. 通过**vmnet1虚拟交换机**来连接 **虚拟网卡(VMware Network Adapter VMnet1)**来连接主机,

    这样虚拟机和物理机就可以实现连接, 能够相互访问了

**`由于没有  虚拟交换机, 所有没法使用主机的网卡,  所以仅主机模式是没发上网的`**



**连通后的情况: **

 	1. 主机和虚拟机可以相互访问
 	2. 各个虚拟机之间可以相互访问
 	3. 不能访问互联网
 	4. 不能访问其他主机
 	5. 其他主机不能访问本机虚拟机



**使用场景: **

​	创建一个 **隔离** 环境的时候使用. 















